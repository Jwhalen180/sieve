2021/04/25 02:23:16 registering rpc server...
2021/04/25 02:23:16 config:
map[crd-list:[rabbitmqcluster] mode:learn]
2021/04/25 02:23:16 learn
2021/04/25 02:23:16 start learnServer...
2021/04/25 02:23:16 setting up connection...
2021/04/25 02:23:19 no event happening
2021/04/25 02:23:22 no event happening
2021/04/25 02:23:25 no event happening
2021/04/25 02:23:28 no event happening
2021/04/25 02:23:31 no event happening
2021/04/25 02:23:34 no event happening
2021/04/25 02:23:37 no event happening
2021/04/25 02:23:40 no event happening
2021/04/25 02:23:43 no event happening
2021/04/25 02:23:46 no event happening
2021/04/25 02:23:49 no event happening
2021/04/25 02:23:52 no event happening
2021/04/25 02:23:55 no event happening
2021/04/25 02:23:58 no event happening
2021/04/25 02:24:01 no event happening
2021/04/25 02:24:04 no event happening
2021/04/25 02:24:07 no event happening
2021/04/25 02:24:10 no event happening
2021/04/25 02:24:13 no event happening
2021/04/25 02:24:16 no event happening
2021/04/25 02:24:19 no event happening
2021/04/25 02:24:22 no event happening
2021/04/25 02:24:25 no event happening
2021/04/25 02:24:28 no event happening
2021/04/25 02:24:31 no event happening
2021/04/25 02:24:34 no event happening
2021/04/25 02:24:37 no event happening
2021/04/25 02:24:40 [SONAR-EVENT]	0	Added	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","resourceVersion":"1190","generation":1,"creationTimestamp":"2021-04-25T02:24:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":null}}
2021/04/25 02:24:40 [SONAR-START-RECONCILE]	rabbitmqcluster	0
2021/04/25 02:24:40 [SONAR-EVENT-APPLIED]	0
2021/04/25 02:24:40 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:24:40 [SONAR-SIDE-EFFECT]	Update	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:24:40 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:24:40 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NotFound
2021/04/25 02:24:40 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:24:40 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NotFound
2021/04/25 02:24:40 [SONAR-SIDE-EFFECT]	Create	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:24:43 [SONAR-EVENT]	1	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","resourceVersion":"1199","generation":2,"creationTimestamp":"2021-04-25T02:24:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":null}}
2021/04/25 02:24:43 [SONAR-EVENT-APPLIED]	1
2021/04/25 02:24:46 [SONAR-EVENT]	2	Added	service	{"metadata":{"name":"rabbitmq-cluster-nodes","namespace":"default","selfLink":"/api/v1/namespaces/default/services/rabbitmq-cluster-nodes","uid":"5718785c-6a7e-473d-abbb-401c69291573","resourceVersion":"1201","creationTimestamp":"2021-04-25T02:24:40Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":4369,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":25672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:publishNotReadyAddresses":{},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"epmd","protocol":"TCP","port":4369,"targetPort":4369},{"name":"cluster-rpc","protocol":"TCP","port":25672,"targetPort":25672}],"selector":{"app.kubernetes.io/name":"rabbitmq-cluster"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None","publishNotReadyAddresses":true},"status":{"loadBalancer":{}}}
2021/04/25 02:24:46 [SONAR-EVENT-APPLIED]	2
2021/04/25 02:24:46 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NotFound
2021/04/25 02:24:46 [SONAR-SIDE-EFFECT]	Create	service	default	rabbitmq-cluster	NoError
2021/04/25 02:24:46 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NotFound
2021/04/25 02:24:46 [SONAR-SIDE-EFFECT]	Create	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:24:49 [SONAR-EVENT]	3	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","resourceVersion":"1200","generation":2,"creationTimestamp":"2021-04-25T02:24:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ClusterAvailable","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"CouldNotRetrieveEndpoints","message":"Could not verify available service endpoints"},{"type":"NoWarnings","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"Initialising"}]}}
2021/04/25 02:24:49 [SONAR-EVENT-APPLIED]	3
2021/04/25 02:24:52 [SONAR-EVENT]	4	Added	service	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/api/v1/namespaces/default/services/rabbitmq-cluster","uid":"7176eeaa-e8eb-4aef-b3db-4f171c452949","resourceVersion":"1234","creationTimestamp":"2021-04-25T02:24:46Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:ports":{".":{},"k:{\"port\":5672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":15672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"amqp","protocol":"TCP","port":5672,"targetPort":5672},{"name":"management","protocol":"TCP","port":15672,"targetPort":15672}],"selector":{"app.kubernetes.io/name":"rabbitmq-cluster"},"clusterIP":"10.96.1.216","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/25 02:24:52 [SONAR-EVENT-APPLIED]	4
2021/04/25 02:24:55 [SONAR-EVENT]	5	Added	secret	{"metadata":{"name":"rabbitmq-cluster-erlang-cookie","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/rabbitmq-cluster-erlang-cookie","uid":"2ea8b272-20ed-48ec-b305-027e6f74a55e","resourceVersion":"1238","creationTimestamp":"2021-04-25T02:24:46Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.erlang.cookie":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{".erlang.cookie":"X29Ud1QwejJTdmJVdHBxMzh1VXBBOTlYNGNaLWhtMkU="},"type":"Opaque"}
2021/04/25 02:24:55 [SONAR-EVENT-APPLIED]	5
2021/04/25 02:24:55 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NotFound
2021/04/25 02:24:55 [SONAR-SIDE-EFFECT]	Create	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:24:55 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NotFound
2021/04/25 02:24:55 [SONAR-SIDE-EFFECT]	Create	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:24:58 [SONAR-EVENT]	6	Added	secret	{"metadata":{"name":"rabbitmq-cluster-default-user","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/rabbitmq-cluster-default-user","uid":"ce81b683-2798-402f-add8-ddb860035f6c","resourceVersion":"1282","creationTimestamp":"2021-04-25T02:24:55Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:55Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:default_user.conf":{},"f:password":{},"f:provider":{},"f:type":{},"f:username":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"default_user.conf":"ZGVmYXVsdF91c2VyID0gczh4UHMzVm1rRkRGSkwxN2trT3RYVERwZWVQQi0xRHcKZGVmYXVsdF9wYXNzID0gZ0ZvRl9uQndDeUhaWmJjekFLTWs2dFMzRHp3dG1qTXIK","password":"Z0ZvRl9uQndDeUhaWmJjekFLTWs2dFMzRHp3dG1qTXI=","provider":"cmFiYml0bXE=","type":"cmFiYml0bXE=","username":"czh4UHMzVm1rRkRGSkwxN2trT3RYVERwZWVQQi0xRHc="},"type":"Opaque"}
2021/04/25 02:24:58 [SONAR-EVENT-APPLIED]	6
2021/04/25 02:25:01 [SONAR-EVENT]	7	Added	configmap	{"metadata":{"name":"rabbitmq-cluster-plugins-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/rabbitmq-cluster-plugins-conf","uid":"1d137937-31f4-4f2e-9c00-cbbd698ab90b","resourceVersion":"1284","creationTimestamp":"2021-04-25T02:24:55Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:55Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:enabled_plugins":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"enabled_plugins":"[rabbitmq_peer_discovery_k8s,rabbitmq_prometheus,rabbitmq_management]."}}
2021/04/25 02:25:01 [SONAR-EVENT-APPLIED]	7
2021/04/25 02:25:01 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NotFound
2021/04/25 02:25:01 [SONAR-SIDE-EFFECT]	Create	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:25:01 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:25:01 [SONAR-SIDE-EFFECT]	Create	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:01 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NotFound
2021/04/25 02:25:01 [SONAR-SIDE-EFFECT]	Create	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:25:01 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:25:01 [SONAR-SIDE-EFFECT]	Create	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:01 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:25:01 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:25:01 [SONAR-SIDE-EFFECT]	Create	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:04 [SONAR-EVENT]	8	Added	configmap	{"metadata":{"name":"rabbitmq-cluster-server-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/rabbitmq-cluster-server-conf","uid":"d5c0f7cc-4b75-4f88-be48-4bb1f16991d2","resourceVersion":"1311","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:operatorDefaults.conf":{},"f:userDefinedConfiguration.conf":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"operatorDefaults.conf":"cluster_formation.peer_discovery_backend             = rabbit_peer_discovery_k8s\ncluster_formation.k8s.host                           = kubernetes.default\ncluster_formation.k8s.address_type                   = hostname\ncluster_partition_handling                           = pause_minority\nqueue_master_locator                                 = min-masters\ndisk_free_limit.absolute                             = 2GB\ncluster_formation.randomized_startup_delay_range.min = 5\ncluster_formation.randomized_startup_delay_range.max = 30\ncluster_name                                         = rabbitmq-cluster\n","userDefinedConfiguration.conf":"total_memory_available_override_value = 1717986919\n"}}
2021/04/25 02:25:04 [SONAR-EVENT-APPLIED]	8
2021/04/25 02:25:07 [SONAR-EVENT]	9	Added	serviceaccount	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/rabbitmq-cluster-server","uid":"debe26ae-50e7-45c6-a49b-c5ba92e666e4","resourceVersion":"1313","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]}}
2021/04/25 02:25:07 [SONAR-EVENT-APPLIED]	9
2021/04/25 02:25:10 [SONAR-EVENT]	10	Added	role	{"metadata":{"name":"rabbitmq-cluster-peer-discovery","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/roles/rabbitmq-cluster-peer-discovery","uid":"19b40848-460e-4d1d-8039-4c7f9376c5e6","resourceVersion":"1317","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:rules":{}}}]},"rules":[{"verbs":["get"],"apiGroups":[""],"resources":["endpoints"]},{"verbs":["create"],"apiGroups":[""],"resources":["events"]}]}
2021/04/25 02:25:10 [SONAR-EVENT-APPLIED]	10
2021/04/25 02:25:13 [SONAR-EVENT]	11	Added	rolebinding	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/rolebindings/rabbitmq-cluster-server","uid":"ff5b55f7-5b3e-4baa-85c0-26e61b47dcc8","resourceVersion":"1319","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:roleRef":{"f:apiGroup":{},"f:kind":{},"f:name":{}},"f:subjects":{}}}]},"subjects":[{"kind":"ServiceAccount","name":"rabbitmq-cluster-server"}],"roleRef":{"apiGroup":"rbac.authorization.k8s.io","kind":"Role","name":"rabbitmq-cluster-peer-discovery"}}
2021/04/25 02:25:13 [SONAR-EVENT-APPLIED]	11
2021/04/25 02:25:16 [SONAR-EVENT]	12	Added	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","resourceVersion":"1321","generation":1,"creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"replicas":0}}
2021/04/25 02:25:16 [SONAR-EVENT-APPLIED]	12
2021/04/25 02:25:16 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:16 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	Conflict
2021/04/25 02:25:19 [SONAR-EVENT]	13	Updated	serviceaccount	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/rabbitmq-cluster-server","uid":"debe26ae-50e7-45c6-a49b-c5ba92e666e4","resourceVersion":"1316","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:secrets":{".":{},"k:{\"name\":\"rabbitmq-cluster-server-token-j7wc4\"}":{".":{},"f:name":{}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"secrets":[{"name":"rabbitmq-cluster-server-token-j7wc4"}]}
2021/04/25 02:25:19 [SONAR-EVENT-APPLIED]	13
2021/04/25 02:25:22 [SONAR-EVENT]	14	Updated	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","resourceVersion":"1331","generation":1,"creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"rabbitmq-cluster-server-5f8b8665fb","updateRevision":"rabbitmq-cluster-server-5f8b8665fb","collisionCount":0}}
2021/04/25 02:25:22 [SONAR-EVENT-APPLIED]	14
2021/04/25 02:25:22 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:22 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:22 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:25:25 [SONAR-EVENT]	15	Updated	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","resourceVersion":"1452","generation":1,"creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"rabbitmq.com/createdAt":"2021-04-25T02:25:01Z"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:25:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:rabbitmq.com/createdAt":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"rabbitmq-cluster-server-5f8b8665fb","updateRevision":"rabbitmq-cluster-server-5f8b8665fb","collisionCount":0}}
2021/04/25 02:25:25 [SONAR-EVENT-APPLIED]	15
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-EVENT]	16	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","resourceVersion":"1453","generation":2,"creationTimestamp":"2021-04-25T02:24:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:25:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ClusterAvailable","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"CouldNotRetrieveEndpoints","message":"Could not verify available service endpoints"},{"type":"NoWarnings","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"rabbitmq-cluster","namespace":"default"}}}}
2021/04/25 02:25:25 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	0
2021/04/25 02:25:25 [SONAR-EVENT-APPLIED]	16
2021/04/25 02:25:25 [SONAR-START-RECONCILE]	rabbitmqcluster	1
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-EVENT]	17	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","resourceVersion":"1471","generation":2,"creationTimestamp":"2021-04-25T02:24:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:25:25Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"False","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NotAllPodsReady","message":"0/1 Pods ready"},{"type":"ClusterAvailable","status":"False","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NoEndpointsAvailable","message":"The service has no endpoints available"},{"type":"NoWarnings","status":"True","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NoWarnings"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"rabbitmq-cluster","namespace":"default"}}}}
2021/04/25 02:25:25 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	1
2021/04/25 02:25:25 [SONAR-EVENT-APPLIED]	17
2021/04/25 02:25:25 [SONAR-START-RECONCILE]	rabbitmqcluster	2
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 no event happening
2021/04/25 02:25:25 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	2
2021/04/25 02:25:25 [SONAR-START-RECONCILE]	rabbitmqcluster	3
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:25:25 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:25 no event happening
2021/04/25 02:25:25 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	3
2021/04/25 02:25:28 [SONAR-EVENT]	18	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","resourceVersion":"1486","generation":3,"creationTimestamp":"2021-04-25T02:24:38Z","deletionTimestamp":"2021-04-25T02:25:28Z","deletionGracePeriodSeconds":0,"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:25:25Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"False","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NotAllPodsReady","message":"0/1 Pods ready"},{"type":"ClusterAvailable","status":"False","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NoEndpointsAvailable","message":"The service has no endpoints available"},{"type":"NoWarnings","status":"True","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NoWarnings"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"rabbitmq-cluster","namespace":"default"}}}}
2021/04/25 02:25:28 [SONAR-EVENT-APPLIED]	18
2021/04/25 02:25:28 [SONAR-START-RECONCILE]	rabbitmqcluster	4
2021/04/25 02:25:28 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:25:31 [SONAR-EVENT]	19	Replaced	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"747a50b3-3dbd-48ca-aece-f56827c06697","resourceVersion":"1398","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"a2401f46-0299-45f3-a608-a7d46f913a65\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:09Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-j7wc4","secret":{"secretName":"rabbitmq-cluster-server-token-j7wc4","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:08Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-25T02:25:04Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:07Z","finishedAt":"2021-04-25T02:25:07Z","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}],"containerStatuses":[{"name":"rabbitmq","state":{"running":{"startedAt":"2021-04-25T02:25:08Z"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f","started":true}],"qosClass":"Burstable"}}
2021/04/25 02:25:31 [SONAR-EVENT-APPLIED]	19
2021/04/25 02:25:31 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/25 02:25:31 [SONAR-SIDE-EFFECT]	Update	pod	default	rabbitmq-cluster-server-0	NoError
2021/04/25 02:25:31 [SONAR-SIDE-EFFECT]	Delete	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:25:31 [SONAR-SIDE-EFFECT]	Update	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:25:31 [SONAR-EVENT]	20	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"747a50b3-3dbd-48ca-aece-f56827c06697","resourceVersion":"1501","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"a2401f46-0299-45f3-a608-a7d46f913a65\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:09Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:31Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-j7wc4","secret":{"secretName":"rabbitmq-cluster-server-token-j7wc4","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:08Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-25T02:25:04Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:07Z","finishedAt":"2021-04-25T02:25:07Z","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}],"containerStatuses":[{"name":"rabbitmq","state":{"running":{"startedAt":"2021-04-25T02:25:08Z"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f","started":true}],"qosClass":"Burstable"}}
2021/04/25 02:25:31 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	4
2021/04/25 02:25:31 [SONAR-EVENT-APPLIED]	20
2021/04/25 02:25:34 [SONAR-EVENT]	21	Deleted	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","resourceVersion":"1502","generation":1,"creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"rabbitmq.com/createdAt":"2021-04-25T02:25:01Z"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:25:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:rabbitmq.com/createdAt":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"rabbitmq-cluster-server-5f8b8665fb","updateRevision":"rabbitmq-cluster-server-5f8b8665fb","collisionCount":0}}
2021/04/25 02:25:34 [SONAR-EVENT-APPLIED]	21
2021/04/25 02:25:34 [SONAR-START-RECONCILE]	rabbitmqcluster	5
2021/04/25 02:25:37 [SONAR-EVENT]	22	Deleted	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","resourceVersion":"1503","generation":3,"creationTimestamp":"2021-04-25T02:24:38Z","deletionTimestamp":"2021-04-25T02:25:28Z","deletionGracePeriodSeconds":0,"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:24:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:25:25Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"False","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NotAllPodsReady","message":"0/1 Pods ready"},{"type":"ClusterAvailable","status":"False","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NoEndpointsAvailable","message":"The service has no endpoints available"},{"type":"NoWarnings","status":"True","lastTransitionTime":"2021-04-25T02:25:25Z","reason":"NoWarnings"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-25T02:24:40Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"rabbitmq-cluster","namespace":"default"}}}}
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	22
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	23	Deleted	role	{"metadata":{"name":"rabbitmq-cluster-peer-discovery","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/roles/rabbitmq-cluster-peer-discovery","uid":"19b40848-460e-4d1d-8039-4c7f9376c5e6","resourceVersion":"1504","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:rules":{}}}]},"rules":[{"verbs":["get"],"apiGroups":[""],"resources":["endpoints"]},{"verbs":["create"],"apiGroups":[""],"resources":["events"]}]}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	5
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	23
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	6
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	24	Deleted	configmap	{"metadata":{"name":"rabbitmq-cluster-plugins-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/rabbitmq-cluster-plugins-conf","uid":"1d137937-31f4-4f2e-9c00-cbbd698ab90b","resourceVersion":"1508","creationTimestamp":"2021-04-25T02:24:55Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:55Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:enabled_plugins":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"enabled_plugins":"[rabbitmq_peer_discovery_k8s,rabbitmq_prometheus,rabbitmq_management]."}}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	6
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	24
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	7
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	25	Deleted	rolebinding	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/rolebindings/rabbitmq-cluster-server","uid":"ff5b55f7-5b3e-4baa-85c0-26e61b47dcc8","resourceVersion":"1505","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:roleRef":{"f:apiGroup":{},"f:kind":{},"f:name":{}},"f:subjects":{}}}]},"subjects":[{"kind":"ServiceAccount","name":"rabbitmq-cluster-server"}],"roleRef":{"apiGroup":"rbac.authorization.k8s.io","kind":"Role","name":"rabbitmq-cluster-peer-discovery"}}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	7
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	25
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	8
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	26	Deleted	service	{"metadata":{"name":"rabbitmq-cluster-nodes","namespace":"default","selfLink":"/api/v1/namespaces/default/services/rabbitmq-cluster-nodes","uid":"5718785c-6a7e-473d-abbb-401c69291573","resourceVersion":"1506","creationTimestamp":"2021-04-25T02:24:40Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:40Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":4369,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":25672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:publishNotReadyAddresses":{},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"epmd","protocol":"TCP","port":4369,"targetPort":4369},{"name":"cluster-rpc","protocol":"TCP","port":25672,"targetPort":25672}],"selector":{"app.kubernetes.io/name":"rabbitmq-cluster"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None","publishNotReadyAddresses":true},"status":{"loadBalancer":{}}}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	8
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	26
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	9
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	27	Deleted	serviceaccount	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/rabbitmq-cluster-server","uid":"debe26ae-50e7-45c6-a49b-c5ba92e666e4","resourceVersion":"1509","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:secrets":{".":{},"k:{\"name\":\"rabbitmq-cluster-server-token-j7wc4\"}":{".":{},"f:name":{}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"secrets":[{"name":"rabbitmq-cluster-server-token-j7wc4"}]}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	9
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	27
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	10
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	28	Deleted	secret	{"metadata":{"name":"rabbitmq-cluster-default-user","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/rabbitmq-cluster-default-user","uid":"ce81b683-2798-402f-add8-ddb860035f6c","resourceVersion":"1512","creationTimestamp":"2021-04-25T02:24:55Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:55Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:default_user.conf":{},"f:password":{},"f:provider":{},"f:type":{},"f:username":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"default_user.conf":"ZGVmYXVsdF91c2VyID0gczh4UHMzVm1rRkRGSkwxN2trT3RYVERwZWVQQi0xRHcKZGVmYXVsdF9wYXNzID0gZ0ZvRl9uQndDeUhaWmJjekFLTWs2dFMzRHp3dG1qTXIK","password":"Z0ZvRl9uQndDeUhaWmJjekFLTWs2dFMzRHp3dG1qTXI=","provider":"cmFiYml0bXE=","type":"cmFiYml0bXE=","username":"czh4UHMzVm1rRkRGSkwxN2trT3RYVERwZWVQQi0xRHc="},"type":"Opaque"}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	10
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	28
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	11
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	29	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"747a50b3-3dbd-48ca-aece-f56827c06697","resourceVersion":"1513","creationTimestamp":"2021-04-25T02:25:01Z","deletionTimestamp":"2021-05-02T02:25:31Z","deletionGracePeriodSeconds":604800,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"a2401f46-0299-45f3-a608-a7d46f913a65\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:09Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:31Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-j7wc4","secret":{"secretName":"rabbitmq-cluster-server-token-j7wc4","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:08Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-25T02:25:04Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:07Z","finishedAt":"2021-04-25T02:25:07Z","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}],"containerStatuses":[{"name":"rabbitmq","state":{"running":{"startedAt":"2021-04-25T02:25:08Z"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f","started":true}],"qosClass":"Burstable"}}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	11
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	12
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	29
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	30	Deleted	configmap	{"metadata":{"name":"rabbitmq-cluster-server-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/rabbitmq-cluster-server-conf","uid":"d5c0f7cc-4b75-4f88-be48-4bb1f16991d2","resourceVersion":"1510","creationTimestamp":"2021-04-25T02:25:01Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:operatorDefaults.conf":{},"f:userDefinedConfiguration.conf":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"operatorDefaults.conf":"cluster_formation.peer_discovery_backend             = rabbit_peer_discovery_k8s\ncluster_formation.k8s.host                           = kubernetes.default\ncluster_formation.k8s.address_type                   = hostname\ncluster_partition_handling                           = pause_minority\nqueue_master_locator                                 = min-masters\ndisk_free_limit.absolute                             = 2GB\ncluster_formation.randomized_startup_delay_range.min = 5\ncluster_formation.randomized_startup_delay_range.max = 30\ncluster_name                                         = rabbitmq-cluster\n","userDefinedConfiguration.conf":"total_memory_available_override_value = 1717986919\n"}}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	12
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	13
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	30
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	31	Deleted	service	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/api/v1/namespaces/default/services/rabbitmq-cluster","uid":"7176eeaa-e8eb-4aef-b3db-4f171c452949","resourceVersion":"1507","creationTimestamp":"2021-04-25T02:24:46Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:ports":{".":{},"k:{\"port\":5672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":15672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"amqp","protocol":"TCP","port":5672,"targetPort":5672},{"name":"management","protocol":"TCP","port":15672,"targetPort":15672}],"selector":{"app.kubernetes.io/name":"rabbitmq-cluster"},"clusterIP":"10.96.1.216","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	13
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	14
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	31
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	32	Deleted	secret	{"metadata":{"name":"rabbitmq-cluster-erlang-cookie","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/rabbitmq-cluster-erlang-cookie","uid":"2ea8b272-20ed-48ec-b305-027e6f74a55e","resourceVersion":"1515","creationTimestamp":"2021-04-25T02:24:46Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"f8e77b1a-58da-41f4-b7f1-5924d0e31558","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:24:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.erlang.cookie":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f8e77b1a-58da-41f4-b7f1-5924d0e31558\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{".erlang.cookie":"X29Ud1QwejJTdmJVdHBxMzh1VXBBOTlYNGNaLWhtMkU="},"type":"Opaque"}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	14
2021/04/25 02:25:37 [SONAR-START-RECONCILE]	rabbitmqcluster	15
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	32
2021/04/25 02:25:37 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:37 [SONAR-EVENT]	33	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"747a50b3-3dbd-48ca-aece-f56827c06697","resourceVersion":"1542","creationTimestamp":"2021-04-25T02:25:01Z","deletionTimestamp":"2021-05-02T02:25:31Z","deletionGracePeriodSeconds":604800,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"a2401f46-0299-45f3-a608-a7d46f913a65\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:31Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-j7wc4","secret":{"secretName":"rabbitmq-cluster-server-token-j7wc4","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:08Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-25T02:25:04Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:07Z","finishedAt":"2021-04-25T02:25:07Z","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}],"containerStatuses":[{"name":"rabbitmq","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:08Z","finishedAt":"2021-04-25T02:25:35Z","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f","started":false}],"qosClass":"Burstable"}}
2021/04/25 02:25:37 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	15
2021/04/25 02:25:37 [SONAR-EVENT-APPLIED]	33
2021/04/25 02:25:40 [SONAR-START-RECONCILE]	rabbitmqcluster	16
2021/04/25 02:25:40 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NotFound
2021/04/25 02:25:40 no event happening
2021/04/25 02:25:40 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	16
2021/04/25 02:25:43 no event happening
2021/04/25 02:25:46 no event happening
2021/04/25 02:25:49 [SONAR-EVENT]	34	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"747a50b3-3dbd-48ca-aece-f56827c06697","resourceVersion":"1596","creationTimestamp":"2021-04-25T02:25:01Z","deletionTimestamp":"2021-04-25T02:25:31Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"a2401f46-0299-45f3-a608-a7d46f913a65\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:31Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-j7wc4","secret":{"secretName":"rabbitmq-cluster-server-token-j7wc4","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:08Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-25T02:25:04Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:07Z","finishedAt":"2021-04-25T02:25:07Z","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}],"containerStatuses":[{"name":"rabbitmq","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:08Z","finishedAt":"2021-04-25T02:25:35Z","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f","started":false}],"qosClass":"Burstable"}}
2021/04/25 02:25:49 [SONAR-EVENT-APPLIED]	34
2021/04/25 02:25:52 [SONAR-EVENT]	35	Deleted	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"747a50b3-3dbd-48ca-aece-f56827c06697","resourceVersion":"1597","creationTimestamp":"2021-04-25T02:25:01Z","deletionTimestamp":"2021-04-25T02:25:31Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"a2401f46-0299-45f3-a608-a7d46f913a65","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"a2401f46-0299-45f3-a608-a7d46f913a65\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:31Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:25:35Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-j7wc4","secret":{"secretName":"rabbitmq-cluster-server-token-j7wc4","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-j7wc4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:08Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:25:04Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-25T02:25:04Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:07Z","finishedAt":"2021-04-25T02:25:07Z","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://c26201c0faa52a6f1e7c85813cf4138e19a2685fde2806d9f1e80fc23e57edf9"}],"containerStatuses":[{"name":"rabbitmq","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:25:08Z","finishedAt":"2021-04-25T02:25:35Z","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://72c00cf2adfdba55549627c6fa628a85172007d86644371ea57279e709b9c47f","started":false}],"qosClass":"Burstable"}}
2021/04/25 02:25:52 [SONAR-EVENT-APPLIED]	35
2021/04/25 02:25:55 no event happening
2021/04/25 02:25:58 no event happening
2021/04/25 02:26:01 no event happening
2021/04/25 02:26:04 no event happening
2021/04/25 02:26:07 no event happening
2021/04/25 02:26:10 no event happening
2021/04/25 02:26:13 no event happening
2021/04/25 02:26:16 no event happening
2021/04/25 02:26:19 no event happening
2021/04/25 02:26:22 [SONAR-EVENT]	36	Added	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","resourceVersion":"1755","generation":1,"creationTimestamp":"2021-04-25T02:26:21Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:26:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":null}}
2021/04/25 02:26:22 [SONAR-EVENT-APPLIED]	36
2021/04/25 02:26:22 [SONAR-START-RECONCILE]	rabbitmqcluster	17
2021/04/25 02:26:22 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:26:22 [SONAR-SIDE-EFFECT]	Update	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:26:22 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:26:22 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NotFound
2021/04/25 02:26:22 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:26:22 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NotFound
2021/04/25 02:26:22 [SONAR-SIDE-EFFECT]	Create	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:26:25 [SONAR-EVENT]	37	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","resourceVersion":"1756","generation":2,"creationTimestamp":"2021-04-25T02:26:21Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:26:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:26:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":null}}
2021/04/25 02:26:25 [SONAR-EVENT-APPLIED]	37
2021/04/25 02:26:28 [SONAR-EVENT]	38	Added	service	{"metadata":{"name":"rabbitmq-cluster-nodes","namespace":"default","selfLink":"/api/v1/namespaces/default/services/rabbitmq-cluster-nodes","uid":"5776fb4e-bc34-40af-9924-784aa2da0972","resourceVersion":"1758","creationTimestamp":"2021-04-25T02:26:22Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":4369,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":25672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:publishNotReadyAddresses":{},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"epmd","protocol":"TCP","port":4369,"targetPort":4369},{"name":"cluster-rpc","protocol":"TCP","port":25672,"targetPort":25672}],"selector":{"app.kubernetes.io/name":"rabbitmq-cluster"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None","publishNotReadyAddresses":true},"status":{"loadBalancer":{}}}
2021/04/25 02:26:28 [SONAR-EVENT-APPLIED]	38
2021/04/25 02:26:28 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NotFound
2021/04/25 02:26:28 [SONAR-SIDE-EFFECT]	Create	service	default	rabbitmq-cluster	NoError
2021/04/25 02:26:28 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NotFound
2021/04/25 02:26:28 [SONAR-SIDE-EFFECT]	Create	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:26:31 [SONAR-EVENT]	39	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","resourceVersion":"1757","generation":2,"creationTimestamp":"2021-04-25T02:26:21Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:26:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:26:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ClusterAvailable","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"CouldNotRetrieveEndpoints","message":"Could not verify available service endpoints"},{"type":"NoWarnings","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"Initialising"}]}}
2021/04/25 02:26:31 [SONAR-EVENT-APPLIED]	39
2021/04/25 02:26:34 [SONAR-EVENT]	40	Added	service	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/api/v1/namespaces/default/services/rabbitmq-cluster","uid":"8d51ab33-14b1-49c4-8b8c-c918ad90486e","resourceVersion":"1790","creationTimestamp":"2021-04-25T02:26:28Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:28Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:ports":{".":{},"k:{\"port\":5672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":15672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"amqp","protocol":"TCP","port":5672,"targetPort":5672},{"name":"management","protocol":"TCP","port":15672,"targetPort":15672}],"selector":{"app.kubernetes.io/name":"rabbitmq-cluster"},"clusterIP":"10.96.198.209","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/25 02:26:34 [SONAR-EVENT-APPLIED]	40
2021/04/25 02:26:37 [SONAR-EVENT]	41	Added	secret	{"metadata":{"name":"rabbitmq-cluster-erlang-cookie","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/rabbitmq-cluster-erlang-cookie","uid":"c2d9dab7-f861-49cd-a28f-378498305135","resourceVersion":"1793","creationTimestamp":"2021-04-25T02:26:28Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:28Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.erlang.cookie":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{".erlang.cookie":"TXdpMEx6ZmNRTTEyeWtLVjJZMG1EYWQxYm1xQnd0Y24="},"type":"Opaque"}
2021/04/25 02:26:37 [SONAR-EVENT-APPLIED]	41
2021/04/25 02:26:37 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NotFound
2021/04/25 02:26:37 [SONAR-SIDE-EFFECT]	Create	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:26:37 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NotFound
2021/04/25 02:26:37 [SONAR-SIDE-EFFECT]	Create	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:26:40 [SONAR-EVENT]	42	Added	secret	{"metadata":{"name":"rabbitmq-cluster-default-user","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/rabbitmq-cluster-default-user","uid":"9924b85a-6908-4b5f-9605-a05c4d652210","resourceVersion":"1836","creationTimestamp":"2021-04-25T02:26:37Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:37Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:default_user.conf":{},"f:password":{},"f:provider":{},"f:type":{},"f:username":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"default_user.conf":"ZGVmYXVsdF91c2VyID0geVFmSzVhRl9MTndnVnVlX3VGaHJ0NzlzNHNQR0ZYeU4KZGVmYXVsdF9wYXNzID0gbERRZW1idW1SelpsdE00dWVmMkZ3bDFhWklrejhZZDYK","password":"bERRZW1idW1SelpsdE00dWVmMkZ3bDFhWklrejhZZDY=","provider":"cmFiYml0bXE=","type":"cmFiYml0bXE=","username":"eVFmSzVhRl9MTndnVnVlX3VGaHJ0NzlzNHNQR0ZYeU4="},"type":"Opaque"}
2021/04/25 02:26:40 [SONAR-EVENT-APPLIED]	42
2021/04/25 02:26:43 [SONAR-EVENT]	43	Added	configmap	{"metadata":{"name":"rabbitmq-cluster-plugins-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/rabbitmq-cluster-plugins-conf","uid":"ce700dc2-9f90-4486-8a18-51d1f6986f5b","resourceVersion":"1838","creationTimestamp":"2021-04-25T02:26:37Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:37Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:enabled_plugins":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"enabled_plugins":"[rabbitmq_peer_discovery_k8s,rabbitmq_prometheus,rabbitmq_management]."}}
2021/04/25 02:26:43 [SONAR-EVENT-APPLIED]	43
2021/04/25 02:26:43 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NotFound
2021/04/25 02:26:43 [SONAR-SIDE-EFFECT]	Create	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:26:43 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:26:43 [SONAR-SIDE-EFFECT]	Create	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:26:43 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NotFound
2021/04/25 02:26:43 [SONAR-SIDE-EFFECT]	Create	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:26:43 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:26:43 [SONAR-SIDE-EFFECT]	Create	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:26:43 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:26:43 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NotFound
2021/04/25 02:26:43 [SONAR-SIDE-EFFECT]	Create	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:26:46 [SONAR-EVENT]	44	Added	configmap	{"metadata":{"name":"rabbitmq-cluster-server-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/rabbitmq-cluster-server-conf","uid":"7a81233e-30a7-4375-adbf-580b2086110a","resourceVersion":"1863","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:operatorDefaults.conf":{},"f:userDefinedConfiguration.conf":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"operatorDefaults.conf":"cluster_formation.peer_discovery_backend             = rabbit_peer_discovery_k8s\ncluster_formation.k8s.host                           = kubernetes.default\ncluster_formation.k8s.address_type                   = hostname\ncluster_partition_handling                           = pause_minority\nqueue_master_locator                                 = min-masters\ndisk_free_limit.absolute                             = 2GB\ncluster_formation.randomized_startup_delay_range.min = 5\ncluster_formation.randomized_startup_delay_range.max = 30\ncluster_name                                         = rabbitmq-cluster\n","userDefinedConfiguration.conf":"total_memory_available_override_value = 1717986919\n"}}
2021/04/25 02:26:46 [SONAR-EVENT-APPLIED]	44
2021/04/25 02:26:49 [SONAR-EVENT]	45	Added	serviceaccount	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/rabbitmq-cluster-server","uid":"75d350fa-39dd-4943-b067-a3989b2d24ea","resourceVersion":"1865","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]}}
2021/04/25 02:26:49 [SONAR-EVENT-APPLIED]	45
2021/04/25 02:26:52 [SONAR-EVENT]	46	Added	role	{"metadata":{"name":"rabbitmq-cluster-peer-discovery","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/roles/rabbitmq-cluster-peer-discovery","uid":"f36441c9-fc0b-4d46-b0c9-05a561a52c9c","resourceVersion":"1867","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:rules":{}}}]},"rules":[{"verbs":["get"],"apiGroups":[""],"resources":["endpoints"]},{"verbs":["create"],"apiGroups":[""],"resources":["events"]}]}
2021/04/25 02:26:52 [SONAR-EVENT-APPLIED]	46
2021/04/25 02:26:55 [SONAR-EVENT]	47	Added	rolebinding	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/rolebindings/rabbitmq-cluster-server","uid":"ea6e2c5c-00f4-471c-8b04-fe2dd604cbf6","resourceVersion":"1869","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:roleRef":{"f:apiGroup":{},"f:kind":{},"f:name":{}},"f:subjects":{}}}]},"subjects":[{"kind":"ServiceAccount","name":"rabbitmq-cluster-server"}],"roleRef":{"apiGroup":"rbac.authorization.k8s.io","kind":"Role","name":"rabbitmq-cluster-peer-discovery"}}
2021/04/25 02:26:55 [SONAR-EVENT-APPLIED]	47
2021/04/25 02:26:58 [SONAR-EVENT]	48	Added	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","resourceVersion":"1873","generation":1,"creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"replicas":0}}
2021/04/25 02:26:58 [SONAR-EVENT-APPLIED]	48
2021/04/25 02:26:58 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:26:58 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	Conflict
2021/04/25 02:27:01 [SONAR-EVENT]	49	Added	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"548448f9-9bbb-4b82-9901-73317eb92c6d","resourceVersion":"1879","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"dceeb962-44c7-4fd2-a763-9565683f466e\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-rjhcs","secret":{"secretName":"rabbitmq-cluster-server-token-rjhcs","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Pending","qosClass":"Burstable"}}
2021/04/25 02:27:01 [SONAR-EVENT-APPLIED]	49
2021/04/25 02:27:04 [SONAR-EVENT]	50	Updated	serviceaccount	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/rabbitmq-cluster-server","uid":"75d350fa-39dd-4943-b067-a3989b2d24ea","resourceVersion":"1872","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:secrets":{".":{},"k:{\"name\":\"rabbitmq-cluster-server-token-rjhcs\"}":{".":{},"f:name":{}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"secrets":[{"name":"rabbitmq-cluster-server-token-rjhcs"}]}
2021/04/25 02:27:04 [SONAR-EVENT-APPLIED]	50
2021/04/25 02:27:07 [SONAR-EVENT]	51	Updated	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","resourceVersion":"1880","generation":1,"creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"rabbitmq-cluster-server-5f8b8665fb","updateRevision":"rabbitmq-cluster-server-5f8b8665fb","collisionCount":0}}
2021/04/25 02:27:07 [SONAR-EVENT-APPLIED]	51
2021/04/25 02:27:07 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:07 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:07 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:10 [SONAR-EVENT]	52	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"548448f9-9bbb-4b82-9901-73317eb92c6d","resourceVersion":"1917","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"dceeb962-44c7-4fd2-a763-9565683f466e\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-rjhcs","secret":{"secretName":"rabbitmq-cluster-server-token-rjhcs","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z"}],"qosClass":"Burstable"}}
2021/04/25 02:27:10 [SONAR-EVENT-APPLIED]	52
2021/04/25 02:27:13 [SONAR-EVENT]	53	Updated	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","resourceVersion":"2026","generation":1,"creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"rabbitmq.com/createdAt":"2021-04-25T02:26:43Z"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:27:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:rabbitmq.com/createdAt":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"rabbitmq-cluster-server-5f8b8665fb","updateRevision":"rabbitmq-cluster-server-5f8b8665fb","collisionCount":0}}
2021/04/25 02:27:13 [SONAR-EVENT-APPLIED]	53
2021/04/25 02:27:13 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:13 [SONAR-EVENT]	54	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","resourceVersion":"2027","generation":2,"creationTimestamp":"2021-04-25T02:26:21Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:26:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:27:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ClusterAvailable","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"CouldNotRetrieveEndpoints","message":"Could not verify available service endpoints"},{"type":"NoWarnings","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"rabbitmq-cluster","namespace":"default"}}}}
2021/04/25 02:27:13 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	17
2021/04/25 02:27:13 [SONAR-START-RECONCILE]	rabbitmqcluster	18
2021/04/25 02:27:13 [SONAR-EVENT-APPLIED]	54
2021/04/25 02:27:13 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:27:16 [SONAR-EVENT]	55	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"548448f9-9bbb-4b82-9901-73317eb92c6d","resourceVersion":"1919","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"dceeb962-44c7-4fd2-a763-9565683f466e\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-rjhcs","secret":{"secretName":"rabbitmq-cluster-server-token-rjhcs","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z","reason":"ContainersNotInitialized","message":"containers with incomplete status: [setup-container]"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z"}],"hostIP":"192.168.208.6","startTime":"2021-04-25T02:26:46Z","initContainerStatuses":[{"name":"setup-container","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"rabbitmq:3.8.12-management","imageID":""}],"containerStatuses":[{"name":"rabbitmq","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"rabbitmq:3.8.12-management","imageID":"","started":false}],"qosClass":"Burstable"}}
2021/04/25 02:27:16 [SONAR-EVENT-APPLIED]	55
2021/04/25 02:27:19 [SONAR-EVENT]	56	Updated	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","resourceVersion":"2036","generation":1,"creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"rabbitmq.com/createdAt":"2021-04-25T02:26:43Z"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:27:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:27:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:rabbitmq.com/createdAt":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"readyReplicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"rabbitmq-cluster-server-5f8b8665fb","updateRevision":"rabbitmq-cluster-server-5f8b8665fb","collisionCount":0}}
2021/04/25 02:27:19 [SONAR-EVENT-APPLIED]	56
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:19 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:19 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:27:20 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:20 [SONAR-EVENT]	57	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"548448f9-9bbb-4b82-9901-73317eb92c6d","resourceVersion":"1933","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"dceeb962-44c7-4fd2-a763-9565683f466e\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:47Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.6\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-rjhcs","secret":{"secretName":"rabbitmq-cluster-server-token-rjhcs","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:47Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.6","podIPs":[{"ip":"10.244.3.6"}],"startTime":"2021-04-25T02:26:46Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:26:46Z","finishedAt":"2021-04-25T02:26:47Z","containerID":"containerd://aa87653abe15316c6880bbf8d9a5c81679ac75f086f65245360c9c2e66a569a7"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://aa87653abe15316c6880bbf8d9a5c81679ac75f086f65245360c9c2e66a569a7"}],"containerStatuses":[{"name":"rabbitmq","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"rabbitmq:3.8.12-management","imageID":"","started":false}],"qosClass":"Burstable"}}
2021/04/25 02:27:20 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	18
2021/04/25 02:27:20 [SONAR-EVENT-APPLIED]	57
2021/04/25 02:27:20 [SONAR-START-RECONCILE]	rabbitmqcluster	19
2021/04/25 02:27:23 [SONAR-EVENT]	58	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","resourceVersion":"2085","generation":2,"creationTimestamp":"2021-04-25T02:26:21Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:26:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:27:19Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"True","lastTransitionTime":"2021-04-25T02:27:19Z","reason":"AllPodsAreReady"},{"type":"ClusterAvailable","status":"True","lastTransitionTime":"2021-04-25T02:27:19Z","reason":"AtLeastOneEndpointAvailable"},{"type":"NoWarnings","status":"True","lastTransitionTime":"2021-04-25T02:27:19Z","reason":"NoWarnings"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-25T02:26:22Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"rabbitmq-cluster","namespace":"default"}}}}
2021/04/25 02:27:23 [SONAR-EVENT-APPLIED]	58
2021/04/25 02:27:23 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:27:26 [SONAR-EVENT]	59	Updated	statefulset	{"metadata":{"name":"rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","resourceVersion":"2091","generation":1,"creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:27:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-25T02:27:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"readyReplicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"rabbitmq-cluster-server-5f8b8665fb","updateRevision":"rabbitmq-cluster-server-5f8b8665fb","collisionCount":0}}
2021/04/25 02:27:26 [SONAR-EVENT-APPLIED]	59
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:26 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:26 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:26 [SONAR-EVENT]	60	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"548448f9-9bbb-4b82-9901-73317eb92c6d","resourceVersion":"1943","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"dceeb962-44c7-4fd2-a763-9565683f466e\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.6\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-rjhcs","secret":{"secretName":"rabbitmq-cluster-server-token-rjhcs","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:47Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.6","podIPs":[{"ip":"10.244.3.6"}],"startTime":"2021-04-25T02:26:46Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:26:46Z","finishedAt":"2021-04-25T02:26:47Z","containerID":"containerd://aa87653abe15316c6880bbf8d9a5c81679ac75f086f65245360c9c2e66a569a7"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://aa87653abe15316c6880bbf8d9a5c81679ac75f086f65245360c9c2e66a569a7"}],"containerStatuses":[{"name":"rabbitmq","state":{"running":{"startedAt":"2021-04-25T02:26:47Z"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://92698a96c7b9f93b2e3d01d5a826950ac04b362c408f4ee80d4f1bb786906043","started":true}],"qosClass":"Burstable"}}
2021/04/25 02:27:26 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	19
2021/04/25 02:27:26 [SONAR-EVENT-APPLIED]	60
2021/04/25 02:27:26 [SONAR-START-RECONCILE]	rabbitmqcluster	20
2021/04/25 02:27:29 [SONAR-EVENT]	61	Updated	rabbitmqcluster	{"metadata":{"name":"rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/rabbitmq-cluster","uid":"ffdcc3d3-3ef5-40f3-bd10-4f8e81d727fb","resourceVersion":"2092","generation":2,"creationTimestamp":"2021-04-25T02:26:21Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:26:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-25T02:27:20Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"True","lastTransitionTime":"2021-04-25T02:27:19Z","reason":"AllPodsAreReady"},{"type":"ClusterAvailable","status":"True","lastTransitionTime":"2021-04-25T02:27:19Z","reason":"AtLeastOneEndpointAvailable"},{"type":"NoWarnings","status":"True","lastTransitionTime":"2021-04-25T02:27:19Z","reason":"NoWarnings"},{"type":"ReconcileSuccess","status":"True","lastTransitionTime":"2021-04-25T02:27:20Z","reason":"Success","message":"Finish reconciling"}],"defaultUser":{"secretReference":{"name":"rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"rabbitmq-cluster","namespace":"default"}}}}
2021/04/25 02:27:29 [SONAR-EVENT-APPLIED]	61
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:27:29 [SONAR-EVENT]	62	Updated	pod	{"metadata":{"name":"rabbitmq-cluster-server-0","generateName":"rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/rabbitmq-cluster-server-0","uid":"548448f9-9bbb-4b82-9901-73317eb92c6d","resourceVersion":"2032","creationTimestamp":"2021-04-25T02:26:43Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"rabbitmq-cluster-server-5f8b8665fb","statefulset.kubernetes.io/pod-name":"rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"rabbitmq-cluster-server","uid":"dceeb962-44c7-4fd2-a763-9565683f466e","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:26:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"dceeb962-44c7-4fd2-a763-9565683f466e\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-25T02:27:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.6\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"rabbitmq-cluster-server-token-rjhcs","secret":{"secretName":"rabbitmq-cluster-server-token-rjhcs","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"rabbitmq-cluster-server-token-rjhcs","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-cluster-server","serviceAccount":"rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"rabbitmq-cluster-server-0","subdomain":"rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:47Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:27:07Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:27:07Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-25T02:26:46Z"}],"hostIP":"192.168.208.6","podIP":"10.244.3.6","podIPs":[{"ip":"10.244.3.6"}],"startTime":"2021-04-25T02:26:46Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-25T02:26:46Z","finishedAt":"2021-04-25T02:26:47Z","containerID":"containerd://aa87653abe15316c6880bbf8d9a5c81679ac75f086f65245360c9c2e66a569a7"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://aa87653abe15316c6880bbf8d9a5c81679ac75f086f65245360c9c2e66a569a7"}],"containerStatuses":[{"name":"rabbitmq","state":{"running":{"startedAt":"2021-04-25T02:26:47Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://92698a96c7b9f93b2e3d01d5a826950ac04b362c408f4ee80d4f1bb786906043","started":true}],"qosClass":"Burstable"}}
2021/04/25 02:27:29 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	20
2021/04/25 02:27:29 [SONAR-START-RECONCILE]	rabbitmqcluster	21
2021/04/25 02:27:29 [SONAR-EVENT-APPLIED]	62
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	rabbitmq-cluster	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	endpoints	default	rabbitmq-cluster	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster-nodes	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	service	default	rabbitmq-cluster	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-erlang-cookie	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	secret	default	rabbitmq-cluster-default-user	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	serviceaccount	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	role	default	rabbitmq-cluster-peer-discovery	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	rolebinding	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-SIDE-EFFECT]	Update	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-server-conf	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	statefulset	default	rabbitmq-cluster-server	NoError
2021/04/25 02:27:29 [SONAR-CACHE-READ]	Get	configmap	default	rabbitmq-cluster-plugins-conf	NoError
2021/04/25 02:27:29 no event happening
2021/04/25 02:27:29 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	21
2021/04/25 02:27:32 no event happening
2021/04/25 02:27:35 no event happening
2021/04/25 02:27:38 no event happening
2021/04/25 02:27:41 no event happening
2021/04/25 02:27:44 no event happening
2021/04/25 02:27:47 no event happening
2021/04/25 02:27:50 no event happening
2021/04/25 02:27:53 no event happening
2021/04/25 02:27:56 no event happening
2021/04/25 02:27:59 no event happening
