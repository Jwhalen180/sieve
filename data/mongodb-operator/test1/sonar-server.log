2021/04/09 01:30:39 registering rpc server...
2021/04/09 01:30:39 config:
map[crds:[perconaservermongodb perconaservermongodbbackup perconaservermongodbrestore] mode:learn]
2021/04/09 01:30:39 learn
2021/04/09 01:30:39 start learnServer...
2021/04/09 01:30:39 setting up connection...
2021/04/09 01:30:42 no event happening
2021/04/09 01:30:45 no event happening
2021/04/09 01:30:48 no event happening
2021/04/09 01:30:51 no event happening
2021/04/09 01:30:54 no event happening
2021/04/09 01:30:57 no event happening
2021/04/09 01:31:00 no event happening
2021/04/09 01:31:03 no event happening
2021/04/09 01:31:06 no event happening
2021/04/09 01:31:09 no event happening
2021/04/09 01:31:12 no event happening
2021/04/09 01:31:15 no event happening
2021/04/09 01:31:18 no event happening
2021/04/09 01:31:21 no event happening
2021/04/09 01:31:24 no event happening
2021/04/09 01:31:27 no event happening
2021/04/09 01:31:30 no event happening
2021/04/09 01:31:33 no event happening
2021/04/09 01:31:36 no event happening
2021/04/09 01:31:39 no event happening
2021/04/09 01:31:42 no event happening
2021/04/09 01:31:45 no event happening
2021/04/09 01:31:48 no event happening
2021/04/09 01:31:51 no event happening
2021/04/09 01:31:54 no event happening
2021/04/09 01:31:57 no event happening
2021/04/09 01:32:00 no event happening
2021/04/09 01:32:03 no event happening
2021/04/09 01:32:06 no event happening
2021/04/09 01:32:09 no event happening
2021/04/09 01:32:12 no event happening
2021/04/09 01:32:15 no event happening
2021/04/09 01:32:18 no event happening
2021/04/09 01:32:21 no event happening
2021/04/09 01:32:24 no event happening
2021/04/09 01:32:27 no event happening
2021/04/09 01:32:30 no event happening
2021/04/09 01:32:33 no event happening
2021/04/09 01:32:37 no event happening
2021/04/09 01:32:40 [SONAR-EVENT]	0	Added	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","resourceVersion":"1343","generation":1,"creationTimestamp":"2021-04-09T01:32:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:32:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:allowUnsafeConfigurations":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:restartOnFailure":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:hostPort":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{},"f:redactClientLogData":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:directoryForIndexes":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:enabled":{},"f:image":{},"f:serverHost":{}},"f:replsets":{},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{}}
2021/04/09 01:32:40 [SONAR-START-RECONCILE]	psmdb-controller	0
2021/04/09 01:32:40 [SONAR-CACHE-READ]	Get	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:32:40 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:32:40 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:32:41 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NotFound
2021/04/09 01:32:41 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:32:41 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:32:41 [SONAR-CACHE-READ]	Get	secret	default	internal-sonar-mongodb-cluster-users	NotFound
2021/04/09 01:32:41 [SONAR-SIDE-EFFECT]	Create	secret	default	internal-sonar-mongodb-cluster-users	NoError
2021/04/09 01:32:41 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:32:41 [SONAR-SIDE-EFFECT]	Update	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:32:44 [SONAR-EVENT]	1	Updated	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","resourceVersion":"1353","generation":2,"creationTimestamp":"2021-04-09T01:32:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:32:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:image":{},"f:serverHost":{}},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:32:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:clusterServiceDNSSuffix":{},"f:replsets":{},"f:runUid":{},"f:secrets":{"f:ssl":{},"f:sslInternal":{}},"f:sharding":{"f:configsvrReplSet":{"f:arbiter":{".":{},"f:enabled":{},"f:size":{}},"f:expose":{".":{},"f:enabled":{}},"f:name":{}},"f:mongos":{"f:expose":{"f:enabled":{}}}}},"f:status":{}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","runUid":1001,"mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}}}},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"failureThreshold":8},"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"failureThreshold":4,"startupDelaySeconds":7200},"podSecurityContext":{"fsGroup":1001},"containerSecurityContext":{"runAsUser":1001,"runAsNonRoot":true},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"serviceAccountName":"default","podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets","ssl":"sonar-mongodb-cluster-ssl","sslInternal":"sonar-mongodb-cluster-ssl-internal"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"clusterServiceDNSSuffix":"svc.cluster.local","sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{}}
2021/04/09 01:32:44 [SONAR-CACHE-READ]	Get	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:32:45 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NotFound
2021/04/09 01:32:45 [SONAR-SIDE-EFFECT]	Create	issuer	default	sonar-mongodb-cluster-psmdb-ca	
2021/04/09 01:32:45 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:32:45 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-ssl-internal	NoError
2021/04/09 01:32:48 [SONAR-EVENT]	2	Updated	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","resourceVersion":"1365","generation":2,"creationTimestamp":"2021-04-09T01:32:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:32:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:image":{},"f:serverHost":{}},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:32:44Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:clusterServiceDNSSuffix":{},"f:replsets":{},"f:runUid":{},"f:secrets":{"f:ssl":{},"f:sslInternal":{}},"f:sharding":{"f:configsvrReplSet":{"f:arbiter":{".":{},"f:enabled":{},"f:size":{}},"f:expose":{".":{},"f:enabled":{}},"f:name":{}},"f:mongos":{"f:expose":{"f:enabled":{}}}}},"f:status":{".":{},"f:backupVersion":{},"f:mongoImage":{},"f:mongoVersion":{},"f:pmmVersion":{}}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","runUid":1001,"mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}}}},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"failureThreshold":8},"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"failureThreshold":4,"startupDelaySeconds":7200},"podSecurityContext":{"fsGroup":1001},"containerSecurityContext":{"runAsUser":1001,"runAsNonRoot":true},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"serviceAccountName":"default","podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets","ssl":"sonar-mongodb-cluster-ssl","sslInternal":"sonar-mongodb-cluster-ssl-internal"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"clusterServiceDNSSuffix":"svc.cluster.local","sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{"mongoVersion":"4.4.3-5","mongoImage":"percona/percona-server-mongodb:4.4.3-5","backupVersion":"1.4.1","pmmVersion":"2.12.0"}}
2021/04/09 01:32:51 [SONAR-EVENT]	3	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl","uid":"1a0f4315-c6dd-48b6-be8d-4f0bf7ed65bf","resourceVersion":"1371","creationTimestamp":"2021-04-09T01:32:45Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:45Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lRVTArdmVEdW5UazJIYTJhUGxmV0l0akFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16STBOVm9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBU01SQXdEZ1lEVlFRS0V3ZFNiMjkwSUVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXpNNHh6bERCdEtzdlBwVGhNUkZMSnpsTFV2T3NMUUVRMU80bXJCMEsrNnl5c1FES2J4ZkkKMkNoWHVvTkNyeDFOcS8xZlc1MEl1RGVDTDZWWHN1SFM3R0U2WnlUWEdqRGxsVG16K0QvY0Z3d1Y0N3h4UnR1QQpsVVpEekpnN2JtVlFZc1BldUJiamd6SVZhRm1FNzRTRmJCbFlwclFmeGlRaDcrMTd1MWJBcDNZVUpIcWNSRTlFCkxoUFpOU3RYcktrbzhjaHV4WVF2VGFsNENLU0xGck5HbFIrNXZhbUswVVp0WW85Z2l2dElKK09vaXpaYk41Q0YKSW5qdkJINkM3dXU5Q1dPNXQvaTFFV2dkaDR0Q0ROd2IwSW9MZlV6MzRTQk54V3N0cWpWSHM2LzdPN1cvQjVCdQo4WmI2bU90UElqTXMvWlNGZjJRZkttYWV5NFFldlRNbW13SURBUUFCbzB3d1NqQU9CZ05WSFE4QkFmOEVCQU1DCkFpUXdKd1lEVlIwbEJDQXdIZ1lJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQXpBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQWI1TGgwbUJ3N1h2SFRmb3dVNUkxSgpTdWJYQ2tJRDUrdjJaUzJpM2tOMG5ZeGorbnRsMnNwN2dYWWZkVUFvVTR1dnZQMEM2SWhIZFdicG5XSy8wdXd0ClZGUzVVTWFRMi9GemZLR1VoODQrOVk2THIwSVRLN0huUE5qWEtPbE5EbGRnWUY2LzZKaUYwbFFZNXhiY3RncTQKUnh4RnM1ekM3ZjJtK2pPSUZ4QWpVYXg0b3NFbG5idG9QaDlXbGRkM1cxZkZIZEhsbFFiQnNaQVNXUVNqbThYWQo4Z1BHOXNZRjhmSDZUZmVEcVV5K2tGODlTclF5emFtKzZNZGU1MG81c0Y2aFBUWUNGNU9GTTlUWUF3bFY2dFAzCmdEUkVaYU9uSktFdS9ZeGs1ZTRucGRmcUJYczRxeU5IUGpYTU8zU3p3OHdpb0w1S3M2UEJ1b1EzYWlaS01KaHAKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY1RENDQk15Z0F3SUJBZ0lSQVBaK1o2Zkkwb1lWYldDdmVyMXZveUV3RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTXlORFZhR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VERU9NQXdHQTFVRUNoTUZVRk5OUkVJd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3CmdnRUtBb0lCQVFEeGs4OU1rMWpHRUtjejFza21WUHMvYitvcEZ6N0RwOUI0QUxSZkxuRTB4a1NQcHFwdDdiOHoKTjE1N3NpbFk2T1MzTk16MFhmcEU1ditpbkdGVCtZMGRYRVJzV25OQUppcXV0ajBncFdNYThEbi81aFh3R1hpZgp4ZkVCR24ybjFaTENMVnFocnFNUmZ6R3dqclRnTUZBdTB3S3ByMG50QW5iR2xxZTRyTURLc25tY1ZlYmROT2YwCnJyVVRSUmM2MmdaaVBjV2NEUkVUcXFoejI4RmNUeEUwQ2hDVkxVeTF6aXZVQVB4ckYwRlpGSzlscjllRVJZZFgKODZIeFFRZzIyNHBvM0daaXAzZEoyZEhpdUtvaHArdG9lWTl4RFA0eC9OSGhUb2d1K2JMRkdpV1JOYldqbnZ1RApKMnVkTmpPZWFZMXF6K2djRC9qT1FxUmM1SkxFSG5TekFnTUJBQUdqZ2dNek1JSURMekFPQmdOVkhROEJBZjhFCkJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUMKTUFBd2dnTHVCZ05WSFJFRWdnTGxNSUlDNFlJSmJHOWpZV3hvYjNOMGdobHpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdnaUZ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NNM052CmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmgKYklJYktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0Y25Nd2dpTXFMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkSUkxS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRjbk13CkxtUmxabUYxYkhRdWMzWmpMbU5zZFhOMFpYSXViRzlqWVd5Q0hITnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmwKY2kxdGIyNW5iM09DSkhOdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJMgpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFcxdmJtZHZjeTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5CkxteHZZMkZzZ2g0cUxuTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzT0NKaW91YzI5dVlYSXQKYlc5dVoyOWtZaTFqYkhWemRHVnlMVzF2Ym1kdmN5NWtaV1poZFd4MGdqZ3FMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYklJWmMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVo0SWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWsKWldaaGRXeDBnak56YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIUXVjM1pqTG1OcwpkWE4wWlhJdWJHOWpZV3lDR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMV05tWjRJaktpNXpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWoKYkhWemRHVnlMV05tWnk1a1pXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQkFRQnFzRXRqdGUwZTFIaGI2K09VcVowUlVvRkh2RnhyRWhuRURFVlE1bUZ1b09keUxJM0VlWkNYCmtxcjh0NjdGRnN6YVhaTklud0ZrN0ZaUjJOUkdIMXRabGFZV2pBdlYvMlFyakcrR3hrNlRwWXRXTXJoUE1GR3kKRm12YWQxYXdCRnNxa2xrQkZyL1NmOFk4NjhUcTZqOEVwbWFtZlJuKzc1RGtOaUhRa1ZjaHAwbm10Rm96MVZGZgoyTU5vQUtBRWFLOGRISmJuSFgvT3NhR2lIMUl2Q0Q5OGFkTmRrdkJXdFV4SXNlaGI1YWJVeVRrWEU3TkN1NklBCnRhdlFlNFVhY1A3WkdoNzJoY0tVWTE3QW5uQlAyUTFYTVlIUzNmU3JiZGpOR1AvQlhhd0RwL0dvV3o3bXpYYVgKWStnZm1jR0JnSUZFdFdCVW9tNkpZdWZCU3p2bzZyZnMKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBOFpQUFRKTll4aENuTTliSkpsVDdQMi9xS1JjK3c2ZlFlQUMwWHk1eE5NWkVqNmFxCmJlMi9NemRlZTdJcFdPamt0elRNOUYzNlJPYi9vcHhoVS9tTkhWeEViRnB6UUNZcXJyWTlJS1ZqR3ZBNS8rWVYKOEJsNG44WHhBUnA5cDlXU3dpMWFvYTZqRVg4eHNJNjA0REJRTHRNQ3FhOUo3UUoyeHBhbnVLekF5cko1bkZYbQozVFRuOUs2MUUwVVhPdG9HWWozRm5BMFJFNnFvYzl2QlhFOFJOQW9RbFMxTXRjNHIxQUQ4YXhkQldSU3ZaYS9YCmhFV0hWL09oOFVFSU50dUthTnhtWXFkM1NkblI0cmlxSWFmcmFIbVBjUXorTWZ6UjRVNklMdm15eFJvbGtUVzEKbzU3N2d5ZHJuVFl6bm1tTmFzL29IQS80emtLa1hPU1N4QjUwc3dJREFRQUJBb0lCQUJ2NFpUUVVpMTdEWnRpVgpzY3lDWW1UQjdIYTlma0xoRno0TnR0U2VaL1VZVDYvaU9ERnFLWTBnaUF3Q1lNOHVoK3krYkV5TzVQODlUN1BnCkwxU3R2Q3orRmQ0Rnl2cE9jUHF4bHZwRXEramVqNWlWWjB6WlppSDVwU0hmazFUdllZS2lCYkJhcS83R24xWTEKNzdOVlpMTkhNek82Vy9EWkxDOXFHaGxEeHo2d21kVjFaUUkzU0haMytDZE1QV1pWWUhKbDlYRWlrQk9mcWMrVQp3WGhPVFBPOUpxNC9JVysyT0xXOUxOa2FyMW01a0NaSmNHSm85TFJxSU9NVVkzelRLYjRDa09OL1ZaM29XdmhyCkJPRkloLzhBUEtyS3dMeXQ3TkN6QkZzRFNxeVVrSkVMaG94dUF6ejFDS1prdXg3dWJ2MjZXc0FTdnhjcjJBWFoKbVdaQkhjRUNnWUVBK2lLc21jRnRQVkFLdlBzZFJYTUQrSnZwZ0J4MGQ2M3NLdUNrQ0JSaFJkd1FXWFUyMS9kUQoxWmhoZk51Zi92aWt4VW1wUmNlMitzVmpvMXF5Z2o3a1h4VWVYMms4Zm5kQ3EwRXVOTDFEeXF4Y3NuNkQ2TGZNCjk2cXBhSSszb2puTHVyTHhJZ2hWYndZYUtqNmt2Z3Z0a1FHOHdDZ08xN3F0Vmh0RlhmQWtueGtDZ1lFQTl6M0YKQklUQzJsczJranRkUEhCdURHN003QTZra2FHcnJ5Q1BBRHFUbXZaNGZKT3dTdkxjbU9aRlpqOTAwSm1nQjBPRApMRUpoeG80RGQ3dDlidG5xelZ6R0JzVU12VVNPZkFjNTJZUEpicDNnU0NGaDl0emhaV1NyS1NLVGhIaHdZdG9VCjBXcElFMWFVOWZPa0tvMHJPSmU0MjhKdFl5TWpiMldaU3p3U2g2c0NnWUFlWFo4K2V6RGJ4Si9KR1dNUVQwb28KSUNWVW5CKzNkN0czOHRWMjlhSnBiTEcvYW05aUFIQWJ2Z2YzdEdIVC9qTmlqL0t3dWZJSXQzWEZHdm1ZdmpIVApLU2txeEFmSUFvcGhaK1JJR3NIa0ZOQ2NDcWZRMUo5WllhcDNPeHM3NG5CTkZmUVlBWkw5aTJ3WnZNa2JHUytaCjd2QVBFODNaZXB3WVcrOHIzRDlWNFFLQmdRQ3lIOTZCa3VTUFRJZlVjdENKYXJiZVhqVmxIR2VVUkZYY3BpaGcKa2RNbUljeE1kRnJlcEhvcDdqeXhuYVliWTVMWHFOd29WdXI2a2ZZTm5SYVJkbzZqeGVNbG5YSEFLbFE5SnplVwpia3dCVmR6d0dwenByZGoxbzhGc3NXeDJWQThrS05vMnhjdUhveWxPeVduTS9rZlZUZm53MmZMVktjdXR4aFRiCkR6eUtZUUtCZ1FEb1NqOEF5eU1PbHJDY200Q25UdXF3Y0dwNzZmTExTQUhDMXJCek1SczljN3RWMFVVcFF1Y1UKVXkrVFY4ek91eUM1NmFBZnNYdjBIVzh5eVY4ZTZPQlZkR2xPWU03VnF2dHJkNXJ4MDRpVisrdE9kalJzOHI3dwpOWHF4NmhERjRnbm1CbHFTZElXaXptZCtrS1U2ZGJuVFpudFEvVEcwSEZ4QWxPaHg2azdYTVE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:32:51 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-keyfile	NotFound
2021/04/09 01:32:51 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-mongodb-keyfile	NoError
2021/04/09 01:32:54 [SONAR-EVENT]	4	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl-internal","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl-internal","uid":"279b4fff-f5e7-4d5e-887d-ab1542cfa818","resourceVersion":"1372","creationTimestamp":"2021-04-09T01:32:45Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:45Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvVENDQWVXZ0F3SUJBZ0lSQU5TS3hGdFYzSGRvR2NQV0NtMDJPK2t3RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTXlORFZhR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VqRVFNQTRHQTFVRUNoTUhVbTl2ZENCRFFUQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQCkFEQ0NBUW9DZ2dFQkFMODQ0YUFFdmJJVUUyZE8waTU4eUdRS292dEYralQ3SEdGVytXQXJOWkxrL0Y5dUNyUGEKek5xYWRvMDhhU09mcWw5cGVMWkZRWTJvUmdmUEkxSFkrUlNnUGZxRGdKMFdIQml1aHRtUThOcC9BalRQTlJhegoyQWZQamlSZDhrcHlERlVldk1rNnprZ01SN0d6V2RrbDZxMWFaV1RjMjYzMmVMZXZLdDhoaG1UOENnQjVRdWxTCmR2a0M1NkYvcGRKVFoxNm1hWlFFSlJvOGRQaUFLYjhUTjdwa3owbFlZUjhtaHZQTmpKSUNLQnorQk9KVVE5WEMKbHpEaWFMQjRRQ0F6NThndkk2Yk1oMWJhbk9qdGxKYlZzNkRwaVlhekNFMEZJK0UzajFmR2VQTlE2OGVtVmpYZwpGcnRwNVZyMGJHVEdIRkpZTXF4cWxGSmRaZWRMeFJqTU0yMENBd0VBQWFOTU1Fb3dEZ1lEVlIwUEFRSC9CQVFECkFnSWtNQ2NHQTFVZEpRUWdNQjRHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdNd0R3WUQKVlIwVEFRSC9CQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFFTnpjajRUakJjNXpXM29BWVQvYwpMcGlYVklGdmhJNlVEcmRZTWFUaCtRUEp6NUI1NTFDNWppdnhVWnd4S1BQWXJJU2FNVDVySFNuc21YYmNVSEt4CndNQ1FKTkphUEZOaDBWWUpwRVlvc3VrUy9YM21Sb0ZINDRhaTlYQkh5ckZIZThJRGdHQnVIZXpGTXF5UEVkRlQKYlFpOStDSmZaSDVWNjhuV2M4MmwwV1ZjRU0rc3R4YWNBV0RHdnlNRTF3cVFmeWhuYnBFL3JlcGoxTlp3bHlVSAo3ZDZTemY5cGNBQzJqbnpMNklxOS9OMXo1MFV0UFpmU2w2Z0pZeEJWV3Ftak40WXl6U3JCZU9kWVl0bktYMzF5Cm5ZVFhJVkZlRk1TTU9sNzFyYThxZ2FWNnczeXpPWTF4am0wY3paN290UWtXMmZTblY0cTJZQVVub0g2Z1ltM3IKN3c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY0akNDQk1xZ0F3SUJBZ0lQZjUvdW1FV3BkMUZkR0xRcGQzai9NQTBHQ1NxR1NJYjNEUUVCQ3dVQU1CSXgKRURBT0JnTlZCQW9UQjFKdmIzUWdRMEV3SUJjTk1qRXdOREE1TURFek1qUTFXaGdQT1RrNU9URXlNekV5TXpVNQpOVGxhTUJBeERqQU1CZ05WQkFvVEJWQlRUVVJDTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCCkNnS0NBUUVBeGxnaGpxOU9UVWZGdkVDZjR6c0dEaWxSZjk4djE3a3RUdXVINGJ0NFU3amNKbE03d3dwR2hZVSsKdW5ZZHZLOW5qMi9lbGdHeU9IY3JjcXVRUFJUNzMvWFdMM0xtSVdZNkxmQlNYQmIzMHpvZ0xpQ2h6TjNMUmxjUQpXWkpTK2Vvb2ppWkkzQ25FT2hwN0pBbCtEc2tyLzBmTmhlQm1LSkQzYlc3bGF1cDB6Rm5FbSt3Y2xpdkZyMmxkCmQzOUd5Y1F5ejJITjFNcENGcmNHcjUrcmJ1MUd2UHY2ZkVBR1Z3K0JHZlNCMS94RDFzRXBPdGJ0RXFiQWFOWVAKakIyMW1wQWM5dWdzSXBsVHRLRFVPZmowNW9PdC91NGRFTTJBelBiVlVBNHRjdlBDUTdDVjI3MmQyclltbk9aaAphLzdRaHhIdHlMNStFYzZ3RVh5dlFKSGUwdW1mZ3dJREFRQUJvNElETXpDQ0F5OHdEZ1lEVlIwUEFRSC9CQVFECkFnV2dNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWpBTUJnTlZIUk1CQWY4RUFqQUEKTUlJQzdnWURWUjBSQklJQzVUQ0NBdUdDQ1d4dlkyRnNhRzl6ZElJWmMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWegpkR1Z5TFhKek1JSWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFhKek1DNWtaV1poZFd4MGdqTnpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIUXVjM1pqTG1Oc2RYTjBaWEl1Ykc5allXeUMKR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMWEp6TUlJaktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWpiSFZ6ZEdWeUxYSnpNQzVrClpXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzZ2h4emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXQKYlc5dVoyOXpnaVJ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGJXOXVaMjl6TG1SbFptRjFiSFNDTm5OdgpibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzTXVaR1ZtWVhWc2RDNXpkbU11WTJ4MWMzUmxjaTVzCmIyTmhiSUllS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRiVzl1WjI5emdpWXFMbk52Ym1GeUxXMXYKYm1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJNEtpNXpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGJXOXVaMjl6TG1SbFptRjFiSFF1YzNaakxtTnNkWE4wWlhJdWJHOWpZV3lDR1hOdmJtRnlMVzF2CmJtZHZaR0l0WTJ4MWMzUmxjaTFqWm1lQ0lYTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTFqWm1jdVpHVm0KWVhWc2RJSXpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWtaV1poZFd4MExuTjJZeTVqYkhWegpkR1Z5TG14dlkyRnNnaHNxTG5OdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMWpabWVDSXlvdWMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWtaV1poZFd4MGdqVXFMbk52Ym1GeUxXMXZibWR2WkdJdFkyeDEKYzNSbGNpMWpabWN1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmhiREFOQmdrcWhraUc5dzBCQVFzRgpBQU9DQVFFQXNTamVWa2tPeFJsNnZ5cDJzS0RxS2VXRHVQVWJTRVJFZUNiU2NhQUlFUUI5RkNQRzJGQ0N5cjVZCnBiZ3dhYmJsck1kTmxmaUhPRDI4Q09jYzlqczNqNGphd25vYXI1aE93Qi96cTJZamd3Nld4SkpISmREazlQWjUKNzB3bEVlSGoyOVM5WjZJQ1VKY285RlVYRm4vckxKUVRKTml1VDhCN0grUllUdm5wNkRON1p4UnJoMFc3UXNaQQpWUmxZbkZUdFRTWk55bVlvSkd2Y2xZUVVoVDF2QmhaNnVXRHpmTHM3NjZCU081dS9CN2hzNkp3b2J2MlFwekRVCkV6UVBjbUNJdXNFSUtPMEtBaE1meTJwN0w4Q0dWelpDMldndG9sdUU5REJ5ZG40TjRGeDBlZUlzZVVzazJ3aGMKK1FHYkNRdURya3ZmUVc5amxzd0RwcFhXSS9oYXVBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeGxnaGpxOU9UVWZGdkVDZjR6c0dEaWxSZjk4djE3a3RUdXVINGJ0NFU3amNKbE03Cnd3cEdoWVUrdW5ZZHZLOW5qMi9lbGdHeU9IY3JjcXVRUFJUNzMvWFdMM0xtSVdZNkxmQlNYQmIzMHpvZ0xpQ2gKek4zTFJsY1FXWkpTK2Vvb2ppWkkzQ25FT2hwN0pBbCtEc2tyLzBmTmhlQm1LSkQzYlc3bGF1cDB6Rm5FbSt3YwpsaXZGcjJsZGQzOUd5Y1F5ejJITjFNcENGcmNHcjUrcmJ1MUd2UHY2ZkVBR1Z3K0JHZlNCMS94RDFzRXBPdGJ0CkVxYkFhTllQakIyMW1wQWM5dWdzSXBsVHRLRFVPZmowNW9PdC91NGRFTTJBelBiVlVBNHRjdlBDUTdDVjI3MmQKMnJZbW5PWmhhLzdRaHhIdHlMNStFYzZ3RVh5dlFKSGUwdW1mZ3dJREFRQUJBb0lCQVFDRFpXOFZyMTBZSlN3QgpnbTVwZ25pSWVTYmNwMlp5YXVKeEhlZHV5MXJ6Vzh1OE4vZW5SZTlpRk50eGV6NUgrWXVKb25xNnRYVHpvejdOClFJclZiRWxRSFBRL2lzYVo2YmN4Sjd2bjllOUhwNElhRE5RamUrdG1OZGRHLzRDb3YwOE9uSjQzL0JOYXlxQTUKUjNDVEt3SlNvNmFyd2ZUcmV0M3ZTVUFDakQvRC82bUFUZmVBYzhXWHB6c0k2cEtvaFd0U2Y3VmxVc0ZIQ2JBVgphVVZQQmJrVlhtVnZKallQWDBNZ3FWMmcvWWc4eTliU2NaZ21PRDI2Tlh6OFYvaTdiNFowaUk5NTNpZzh3ZDB6CjNNTWtydFREdXRsZEZ6N1d2bVJ3UjFqSW9HTkhtVHFqV2ozQVZEcXU2QUxvTTIyd25COGZMSGt2enRML2k3d20KL05jNGNiV0JBb0dCQU9UQ0pKTnRsYi8vY0xrem1BVXdMcUJETnJpS2NQRkxBMHY5MVNtWlZUTVp1V2VEelozUgpjL2RoTXZkNCs0aG5kOVF3Q1o1Zm0zNXlZUWJCY0JlRXppaEpDVWhaUWFFZzhxaWdGZnYxR1Q4YmtHSE0zcmdzCmVLVUZRSVdvYlR0Ly9MMEt3Rk5KTGE5TWRuUldHV01MUkdmOTFJdnAwV3VRekp4V04rUk5aMitwQW9HQkFOMzIKeXdjUm1CdjZ0YkI3V0JITUFweEQ3a2VYd2FyVjY3b2lQWEs4MjdoWHNiMnMyMGwvVFdnNitGMHF0OWhLTzVWOQpHS0FHTklKdWlYYmhHa1ZWMEttQ3p4Qk5WNjltTWRDR3VTOHVpZGREZ1Fod09TWnFjMTRhaGtkVFVPcWdjRlROCnFKeWh2NWVEamljQ3pUR2xjZEtkbTZPWElCeGVpd1c5RDVtQmNrRkxBb0dCQU5FR3hUMGhhVEJqVExFdC83N2QKNC96MDdjOTZVUEZxeGJ4dVdKVUdVdCs2cGJ0OHFDbUk5aG9aYXVUT1c2aXNRc1pVanJWMFR6VWZkcUVocURjVgpWdnRnb1diR2lEMmZTWnZqaTdNS3B1TVBZTUs4M05ZVmJMZjlNSlB3N3I3cm1CbDA5WUFrNGVYSVRJVEpGN0YwCjNqRFhzNXVWTDVMR1lQQ0pwOUNwR2RiaEFvR0FEV3BTSVE0K0xFcTkybm5KKytGaHN3SWtENjJyWmVEaUMzRHcKVjlQMFQ3TDFLaXFkWWxiUVhlRmFpMzcrZDVNZEFNNzd3d2c4K2prbUU4cE5KUzJubStjdERxWXVDNHJZcmVyRwpuSVJxamxrbEhsWnlEZEZYUWJQR3M5N2tRQm9NVUFQU0VnMXduLzZ5ZzhjV2tjNlhENHk1RUcwYzRyb1FHdnV2ClNxN1pNZnNDZ1lCRE14YWl2ZjQ3MERPUFFMT3k4MlpuLzJJRW9YQmxRcnNEdk8rM0dmTW1qRGFOeUs1cHpxY0wKaUtYZDdKaFFyUjhJK2FBcWQyVVFHNXRTZEZsbG1UV1E2dStpbjZaY3Y5bExyOWVpSHN3ZnV0OFNzbTFTN0xtRwpGalFNdEZyVFFWamdVbjFVYXBRKzlWRFBLQlJvSlkzSit5cDR3cmpRSDF4bzE4ay9yVlQ1dVE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:32:54 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-encryption-key	NotFound
2021/04/09 01:32:54 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-mongodb-encryption-key	NoError
2021/04/09 01:32:54 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:32:54 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:32:54 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-rs0	NotFound
2021/04/09 01:32:54 [SONAR-CACHE-READ]	Get	pod	default	percona-server-mongodb-operator-bf69fc874-mztc9	NoError
2021/04/09 01:32:57 [SONAR-EVENT]	5	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-mongodb-keyfile","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-mongodb-keyfile","uid":"5de11831-8930-463e-9e29-a80384eff806","resourceVersion":"1395","creationTimestamp":"2021-04-09T01:32:51Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:mongodb-key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"mongodb-key":"NVdxMSs2Q3pVdlJEdVFxdEtRVjl4V2JXRWViSFMrUVpmRkphTHdGUGJ4bzduUFAvT3hKeWliS2toditWeE9BamRtYTdKV0s5WGx0QjZCSU9hcFFQeXA4YzJQNXZ0aEFNMGZldWs1Q1NuYm8rYzNhOXRrYkJYb2RSUUdnZUlhUmlXREpkQ1g5THgvYk5aaTdtd05MTEN5eVhVZFRDNE4rdWJkMzZ6R29WSEdvd1d0M1VERHJ3eE1SRlBGK3VZR2FmNmdTQk80SkViYm9HRDFlTjNIODZ4YWlaTTBORGZSSlFwMHhIeHp0ZFpkS2UxUmtuMDJoUXZNQ0x2N21CK2VjNnZjRnl5b25mUHdETWNEQzhZK1ordmlOMXVKYjZDMjA0NFNUbDZrRlhKcUVpdFI1ZFF1VmpnU0lNMklqNzYrNDdPTDFpYk0yUFYvSXB3V3dNZ25ucmdTVEtEZVdVTmZ4aTMrVGxWV1dsQVZ5VVhzS0t4d1RlSHhQQmpSSDNtNS90cVVrWWhnbWM5MFkzb0t4dTV0Q3pCdVp1WE5wWW5KSlEvMm1aSmhDZFhocXBNOVU3OU9GQnNyalRMckVJK3lrenYwRVJUdm0xMW85aGRORHZERFZnV1RZdHIzb2hyTlFnZitJV3k3SmlFZGJ0UlBIeVk5bDRWYnlZUHJ0bGZ0ZnhyenpkWnFIbE96alJYRkdENVNCMEJtWU92ZS8zaDUxSmVaUVpJdzNyY000N3ArTE5KQW51N1g2TDVuWFJEa0E0bzlrNnI0NVRvc0dIRlhEUW1mdjUzS096UDhhM2FyRDNubXBld1RtVDZpUFBKUHQvcy9HNEdKcjdSZFg4M1EvZDF0SVBFOWJaYi9NQ243bnR2MnlJTXkvcUdKOWhKbG1yZ3l2OS9hejR6NmFlb0JxMTE2Qm9UZWQzbmJpT3ZKYTdacERiYVJpd1BZQUNFYjZvcnlHTFR5Y0VDTEoyaDV5S3djSzUycjB6RTJJU1BseXllYTI4djBveVVkYngrQzBhdWJ0UzdpZys5eDFGRHBiTXovM3c2cjdhaThmakxGZkF6czR1TCs0cXlSUjRiTUZBVEVvb1p1SnlTTm1XM2g3dVdnYklSRHJQUitrSkprdmJYUFdJK3luRGxHa0hYUk1UaWR4aEp4TWVLak5NTys3VCtkZ2EvL0RzV2IyOHlibEp6Ulc0cFUwd3JTWGFDYWtTOW9lajVMMUtrbktTeW5FaUtTdUlxU0RlejMyU3JMNktJb09YYlZkQjlueU9WTTBOb3FEcXVJL2tIbVcvcWRGbGpSQWxXRTVoOXJKZzQ5V1pkMWRpbnQya2N5ZHpHRXlzaVBaWEFEWmpSTkNiY2JMRA=="},"type":"Opaque"}
2021/04/09 01:32:57 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:32:57 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl-internal	NoError
2021/04/09 01:32:57 [SONAR-SIDE-EFFECT]	Create	statefulset	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:32:57 [SONAR-SIDE-EFFECT]	Delete	statefulset	default	sonar-mongodb-cluster-rs0-arbiter	NotFound
2021/04/09 01:32:58 [SONAR-CACHE-READ]	Get	service	default	sonar-mongodb-cluster-rs0	NotFound
2021/04/09 01:32:58 [SONAR-SIDE-EFFECT]	Create	service	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:32:58 [SONAR-CACHE-READ]	Get	secret	default	internal-sonar-mongodb-cluster-users	NoError
2021/04/09 01:32:58 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:33:00 [SONAR-SIDE-EFFECT]	Delete	deployment	default	sonar-mongodb-cluster-mongos	NotFound
2021/04/09 01:33:00 [SONAR-SIDE-EFFECT]	Delete	service	default	sonar-mongodb-cluster-mongos	NotFound
2021/04/09 01:33:00 [SONAR-SIDE-EFFECT]	Delete	statefulset	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:33:03 [SONAR-EVENT]	6	Added	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","resourceVersion":"1419","generation":1,"creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"replicas":0}}
2021/04/09 01:33:06 [SONAR-EVENT]	7	Added	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1422","creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","qosClass":"Guaranteed"}}
2021/04/09 01:33:09 [SONAR-EVENT]	8	Added	service	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-mongodb-cluster-rs0","uid":"ef9654f7-b435-48f6-b2d8-2752e8ef9aeb","resourceVersion":"1433","creationTimestamp":"2021-04-09T01:32:58Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":27017,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"mongodb","protocol":"TCP","port":27017,"targetPort":27017}],"selector":{"app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/09 01:33:09 [SONAR-CACHE-READ]	Get	service	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:33:12 [SONAR-EVENT]	9	Updated	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","resourceVersion":"1425","generation":1,"creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","updateRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","collisionCount":0}}
2021/04/09 01:33:15 [SONAR-EVENT]	10	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1456","creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:18 [SONAR-EVENT]	11	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1458","creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:00Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z","reason":"ContainersNotInitialized","message":"containers with incomplete status: [mongo-init]"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"hostIP":"192.168.96.8","startTime":"2021-04-09T01:33:00Z","initContainerStatuses":[{"name":"mongo-init","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"xudongs/mongodb-operator:learn","imageID":""}],"containerStatuses":[{"name":"mongod","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"percona/percona-server-mongodb:4.4.3-5","imageID":"","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:21 [SONAR-EVENT]	12	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1470","creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:03Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:03Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T01:33:00Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:02Z","finishedAt":"2021-04-09T01:33:02Z","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}],"containerStatuses":[{"name":"mongod","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"percona/percona-server-mongodb:4.4.3-5","imageID":"","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:24 [SONAR-EVENT]	13	Updated	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","resourceVersion":"1542","generation":1,"creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":2,"readyReplicas":1,"currentReplicas":2,"updatedReplicas":2,"currentRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","updateRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","collisionCount":0}}
2021/04/09 01:33:27 [SONAR-EVENT]	14	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1497","creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:09Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:03Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T01:33:00Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:02Z","finishedAt":"2021-04-09T01:33:02Z","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:08Z"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:27 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:33:27 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:33:27 [SONAR-EVENT]	15	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1532","creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:03Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:18Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:18Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T01:33:00Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:02Z","finishedAt":"2021-04-09T01:33:02Z","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:08Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:27 [SONAR-FINISH-RECONCILE]	psmdb-controller	0
2021/04/09 01:33:27 [SONAR-START-RECONCILE]	psmdb-controller	1
2021/04/09 01:33:30 [SONAR-EVENT]	16	Updated	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","resourceVersion":"1595","generation":2,"creationTimestamp":"2021-04-09T01:32:38Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:32:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:image":{},"f:serverHost":{}},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:33:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:clusterServiceDNSSuffix":{},"f:replsets":{},"f:runUid":{},"f:secrets":{"f:ssl":{},"f:sslInternal":{}},"f:sharding":{"f:configsvrReplSet":{"f:arbiter":{".":{},"f:enabled":{},"f:size":{}},"f:expose":{".":{},"f:enabled":{}},"f:name":{}},"f:mongos":{"f:expose":{"f:enabled":{}}}}},"f:status":{".":{},"f:backupVersion":{},"f:conditions":{},"f:host":{},"f:mongoImage":{},"f:mongoVersion":{},"f:observedGeneration":{},"f:pmmVersion":{},"f:replsets":{".":{},"f:rs0":{".":{},"f:ready":{},"f:size":{},"f:status":{}}},"f:state":{}}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","runUid":1001,"mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}}}},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"failureThreshold":8},"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"failureThreshold":4,"startupDelaySeconds":7200},"podSecurityContext":{"fsGroup":1001},"containerSecurityContext":{"runAsUser":1001,"runAsNonRoot":true},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"serviceAccountName":"default","podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets","ssl":"sonar-mongodb-cluster-ssl","sslInternal":"sonar-mongodb-cluster-ssl-internal"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"clusterServiceDNSSuffix":"svc.cluster.local","sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{"state":"initializing","mongoVersion":"4.4.3-5","mongoImage":"percona/percona-server-mongodb:4.4.3-5","conditions":[{"status":"True","type":"ClusterInitializing","lastTransitionTime":"2021-04-09T01:33:09Z"}],"replsets":{"rs0":{"size":3,"ready":0,"status":"initializing"}},"observedGeneration":2,"backupVersion":"1.4.1","pmmVersion":"2.12.0","host":"sonar-mongodb-cluster-rs0.default.svc.cluster.local"}}
2021/04/09 01:33:30 [SONAR-CACHE-READ]	Get	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:33:30 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:33:30 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:33:30 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:33:30 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:33:30 [SONAR-CACHE-READ]	Get	secret	default	internal-sonar-mongodb-cluster-users	NoError
2021/04/09 01:33:30 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:33:30 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:33:30 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-keyfile	NoError
2021/04/09 01:33:30 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-encryption-key	NoError
2021/04/09 01:33:33 [SONAR-EVENT]	17	Added	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1538","creationTimestamp":"2021-04-09T01:33:18Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","qosClass":"Guaranteed"}}
2021/04/09 01:33:33 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:33:36 [SONAR-EVENT]	18	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1565","creationTimestamp":"2021-04-09T01:33:18Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:39 [SONAR-EVENT]	19	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1567","creationTimestamp":"2021-04-09T01:33:18Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:20Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z","reason":"ContainersNotInitialized","message":"containers with incomplete status: [mongo-init]"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"hostIP":"192.168.96.4","startTime":"2021-04-09T01:33:20Z","initContainerStatuses":[{"name":"mongo-init","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"xudongs/mongodb-operator:learn","imageID":""}],"containerStatuses":[{"name":"mongod","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"percona/percona-server-mongodb:4.4.3-5","imageID":"","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:42 [SONAR-EVENT]	20	Updated	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","resourceVersion":"1654","generation":1,"creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":3,"readyReplicas":2,"currentReplicas":3,"updatedReplicas":3,"currentRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","updateRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","collisionCount":0}}
2021/04/09 01:33:45 [SONAR-EVENT]	21	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1580","creationTimestamp":"2021-04-09T01:33:18Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.5.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:23Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"hostIP":"192.168.96.4","podIP":"10.244.5.3","podIPs":[{"ip":"10.244.5.3"}],"startTime":"2021-04-09T01:33:20Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:22Z","finishedAt":"2021-04-09T01:33:22Z","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}],"containerStatuses":[{"name":"mongod","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"percona/percona-server-mongodb:4.4.3-5","imageID":"","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:45 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:33:45 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:33:48 [SONAR-EVENT]	22	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1608","creationTimestamp":"2021-04-09T01:33:18Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.5.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:23Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"hostIP":"192.168.96.4","podIP":"10.244.5.3","podIPs":[{"ip":"10.244.5.3"}],"startTime":"2021-04-09T01:33:20Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:22Z","finishedAt":"2021-04-09T01:33:22Z","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:28Z"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:51 [SONAR-EVENT]	23	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1645","creationTimestamp":"2021-04-09T01:33:18Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.5.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:23Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:38Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:38Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"hostIP":"192.168.96.4","podIP":"10.244.5.3","podIPs":[{"ip":"10.244.5.3"}],"startTime":"2021-04-09T01:33:20Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:22Z","finishedAt":"2021-04-09T01:33:22Z","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:28Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:33:54 [SONAR-EVENT]	24	Updated	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","resourceVersion":"1716","generation":3,"creationTimestamp":"2021-04-09T01:32:38Z","deletionTimestamp":"2021-04-09T01:33:48Z","deletionGracePeriodSeconds":0,"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:32:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:image":{},"f:serverHost":{}},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:33:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:clusterServiceDNSSuffix":{},"f:replsets":{},"f:runUid":{},"f:secrets":{"f:ssl":{},"f:sslInternal":{}},"f:sharding":{"f:configsvrReplSet":{"f:arbiter":{".":{},"f:enabled":{},"f:size":{}},"f:expose":{".":{},"f:enabled":{}},"f:name":{}},"f:mongos":{"f:expose":{"f:enabled":{}}}}},"f:status":{".":{},"f:backupVersion":{},"f:conditions":{},"f:host":{},"f:mongoImage":{},"f:mongoVersion":{},"f:observedGeneration":{},"f:pmmVersion":{},"f:replsets":{".":{},"f:rs0":{".":{},"f:ready":{},"f:size":{},"f:status":{}}},"f:state":{}}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","runUid":1001,"mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}}}},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"failureThreshold":8},"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"failureThreshold":4,"startupDelaySeconds":7200},"podSecurityContext":{"fsGroup":1001},"containerSecurityContext":{"runAsUser":1001,"runAsNonRoot":true},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"serviceAccountName":"default","podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets","ssl":"sonar-mongodb-cluster-ssl","sslInternal":"sonar-mongodb-cluster-ssl-internal"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"clusterServiceDNSSuffix":"svc.cluster.local","sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{"state":"initializing","mongoVersion":"4.4.3-5","mongoImage":"percona/percona-server-mongodb:4.4.3-5","conditions":[{"status":"True","type":"ClusterInitializing","lastTransitionTime":"2021-04-09T01:33:09Z"}],"replsets":{"rs0":{"size":3,"ready":0,"status":"initializing"}},"observedGeneration":2,"backupVersion":"1.4.1","pmmVersion":"2.12.0","host":"sonar-mongodb-cluster-rs0.default.svc.cluster.local"}}
2021/04/09 01:33:57 [SONAR-EVENT]	25	Added	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1649","creationTimestamp":"2021-04-09T01:33:38Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","qosClass":"Guaranteed"}}
2021/04/09 01:34:00 [SONAR-EVENT]	26	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1679","creationTimestamp":"2021-04-09T01:33:38Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:00 [SONAR-CACHE-READ]	Get	pod	default	percona-server-mongodb-operator-bf69fc874-mztc9	NoError
2021/04/09 01:34:00 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:34:00 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl-internal	NoError
2021/04/09 01:34:00 [SONAR-CACHE-READ]	Get	poddisruptionbudget	default	sonar-mongodb-cluster-mongod-rs0	NotFound
2021/04/09 01:34:00 [SONAR-SIDE-EFFECT]	Create	poddisruptionbudget	default	sonar-mongodb-cluster-mongod-rs0	NoError
2021/04/09 01:34:00 [SONAR-SIDE-EFFECT]	Update	statefulset	default	sonar-mongodb-cluster-rs0	Conflict
2021/04/09 01:34:03 [SONAR-EVENT]	27	Updated	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","resourceVersion":"1759","generation":1,"creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:33:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":3,"readyReplicas":3,"currentReplicas":3,"updatedReplicas":3,"currentRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","updateRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","collisionCount":0}}
2021/04/09 01:34:06 [SONAR-EVENT]	28	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1681","creationTimestamp":"2021-04-09T01:33:38Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z","reason":"ContainersNotInitialized","message":"containers with incomplete status: [mongo-init]"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"hostIP":"192.168.96.3","startTime":"2021-04-09T01:33:41Z","initContainerStatuses":[{"name":"mongo-init","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"xudongs/mongodb-operator:learn","imageID":""}],"containerStatuses":[{"name":"mongod","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"percona/percona-server-mongodb:4.4.3-5","imageID":"","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:09 [SONAR-EVENT]	29	Added	poddisruptionbudget	{"metadata":{"name":"sonar-mongodb-cluster-mongod-rs0","namespace":"default","selfLink":"/apis/policy/v1beta1/namespaces/default/poddisruptionbudgets/sonar-mongodb-cluster-mongod-rs0","uid":"9299b2b0-c647-4e43-b79d-3224ee68f080","resourceVersion":"1765","generation":1,"creationTimestamp":"2021-04-09T01:34:00Z","ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"policy/v1beta1","time":"2021-04-09T01:34:00Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:maxUnavailable":{},"f:selector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}}}}}]},"spec":{"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"maxUnavailable":1},"status":{"disruptionsAllowed":0,"currentHealthy":0,"desiredHealthy":0,"expectedPods":0}}
2021/04/09 01:34:12 [SONAR-EVENT]	30	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1693","creationTimestamp":"2021-04-09T01:33:38Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.4.4\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:43Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"hostIP":"192.168.96.3","podIP":"10.244.4.4","podIPs":[{"ip":"10.244.4.4"}],"startTime":"2021-04-09T01:33:41Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:42Z","finishedAt":"2021-04-09T01:33:42Z","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}],"containerStatuses":[{"name":"mongod","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"percona/percona-server-mongodb:4.4.3-5","imageID":"","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:15 [SONAR-EVENT]	31	Updated	poddisruptionbudget	{"metadata":{"name":"sonar-mongodb-cluster-mongod-rs0","namespace":"default","selfLink":"/apis/policy/v1beta1/namespaces/default/poddisruptionbudgets/sonar-mongodb-cluster-mongod-rs0","uid":"9299b2b0-c647-4e43-b79d-3224ee68f080","resourceVersion":"1766","generation":1,"creationTimestamp":"2021-04-09T01:34:00Z","ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"policy/v1beta1","time":"2021-04-09T01:34:00Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:currentHealthy":{},"f:desiredHealthy":{},"f:disruptionsAllowed":{},"f:expectedPods":{},"f:observedGeneration":{}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"policy/v1beta1","time":"2021-04-09T01:34:00Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:maxUnavailable":{},"f:selector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}}}}}]},"spec":{"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"maxUnavailable":1},"status":{"observedGeneration":1,"disruptionsAllowed":1,"currentHealthy":3,"desiredHealthy":2,"expectedPods":3}}
2021/04/09 01:34:18 [SONAR-EVENT]	32	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1721","creationTimestamp":"2021-04-09T01:33:38Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:49Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.4.4\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:43Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"hostIP":"192.168.96.3","podIP":"10.244.4.4","podIPs":[{"ip":"10.244.4.4"}],"startTime":"2021-04-09T01:33:41Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:42Z","finishedAt":"2021-04-09T01:33:42Z","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:48Z"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:21 [SONAR-EVENT]	33	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1756","creationTimestamp":"2021-04-09T01:33:38Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.4.4\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:43Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:58Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:58Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"hostIP":"192.168.96.3","podIP":"10.244.4.4","podIPs":[{"ip":"10.244.4.4"}],"startTime":"2021-04-09T01:33:41Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:42Z","finishedAt":"2021-04-09T01:33:42Z","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:48Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:21 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:34:21 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:34:21 [SONAR-SIDE-EFFECT]	Update	perconaservermongodb	default	sonar-mongodb-cluster	Conflict
2021/04/09 01:34:21 no event happening
2021/04/09 01:34:21 [SONAR-FINISH-RECONCILE]	psmdb-controller	1
2021/04/09 01:34:22 [SONAR-START-RECONCILE]	psmdb-controller	2
2021/04/09 01:34:22 [SONAR-CACHE-READ]	Get	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:34:22 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:34:22 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:34:22 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:34:22 [SONAR-SIDE-EFFECT]	Delete	statefulset	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:34:22 [SONAR-CACHE-READ]	List	persistentvolumeclaimlist	NoError
2021/04/09 01:34:22 [SONAR-SIDE-EFFECT]	Delete	persistentvolumeclaim	default	mongod-data-sonar-mongodb-cluster-rs0-0	NoError
2021/04/09 01:34:22 [SONAR-SIDE-EFFECT]	Delete	persistentvolumeclaim	default	mongod-data-sonar-mongodb-cluster-rs0-1	NoError
2021/04/09 01:34:22 [SONAR-SIDE-EFFECT]	Delete	persistentvolumeclaim	default	mongod-data-sonar-mongodb-cluster-rs0-2	NoError
2021/04/09 01:34:22 [SONAR-SIDE-EFFECT]	Update	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:34:22 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:34:22 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:34:22 [SONAR-CACHE-READ]	Get	secret	default	internal-sonar-mongodb-cluster-users	NoError
2021/04/09 01:34:25 [SONAR-EVENT]	34	Deleted	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","resourceVersion":"1842","generation":1,"creationTimestamp":"2021-04-09T01:32:57Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:33:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":3,"readyReplicas":3,"currentReplicas":3,"updatedReplicas":3,"currentRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","updateRevision":"sonar-mongodb-cluster-rs0-86f5f7d4d","collisionCount":0}}
2021/04/09 01:34:25 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:34:28 [SONAR-EVENT]	35	Deleted	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","resourceVersion":"1846","generation":3,"creationTimestamp":"2021-04-09T01:32:38Z","deletionTimestamp":"2021-04-09T01:33:48Z","deletionGracePeriodSeconds":0,"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:32:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:image":{},"f:serverHost":{}},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:33:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:clusterServiceDNSSuffix":{},"f:replsets":{},"f:runUid":{},"f:secrets":{"f:ssl":{},"f:sslInternal":{}},"f:sharding":{"f:configsvrReplSet":{"f:arbiter":{".":{},"f:enabled":{},"f:size":{}},"f:expose":{".":{},"f:enabled":{}},"f:name":{}},"f:mongos":{"f:expose":{"f:enabled":{}}}}},"f:status":{".":{},"f:backupVersion":{},"f:conditions":{},"f:host":{},"f:mongoImage":{},"f:mongoVersion":{},"f:observedGeneration":{},"f:pmmVersion":{},"f:replsets":{".":{},"f:rs0":{".":{},"f:ready":{},"f:size":{},"f:status":{}}},"f:state":{}}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","runUid":1001,"mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}}}},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"failureThreshold":8},"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"failureThreshold":4,"startupDelaySeconds":7200},"podSecurityContext":{"fsGroup":1001},"containerSecurityContext":{"runAsUser":1001,"runAsNonRoot":true},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"serviceAccountName":"default","podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets","ssl":"sonar-mongodb-cluster-ssl","sslInternal":"sonar-mongodb-cluster-ssl-internal"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"clusterServiceDNSSuffix":"svc.cluster.local","sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{"state":"initializing","mongoVersion":"4.4.3-5","mongoImage":"percona/percona-server-mongodb:4.4.3-5","conditions":[{"status":"True","type":"ClusterInitializing","lastTransitionTime":"2021-04-09T01:33:09Z"}],"replsets":{"rs0":{"size":3,"ready":0,"status":"initializing"}},"observedGeneration":2,"backupVersion":"1.4.1","pmmVersion":"2.12.0","host":"sonar-mongodb-cluster-rs0.default.svc.cluster.local"}}
2021/04/09 01:34:31 [SONAR-EVENT]	36	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1849","creationTimestamp":"2021-04-09T01:32:57Z","deletionTimestamp":"2021-04-09T01:34:52Z","deletionGracePeriodSeconds":30,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:03Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:18Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:18Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T01:33:00Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:02Z","finishedAt":"2021-04-09T01:33:02Z","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:08Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:34 [SONAR-EVENT]	37	Deleted	poddisruptionbudget	{"metadata":{"name":"sonar-mongodb-cluster-mongod-rs0","namespace":"default","selfLink":"/apis/policy/v1beta1/namespaces/default/poddisruptionbudgets/sonar-mongodb-cluster-mongod-rs0","uid":"9299b2b0-c647-4e43-b79d-3224ee68f080","resourceVersion":"1854","generation":1,"creationTimestamp":"2021-04-09T01:34:00Z","ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"policy/v1beta1","time":"2021-04-09T01:34:00Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:currentHealthy":{},"f:desiredHealthy":{},"f:disruptionsAllowed":{},"f:expectedPods":{},"f:observedGeneration":{}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"policy/v1beta1","time":"2021-04-09T01:34:00Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:maxUnavailable":{},"f:selector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}}}}}]},"spec":{"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"maxUnavailable":1},"status":{"observedGeneration":1,"disruptionsAllowed":1,"currentHealthy":3,"desiredHealthy":2,"expectedPods":3}}
2021/04/09 01:34:37 [SONAR-EVENT]	38	Deleted	service	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-mongodb-cluster-rs0","uid":"ef9654f7-b435-48f6-b2d8-2752e8ef9aeb","resourceVersion":"1853","creationTimestamp":"2021-04-09T01:32:58Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":27017,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"mongodb","protocol":"TCP","port":27017,"targetPort":27017}],"selector":{"app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/09 01:34:40 [SONAR-EVENT]	39	Deleted	secret	{"metadata":{"name":"sonar-mongodb-cluster-mongodb-keyfile","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-mongodb-keyfile","uid":"5de11831-8930-463e-9e29-a80384eff806","resourceVersion":"1858","creationTimestamp":"2021-04-09T01:32:51Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:mongodb-key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"mongodb-key":"NVdxMSs2Q3pVdlJEdVFxdEtRVjl4V2JXRWViSFMrUVpmRkphTHdGUGJ4bzduUFAvT3hKeWliS2toditWeE9BamRtYTdKV0s5WGx0QjZCSU9hcFFQeXA4YzJQNXZ0aEFNMGZldWs1Q1NuYm8rYzNhOXRrYkJYb2RSUUdnZUlhUmlXREpkQ1g5THgvYk5aaTdtd05MTEN5eVhVZFRDNE4rdWJkMzZ6R29WSEdvd1d0M1VERHJ3eE1SRlBGK3VZR2FmNmdTQk80SkViYm9HRDFlTjNIODZ4YWlaTTBORGZSSlFwMHhIeHp0ZFpkS2UxUmtuMDJoUXZNQ0x2N21CK2VjNnZjRnl5b25mUHdETWNEQzhZK1ordmlOMXVKYjZDMjA0NFNUbDZrRlhKcUVpdFI1ZFF1VmpnU0lNMklqNzYrNDdPTDFpYk0yUFYvSXB3V3dNZ25ucmdTVEtEZVdVTmZ4aTMrVGxWV1dsQVZ5VVhzS0t4d1RlSHhQQmpSSDNtNS90cVVrWWhnbWM5MFkzb0t4dTV0Q3pCdVp1WE5wWW5KSlEvMm1aSmhDZFhocXBNOVU3OU9GQnNyalRMckVJK3lrenYwRVJUdm0xMW85aGRORHZERFZnV1RZdHIzb2hyTlFnZitJV3k3SmlFZGJ0UlBIeVk5bDRWYnlZUHJ0bGZ0ZnhyenpkWnFIbE96alJYRkdENVNCMEJtWU92ZS8zaDUxSmVaUVpJdzNyY000N3ArTE5KQW51N1g2TDVuWFJEa0E0bzlrNnI0NVRvc0dIRlhEUW1mdjUzS096UDhhM2FyRDNubXBld1RtVDZpUFBKUHQvcy9HNEdKcjdSZFg4M1EvZDF0SVBFOWJaYi9NQ243bnR2MnlJTXkvcUdKOWhKbG1yZ3l2OS9hejR6NmFlb0JxMTE2Qm9UZWQzbmJpT3ZKYTdacERiYVJpd1BZQUNFYjZvcnlHTFR5Y0VDTEoyaDV5S3djSzUycjB6RTJJU1BseXllYTI4djBveVVkYngrQzBhdWJ0UzdpZys5eDFGRHBiTXovM3c2cjdhaThmakxGZkF6czR1TCs0cXlSUjRiTUZBVEVvb1p1SnlTTm1XM2g3dVdnYklSRHJQUitrSkprdmJYUFdJK3luRGxHa0hYUk1UaWR4aEp4TWVLak5NTys3VCtkZ2EvL0RzV2IyOHlibEp6Ulc0cFUwd3JTWGFDYWtTOW9lajVMMUtrbktTeW5FaUtTdUlxU0RlejMyU3JMNktJb09YYlZkQjlueU9WTTBOb3FEcXVJL2tIbVcvcWRGbGpSQWxXRTVoOXJKZzQ5V1pkMWRpbnQya2N5ZHpHRXlzaVBaWEFEWmpSTkNiY2JMRA=="},"type":"Opaque"}
2021/04/09 01:34:43 [SONAR-EVENT]	40	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1850","creationTimestamp":"2021-04-09T01:33:38Z","deletionTimestamp":"2021-04-09T01:34:52Z","deletionGracePeriodSeconds":30,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.4.4\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:43Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:58Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:58Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"hostIP":"192.168.96.3","podIP":"10.244.4.4","podIPs":[{"ip":"10.244.4.4"}],"startTime":"2021-04-09T01:33:41Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:42Z","finishedAt":"2021-04-09T01:33:42Z","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:48Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:46 [SONAR-EVENT]	41	Deleted	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl","uid":"1a0f4315-c6dd-48b6-be8d-4f0bf7ed65bf","resourceVersion":"1859","creationTimestamp":"2021-04-09T01:32:45Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:45Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lRVTArdmVEdW5UazJIYTJhUGxmV0l0akFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16STBOVm9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBU01SQXdEZ1lEVlFRS0V3ZFNiMjkwSUVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXpNNHh6bERCdEtzdlBwVGhNUkZMSnpsTFV2T3NMUUVRMU80bXJCMEsrNnl5c1FES2J4ZkkKMkNoWHVvTkNyeDFOcS8xZlc1MEl1RGVDTDZWWHN1SFM3R0U2WnlUWEdqRGxsVG16K0QvY0Z3d1Y0N3h4UnR1QQpsVVpEekpnN2JtVlFZc1BldUJiamd6SVZhRm1FNzRTRmJCbFlwclFmeGlRaDcrMTd1MWJBcDNZVUpIcWNSRTlFCkxoUFpOU3RYcktrbzhjaHV4WVF2VGFsNENLU0xGck5HbFIrNXZhbUswVVp0WW85Z2l2dElKK09vaXpaYk41Q0YKSW5qdkJINkM3dXU5Q1dPNXQvaTFFV2dkaDR0Q0ROd2IwSW9MZlV6MzRTQk54V3N0cWpWSHM2LzdPN1cvQjVCdQo4WmI2bU90UElqTXMvWlNGZjJRZkttYWV5NFFldlRNbW13SURBUUFCbzB3d1NqQU9CZ05WSFE4QkFmOEVCQU1DCkFpUXdKd1lEVlIwbEJDQXdIZ1lJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQXpBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQWI1TGgwbUJ3N1h2SFRmb3dVNUkxSgpTdWJYQ2tJRDUrdjJaUzJpM2tOMG5ZeGorbnRsMnNwN2dYWWZkVUFvVTR1dnZQMEM2SWhIZFdicG5XSy8wdXd0ClZGUzVVTWFRMi9GemZLR1VoODQrOVk2THIwSVRLN0huUE5qWEtPbE5EbGRnWUY2LzZKaUYwbFFZNXhiY3RncTQKUnh4RnM1ekM3ZjJtK2pPSUZ4QWpVYXg0b3NFbG5idG9QaDlXbGRkM1cxZkZIZEhsbFFiQnNaQVNXUVNqbThYWQo4Z1BHOXNZRjhmSDZUZmVEcVV5K2tGODlTclF5emFtKzZNZGU1MG81c0Y2aFBUWUNGNU9GTTlUWUF3bFY2dFAzCmdEUkVaYU9uSktFdS9ZeGs1ZTRucGRmcUJYczRxeU5IUGpYTU8zU3p3OHdpb0w1S3M2UEJ1b1EzYWlaS01KaHAKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY1RENDQk15Z0F3SUJBZ0lSQVBaK1o2Zkkwb1lWYldDdmVyMXZveUV3RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTXlORFZhR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VERU9NQXdHQTFVRUNoTUZVRk5OUkVJd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3CmdnRUtBb0lCQVFEeGs4OU1rMWpHRUtjejFza21WUHMvYitvcEZ6N0RwOUI0QUxSZkxuRTB4a1NQcHFwdDdiOHoKTjE1N3NpbFk2T1MzTk16MFhmcEU1ditpbkdGVCtZMGRYRVJzV25OQUppcXV0ajBncFdNYThEbi81aFh3R1hpZgp4ZkVCR24ybjFaTENMVnFocnFNUmZ6R3dqclRnTUZBdTB3S3ByMG50QW5iR2xxZTRyTURLc25tY1ZlYmROT2YwCnJyVVRSUmM2MmdaaVBjV2NEUkVUcXFoejI4RmNUeEUwQ2hDVkxVeTF6aXZVQVB4ckYwRlpGSzlscjllRVJZZFgKODZIeFFRZzIyNHBvM0daaXAzZEoyZEhpdUtvaHArdG9lWTl4RFA0eC9OSGhUb2d1K2JMRkdpV1JOYldqbnZ1RApKMnVkTmpPZWFZMXF6K2djRC9qT1FxUmM1SkxFSG5TekFnTUJBQUdqZ2dNek1JSURMekFPQmdOVkhROEJBZjhFCkJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUMKTUFBd2dnTHVCZ05WSFJFRWdnTGxNSUlDNFlJSmJHOWpZV3hvYjNOMGdobHpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdnaUZ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NNM052CmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmgKYklJYktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0Y25Nd2dpTXFMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkSUkxS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRjbk13CkxtUmxabUYxYkhRdWMzWmpMbU5zZFhOMFpYSXViRzlqWVd5Q0hITnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmwKY2kxdGIyNW5iM09DSkhOdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJMgpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFcxdmJtZHZjeTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5CkxteHZZMkZzZ2g0cUxuTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzT0NKaW91YzI5dVlYSXQKYlc5dVoyOWtZaTFqYkhWemRHVnlMVzF2Ym1kdmN5NWtaV1poZFd4MGdqZ3FMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYklJWmMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVo0SWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWsKWldaaGRXeDBnak56YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIUXVjM1pqTG1OcwpkWE4wWlhJdWJHOWpZV3lDR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMV05tWjRJaktpNXpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWoKYkhWemRHVnlMV05tWnk1a1pXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQkFRQnFzRXRqdGUwZTFIaGI2K09VcVowUlVvRkh2RnhyRWhuRURFVlE1bUZ1b09keUxJM0VlWkNYCmtxcjh0NjdGRnN6YVhaTklud0ZrN0ZaUjJOUkdIMXRabGFZV2pBdlYvMlFyakcrR3hrNlRwWXRXTXJoUE1GR3kKRm12YWQxYXdCRnNxa2xrQkZyL1NmOFk4NjhUcTZqOEVwbWFtZlJuKzc1RGtOaUhRa1ZjaHAwbm10Rm96MVZGZgoyTU5vQUtBRWFLOGRISmJuSFgvT3NhR2lIMUl2Q0Q5OGFkTmRrdkJXdFV4SXNlaGI1YWJVeVRrWEU3TkN1NklBCnRhdlFlNFVhY1A3WkdoNzJoY0tVWTE3QW5uQlAyUTFYTVlIUzNmU3JiZGpOR1AvQlhhd0RwL0dvV3o3bXpYYVgKWStnZm1jR0JnSUZFdFdCVW9tNkpZdWZCU3p2bzZyZnMKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBOFpQUFRKTll4aENuTTliSkpsVDdQMi9xS1JjK3c2ZlFlQUMwWHk1eE5NWkVqNmFxCmJlMi9NemRlZTdJcFdPamt0elRNOUYzNlJPYi9vcHhoVS9tTkhWeEViRnB6UUNZcXJyWTlJS1ZqR3ZBNS8rWVYKOEJsNG44WHhBUnA5cDlXU3dpMWFvYTZqRVg4eHNJNjA0REJRTHRNQ3FhOUo3UUoyeHBhbnVLekF5cko1bkZYbQozVFRuOUs2MUUwVVhPdG9HWWozRm5BMFJFNnFvYzl2QlhFOFJOQW9RbFMxTXRjNHIxQUQ4YXhkQldSU3ZaYS9YCmhFV0hWL09oOFVFSU50dUthTnhtWXFkM1NkblI0cmlxSWFmcmFIbVBjUXorTWZ6UjRVNklMdm15eFJvbGtUVzEKbzU3N2d5ZHJuVFl6bm1tTmFzL29IQS80emtLa1hPU1N4QjUwc3dJREFRQUJBb0lCQUJ2NFpUUVVpMTdEWnRpVgpzY3lDWW1UQjdIYTlma0xoRno0TnR0U2VaL1VZVDYvaU9ERnFLWTBnaUF3Q1lNOHVoK3krYkV5TzVQODlUN1BnCkwxU3R2Q3orRmQ0Rnl2cE9jUHF4bHZwRXEramVqNWlWWjB6WlppSDVwU0hmazFUdllZS2lCYkJhcS83R24xWTEKNzdOVlpMTkhNek82Vy9EWkxDOXFHaGxEeHo2d21kVjFaUUkzU0haMytDZE1QV1pWWUhKbDlYRWlrQk9mcWMrVQp3WGhPVFBPOUpxNC9JVysyT0xXOUxOa2FyMW01a0NaSmNHSm85TFJxSU9NVVkzelRLYjRDa09OL1ZaM29XdmhyCkJPRkloLzhBUEtyS3dMeXQ3TkN6QkZzRFNxeVVrSkVMaG94dUF6ejFDS1prdXg3dWJ2MjZXc0FTdnhjcjJBWFoKbVdaQkhjRUNnWUVBK2lLc21jRnRQVkFLdlBzZFJYTUQrSnZwZ0J4MGQ2M3NLdUNrQ0JSaFJkd1FXWFUyMS9kUQoxWmhoZk51Zi92aWt4VW1wUmNlMitzVmpvMXF5Z2o3a1h4VWVYMms4Zm5kQ3EwRXVOTDFEeXF4Y3NuNkQ2TGZNCjk2cXBhSSszb2puTHVyTHhJZ2hWYndZYUtqNmt2Z3Z0a1FHOHdDZ08xN3F0Vmh0RlhmQWtueGtDZ1lFQTl6M0YKQklUQzJsczJranRkUEhCdURHN003QTZra2FHcnJ5Q1BBRHFUbXZaNGZKT3dTdkxjbU9aRlpqOTAwSm1nQjBPRApMRUpoeG80RGQ3dDlidG5xelZ6R0JzVU12VVNPZkFjNTJZUEpicDNnU0NGaDl0emhaV1NyS1NLVGhIaHdZdG9VCjBXcElFMWFVOWZPa0tvMHJPSmU0MjhKdFl5TWpiMldaU3p3U2g2c0NnWUFlWFo4K2V6RGJ4Si9KR1dNUVQwb28KSUNWVW5CKzNkN0czOHRWMjlhSnBiTEcvYW05aUFIQWJ2Z2YzdEdIVC9qTmlqL0t3dWZJSXQzWEZHdm1ZdmpIVApLU2txeEFmSUFvcGhaK1JJR3NIa0ZOQ2NDcWZRMUo5WllhcDNPeHM3NG5CTkZmUVlBWkw5aTJ3WnZNa2JHUytaCjd2QVBFODNaZXB3WVcrOHIzRDlWNFFLQmdRQ3lIOTZCa3VTUFRJZlVjdENKYXJiZVhqVmxIR2VVUkZYY3BpaGcKa2RNbUljeE1kRnJlcEhvcDdqeXhuYVliWTVMWHFOd29WdXI2a2ZZTm5SYVJkbzZqeGVNbG5YSEFLbFE5SnplVwpia3dCVmR6d0dwenByZGoxbzhGc3NXeDJWQThrS05vMnhjdUhveWxPeVduTS9rZlZUZm53MmZMVktjdXR4aFRiCkR6eUtZUUtCZ1FEb1NqOEF5eU1PbHJDY200Q25UdXF3Y0dwNzZmTExTQUhDMXJCek1SczljN3RWMFVVcFF1Y1UKVXkrVFY4ek91eUM1NmFBZnNYdjBIVzh5eVY4ZTZPQlZkR2xPWU03VnF2dHJkNXJ4MDRpVisrdE9kalJzOHI3dwpOWHF4NmhERjRnbm1CbHFTZElXaXptZCtrS1U2ZGJuVFpudFEvVEcwSEZ4QWxPaHg2azdYTVE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:34:46 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NotFound
2021/04/09 01:34:46 [SONAR-SIDE-EFFECT]	Create	issuer	default	sonar-mongodb-cluster-psmdb-ca	
2021/04/09 01:34:46 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:34:47 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-ssl-internal	NoError
2021/04/09 01:34:50 [SONAR-EVENT]	42	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1851","creationTimestamp":"2021-04-09T01:33:18Z","deletionTimestamp":"2021-04-09T01:34:52Z","deletionGracePeriodSeconds":30,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.5.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:23Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:38Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:38Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"hostIP":"192.168.96.4","podIP":"10.244.5.3","podIPs":[{"ip":"10.244.5.3"}],"startTime":"2021-04-09T01:33:20Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:22Z","finishedAt":"2021-04-09T01:33:22Z","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:33:28Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:53 [SONAR-EVENT]	43	Deleted	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl-internal","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl-internal","uid":"279b4fff-f5e7-4d5e-887d-ab1542cfa818","resourceVersion":"1860","creationTimestamp":"2021-04-09T01:32:45Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:45Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvVENDQWVXZ0F3SUJBZ0lSQU5TS3hGdFYzSGRvR2NQV0NtMDJPK2t3RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTXlORFZhR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VqRVFNQTRHQTFVRUNoTUhVbTl2ZENCRFFUQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQCkFEQ0NBUW9DZ2dFQkFMODQ0YUFFdmJJVUUyZE8waTU4eUdRS292dEYralQ3SEdGVytXQXJOWkxrL0Y5dUNyUGEKek5xYWRvMDhhU09mcWw5cGVMWkZRWTJvUmdmUEkxSFkrUlNnUGZxRGdKMFdIQml1aHRtUThOcC9BalRQTlJhegoyQWZQamlSZDhrcHlERlVldk1rNnprZ01SN0d6V2RrbDZxMWFaV1RjMjYzMmVMZXZLdDhoaG1UOENnQjVRdWxTCmR2a0M1NkYvcGRKVFoxNm1hWlFFSlJvOGRQaUFLYjhUTjdwa3owbFlZUjhtaHZQTmpKSUNLQnorQk9KVVE5WEMKbHpEaWFMQjRRQ0F6NThndkk2Yk1oMWJhbk9qdGxKYlZzNkRwaVlhekNFMEZJK0UzajFmR2VQTlE2OGVtVmpYZwpGcnRwNVZyMGJHVEdIRkpZTXF4cWxGSmRaZWRMeFJqTU0yMENBd0VBQWFOTU1Fb3dEZ1lEVlIwUEFRSC9CQVFECkFnSWtNQ2NHQTFVZEpRUWdNQjRHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdNd0R3WUQKVlIwVEFRSC9CQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFFTnpjajRUakJjNXpXM29BWVQvYwpMcGlYVklGdmhJNlVEcmRZTWFUaCtRUEp6NUI1NTFDNWppdnhVWnd4S1BQWXJJU2FNVDVySFNuc21YYmNVSEt4CndNQ1FKTkphUEZOaDBWWUpwRVlvc3VrUy9YM21Sb0ZINDRhaTlYQkh5ckZIZThJRGdHQnVIZXpGTXF5UEVkRlQKYlFpOStDSmZaSDVWNjhuV2M4MmwwV1ZjRU0rc3R4YWNBV0RHdnlNRTF3cVFmeWhuYnBFL3JlcGoxTlp3bHlVSAo3ZDZTemY5cGNBQzJqbnpMNklxOS9OMXo1MFV0UFpmU2w2Z0pZeEJWV3Ftak40WXl6U3JCZU9kWVl0bktYMzF5Cm5ZVFhJVkZlRk1TTU9sNzFyYThxZ2FWNnczeXpPWTF4am0wY3paN290UWtXMmZTblY0cTJZQVVub0g2Z1ltM3IKN3c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY0akNDQk1xZ0F3SUJBZ0lQZjUvdW1FV3BkMUZkR0xRcGQzai9NQTBHQ1NxR1NJYjNEUUVCQ3dVQU1CSXgKRURBT0JnTlZCQW9UQjFKdmIzUWdRMEV3SUJjTk1qRXdOREE1TURFek1qUTFXaGdQT1RrNU9URXlNekV5TXpVNQpOVGxhTUJBeERqQU1CZ05WQkFvVEJWQlRUVVJDTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCCkNnS0NBUUVBeGxnaGpxOU9UVWZGdkVDZjR6c0dEaWxSZjk4djE3a3RUdXVINGJ0NFU3amNKbE03d3dwR2hZVSsKdW5ZZHZLOW5qMi9lbGdHeU9IY3JjcXVRUFJUNzMvWFdMM0xtSVdZNkxmQlNYQmIzMHpvZ0xpQ2h6TjNMUmxjUQpXWkpTK2Vvb2ppWkkzQ25FT2hwN0pBbCtEc2tyLzBmTmhlQm1LSkQzYlc3bGF1cDB6Rm5FbSt3Y2xpdkZyMmxkCmQzOUd5Y1F5ejJITjFNcENGcmNHcjUrcmJ1MUd2UHY2ZkVBR1Z3K0JHZlNCMS94RDFzRXBPdGJ0RXFiQWFOWVAKakIyMW1wQWM5dWdzSXBsVHRLRFVPZmowNW9PdC91NGRFTTJBelBiVlVBNHRjdlBDUTdDVjI3MmQyclltbk9aaAphLzdRaHhIdHlMNStFYzZ3RVh5dlFKSGUwdW1mZ3dJREFRQUJvNElETXpDQ0F5OHdEZ1lEVlIwUEFRSC9CQVFECkFnV2dNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUZCUWNEQWpBTUJnTlZIUk1CQWY4RUFqQUEKTUlJQzdnWURWUjBSQklJQzVUQ0NBdUdDQ1d4dlkyRnNhRzl6ZElJWmMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWegpkR1Z5TFhKek1JSWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFhKek1DNWtaV1poZFd4MGdqTnpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIUXVjM1pqTG1Oc2RYTjBaWEl1Ykc5allXeUMKR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMWEp6TUlJaktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWpiSFZ6ZEdWeUxYSnpNQzVrClpXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzZ2h4emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXQKYlc5dVoyOXpnaVJ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGJXOXVaMjl6TG1SbFptRjFiSFNDTm5OdgpibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzTXVaR1ZtWVhWc2RDNXpkbU11WTJ4MWMzUmxjaTVzCmIyTmhiSUllS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRiVzl1WjI5emdpWXFMbk52Ym1GeUxXMXYKYm1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJNEtpNXpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGJXOXVaMjl6TG1SbFptRjFiSFF1YzNaakxtTnNkWE4wWlhJdWJHOWpZV3lDR1hOdmJtRnlMVzF2CmJtZHZaR0l0WTJ4MWMzUmxjaTFqWm1lQ0lYTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTFqWm1jdVpHVm0KWVhWc2RJSXpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWtaV1poZFd4MExuTjJZeTVqYkhWegpkR1Z5TG14dlkyRnNnaHNxTG5OdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMWpabWVDSXlvdWMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWtaV1poZFd4MGdqVXFMbk52Ym1GeUxXMXZibWR2WkdJdFkyeDEKYzNSbGNpMWpabWN1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmhiREFOQmdrcWhraUc5dzBCQVFzRgpBQU9DQVFFQXNTamVWa2tPeFJsNnZ5cDJzS0RxS2VXRHVQVWJTRVJFZUNiU2NhQUlFUUI5RkNQRzJGQ0N5cjVZCnBiZ3dhYmJsck1kTmxmaUhPRDI4Q09jYzlqczNqNGphd25vYXI1aE93Qi96cTJZamd3Nld4SkpISmREazlQWjUKNzB3bEVlSGoyOVM5WjZJQ1VKY285RlVYRm4vckxKUVRKTml1VDhCN0grUllUdm5wNkRON1p4UnJoMFc3UXNaQQpWUmxZbkZUdFRTWk55bVlvSkd2Y2xZUVVoVDF2QmhaNnVXRHpmTHM3NjZCU081dS9CN2hzNkp3b2J2MlFwekRVCkV6UVBjbUNJdXNFSUtPMEtBaE1meTJwN0w4Q0dWelpDMldndG9sdUU5REJ5ZG40TjRGeDBlZUlzZVVzazJ3aGMKK1FHYkNRdURya3ZmUVc5amxzd0RwcFhXSS9oYXVBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeGxnaGpxOU9UVWZGdkVDZjR6c0dEaWxSZjk4djE3a3RUdXVINGJ0NFU3amNKbE03Cnd3cEdoWVUrdW5ZZHZLOW5qMi9lbGdHeU9IY3JjcXVRUFJUNzMvWFdMM0xtSVdZNkxmQlNYQmIzMHpvZ0xpQ2gKek4zTFJsY1FXWkpTK2Vvb2ppWkkzQ25FT2hwN0pBbCtEc2tyLzBmTmhlQm1LSkQzYlc3bGF1cDB6Rm5FbSt3YwpsaXZGcjJsZGQzOUd5Y1F5ejJITjFNcENGcmNHcjUrcmJ1MUd2UHY2ZkVBR1Z3K0JHZlNCMS94RDFzRXBPdGJ0CkVxYkFhTllQakIyMW1wQWM5dWdzSXBsVHRLRFVPZmowNW9PdC91NGRFTTJBelBiVlVBNHRjdlBDUTdDVjI3MmQKMnJZbW5PWmhhLzdRaHhIdHlMNStFYzZ3RVh5dlFKSGUwdW1mZ3dJREFRQUJBb0lCQVFDRFpXOFZyMTBZSlN3QgpnbTVwZ25pSWVTYmNwMlp5YXVKeEhlZHV5MXJ6Vzh1OE4vZW5SZTlpRk50eGV6NUgrWXVKb25xNnRYVHpvejdOClFJclZiRWxRSFBRL2lzYVo2YmN4Sjd2bjllOUhwNElhRE5RamUrdG1OZGRHLzRDb3YwOE9uSjQzL0JOYXlxQTUKUjNDVEt3SlNvNmFyd2ZUcmV0M3ZTVUFDakQvRC82bUFUZmVBYzhXWHB6c0k2cEtvaFd0U2Y3VmxVc0ZIQ2JBVgphVVZQQmJrVlhtVnZKallQWDBNZ3FWMmcvWWc4eTliU2NaZ21PRDI2Tlh6OFYvaTdiNFowaUk5NTNpZzh3ZDB6CjNNTWtydFREdXRsZEZ6N1d2bVJ3UjFqSW9HTkhtVHFqV2ozQVZEcXU2QUxvTTIyd25COGZMSGt2enRML2k3d20KL05jNGNiV0JBb0dCQU9UQ0pKTnRsYi8vY0xrem1BVXdMcUJETnJpS2NQRkxBMHY5MVNtWlZUTVp1V2VEelozUgpjL2RoTXZkNCs0aG5kOVF3Q1o1Zm0zNXlZUWJCY0JlRXppaEpDVWhaUWFFZzhxaWdGZnYxR1Q4YmtHSE0zcmdzCmVLVUZRSVdvYlR0Ly9MMEt3Rk5KTGE5TWRuUldHV01MUkdmOTFJdnAwV3VRekp4V04rUk5aMitwQW9HQkFOMzIKeXdjUm1CdjZ0YkI3V0JITUFweEQ3a2VYd2FyVjY3b2lQWEs4MjdoWHNiMnMyMGwvVFdnNitGMHF0OWhLTzVWOQpHS0FHTklKdWlYYmhHa1ZWMEttQ3p4Qk5WNjltTWRDR3VTOHVpZGREZ1Fod09TWnFjMTRhaGtkVFVPcWdjRlROCnFKeWh2NWVEamljQ3pUR2xjZEtkbTZPWElCeGVpd1c5RDVtQmNrRkxBb0dCQU5FR3hUMGhhVEJqVExFdC83N2QKNC96MDdjOTZVUEZxeGJ4dVdKVUdVdCs2cGJ0OHFDbUk5aG9aYXVUT1c2aXNRc1pVanJWMFR6VWZkcUVocURjVgpWdnRnb1diR2lEMmZTWnZqaTdNS3B1TVBZTUs4M05ZVmJMZjlNSlB3N3I3cm1CbDA5WUFrNGVYSVRJVEpGN0YwCjNqRFhzNXVWTDVMR1lQQ0pwOUNwR2RiaEFvR0FEV3BTSVE0K0xFcTkybm5KKytGaHN3SWtENjJyWmVEaUMzRHcKVjlQMFQ3TDFLaXFkWWxiUVhlRmFpMzcrZDVNZEFNNzd3d2c4K2prbUU4cE5KUzJubStjdERxWXVDNHJZcmVyRwpuSVJxamxrbEhsWnlEZEZYUWJQR3M5N2tRQm9NVUFQU0VnMXduLzZ5ZzhjV2tjNlhENHk1RUcwYzRyb1FHdnV2ClNxN1pNZnNDZ1lCRE14YWl2ZjQ3MERPUFFMT3k4MlpuLzJJRW9YQmxRcnNEdk8rM0dmTW1qRGFOeUs1cHpxY0wKaUtYZDdKaFFyUjhJK2FBcWQyVVFHNXRTZEZsbG1UV1E2dStpbjZaY3Y5bExyOWVpSHN3ZnV0OFNzbTFTN0xtRwpGalFNdEZyVFFWamdVbjFVYXBRKzlWRFBLQlJvSlkzSit5cDR3cmpRSDF4bzE4ay9yVlQ1dVE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:34:56 [SONAR-EVENT]	44	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1867","creationTimestamp":"2021-04-09T01:32:57Z","deletionTimestamp":"2021-04-09T01:34:52Z","deletionGracePeriodSeconds":30,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:03Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T01:33:00Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:02Z","finishedAt":"2021-04-09T01:33:02Z","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:08Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:34:59 [SONAR-EVENT]	45	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl","uid":"75923f66-b8c4-4262-ab5b-0fc63078aeb1","resourceVersion":"1993","creationTimestamp":"2021-04-09T01:34:46Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lRSko5aWNoZVl1YUdYWHdPZndSOS9DakFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16UTBObG9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBU01SQXdEZ1lEVlFRS0V3ZFNiMjkwSUVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXVINjF1S3VjOGZpNmtyS2pMYXRmU3VvZ2JHTWFyaUVqNUJJd2ZTR3NrZTZrRllVdFlrQkMKZHpGZWYvU2tXZi9hZDFxa1BCTzUxRGVjQ09rYkUrMG5SMlltUmJ4eDVqbzVocklrSm53S2ZyTXQ1UERlcjkrNQpJaG1WMDVMR2lNdkhEdWprTStlYWJ1ZjA2L0FaUWV3dmtEYURCbFVSSlA4NjJLemFsZ3M5OGVZR0xxQm94VG5KCnhod3R3dnZLQVV3YXdLblJESytneXBSTCs0Q2N2ZVpjRzhDYlBaZmJyQUVhMVFXWndBb1hIdWxVNXpvcTJBWUMKTnc3QVo4R2dldzZqL29zL3d5emxoQjhpNTQ1UTlXOHBIUFNJSnVQQWdreU5hSUZBSDNvMjlIMXlidVhCZVEvbApZVU1LTVlwOHJxcmpTcUJINm0rZllDZ2pNdHU1YUpJcHR3SURBUUFCbzB3d1NqQU9CZ05WSFE4QkFmOEVCQU1DCkFpUXdKd1lEVlIwbEJDQXdIZ1lJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQXpBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ2gwNFo4clJyNFo0SUhuVy82K1NjNQozODVoZ1kzaXp5QmxGUGFMbndST3NUaXpNWFJONXRnUFZtSjg1MXVSUHJmNmpzWUlQMmp5dVpIM1ZLbm91RlB5CjNDUjZPdEorUWd5emFPZzZyeXc1MUN4dGRROExteWtrcitGemloWHpxMzlIMFNaNDNMVk10ZWJueTR1V3BES3AKbDZ2RmpwMGY4TGc0NUczNGc5LzhNcU5DNzlkS2RjSjFWMEJ4NE1YSVFUR215K0tSUUxzaWlzWHJCbTFwa2ppaQo0cXAyUzZDamJHR2ZJS0ZEMmxKN2NER0tVV1FzYjRvSkpBcEtoVXdwRDRLWlhmTkNNdSs0ckRkaGRERTlIbVFxCkxKdVoyZitNekF1bVUrQ1NYNWgvaUk3RThDVGEwZDJETjEzYWY1UDNrdW50cXkzc082dk1OT04xdXZDa0taK2gKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY1RENDQk15Z0F3SUJBZ0lSQVBWOWNWaEVtZFo1S2FRdDExRWl1NG93RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTTBORFphR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VERU9NQXdHQTFVRUNoTUZVRk5OUkVJd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3CmdnRUtBb0lCQVFEemdqTDBNaEZOZ3V0YjN2SHdxaloycURWVkNLOWlZQUNtb1p5eURGOGtFU280VythaFhWbjQKclJsa0lmZ1Jpc0Rkc0krdWNYMUFmUWdMTzZlUG13NllsQ0lGTVBKZWZFN2VnNFlMUzRMZE53SXdmNXFLZ2NpZwpubG1Uc2xrZDFmekJHaXE4aXpXWEw4dWx5ZGhEeXVqaU1PNkpsQjIzWndzcTd0MjIwWHRZc1dMdm9rNWRQZlh5CnBXd01TSFpNaFhNL3FMYmNxVEM0N2cyZld0TG91ODNqNDRacnd5bjRQYXFVdmUycHBWcElTU2grRlBBTFE1Tm0KcEQySGkzQ2Y0SFVVMHJJSVBnY1o2UlZWbGs3aVgvWGRrMnpiNU9mRENTZlZlNXAxUzdocTNpcUR3TzhKNnpOcAorS2pOdkhNRjh5UEdkai9IZHdOZWFiTjkyc2tjTC9kbkFnTUJBQUdqZ2dNek1JSURMekFPQmdOVkhROEJBZjhFCkJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUMKTUFBd2dnTHVCZ05WSFJFRWdnTGxNSUlDNFlJSmJHOWpZV3hvYjNOMGdobHpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdnaUZ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NNM052CmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmgKYklJYktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0Y25Nd2dpTXFMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkSUkxS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRjbk13CkxtUmxabUYxYkhRdWMzWmpMbU5zZFhOMFpYSXViRzlqWVd5Q0hITnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmwKY2kxdGIyNW5iM09DSkhOdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJMgpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFcxdmJtZHZjeTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5CkxteHZZMkZzZ2g0cUxuTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzT0NKaW91YzI5dVlYSXQKYlc5dVoyOWtZaTFqYkhWemRHVnlMVzF2Ym1kdmN5NWtaV1poZFd4MGdqZ3FMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYklJWmMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVo0SWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWsKWldaaGRXeDBnak56YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIUXVjM1pqTG1OcwpkWE4wWlhJdWJHOWpZV3lDR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMV05tWjRJaktpNXpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWoKYkhWemRHVnlMV05tWnk1a1pXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQkFRQ2l0MzI0QTB4M3BlOC90RnZXQjlqQTZsZm5mRzk0R2R6MlpUaG5iTmUvQnRGQjJzU2pMTnlSCnRMOHREVUdaWjNYazdOcDJKcjBtNEJTQ0UwMnJ0SUI5WmVLL2NnZHlKbDljc1dveWM1Yjl1YXlnZHVnZEtVUWkKS2hiRmJnSGdEMHIxN3BGbFJlZzlidFNROVRkWHgrMDVJRzF1MVRjVVhBd0tvTVJQV0RSbzY4WUFFYWNLT2hjSQptMFNIYzc3OUhjRldBSXY4RG1YWk14aXo2RVoyR09xalZBMmFQVGxqeWFINXFycGdsQW8yaDVQK3F0b3h2TmNuClJ5bjVWd05SNnBwaXBKMU9jRjZLZkpNTjFwS1hPUStyWnI2UkoxTTJVRHVHTmJxNUNHMHRMSGRJV1hlREF3SjgKU0VLN2hhcFhhUm9xVCt5RUFmcVp6NDBlWCsrbDFra2UKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBODRJeTlESVJUWUxyVzk3eDhLbzJkcWcxVlFpdlltQUFwcUdjc2d4ZkpCRXFPRnZtCm9WMVorSzBaWkNINEVZckEzYkNQcm5GOVFIMElDenVuajVzT21KUWlCVER5WG54TzNvT0dDMHVDM1RjQ01IK2EKaW9ISW9KNVprN0paSGRYOHdSb3F2SXMxbHkvTHBjbllROHJvNGpEdWlaUWR0MmNMS3U3ZHR0RjdXTEZpNzZKTwpYVDMxOHFWc0RFaDJUSVZ6UDZpMjNLa3d1TzRObjFyUzZMdk40K09HYThNcCtEMnFsTDN0cWFWYVNFa29maFR3CkMwT1RacVE5aDR0d24rQjFGTkt5Q0Q0SEdla1ZWWlpPNGwvMTNaTnMyK1Rud3drbjFYdWFkVXU0YXQ0cWc4RHYKQ2VzemFmaW96Ynh6QmZNanhuWS94M2NEWG1temZkckpIQy8zWndJREFRQUJBb0lCQUdhK1ZNbDhKcGpSMklTVworUFpXbTB4TmhOTXdLdkFUR2JNMUZXeDZrOW9mOC9SN3NqLzdwMjZwZXNFcEpBWWl5V1hBalo5SSsxUXViU3B3CkxTOEdlWTRmVW90bUw1MTJUY0ROTmMybU9yMGo3S1NSOHA3bVM4U1ppNm9wNGpnWWhlRGtMWXdJSU1COXhpdFoKa3dwbm53TnhLZlNhcmo4b0Z5b3lSeEpRS1A4dVpxSUl6ZnZodXIyWmVuOEJSSjdGMEhLK0duTVBWZWhGeG9BcwpER2FwdStCZzViY0tKazdjZHppd2l1VnVla2RoYXlHcFErVWRhY012M0JMZWN3OWhBVWxYUWdaYm45ZlVhblpBClBRallERG5JTE82eTJzNi82K2krRWFvbytkQkVkWjN1TXdkR3JSc2JwQ2pTc3JRbUFMM0FVa1ZVYXJZQWVac3QKcENsS0NZRUNnWUVBK3BMU0tTUktFM0tudTdYM0o3TVJROEQ2bnBpaWNuM3I4R2pBb2Vwam1xUzNRZEpHK2hscwpzczhhNlErSzVoUXpDYkovVXhZQjFUT1VIZWlHZGpoc01DUlFhWS96V0ZpNTJWZDF2dmF3aDdLMWJSc296M3d1CmF1b1lKTXNkODRnd1NONmFYL1FvSDZ1SXQzaHZ6QmNscVpTd3JncEU3UlpGdTZoME1qOGtNSkVDZ1lFQStNZzEKekJTemlWVjZBTmJ1U2F5QXJDTnBEb1FBSkhxRlFUQ25WUk1HaFpYdVZPVGlBdnFHL3c1NjlCckdsSERic3JWVApJSGozWk15bnhteHlwZXI5ZHl0MVUrOUwyT2JYNUhaT21XUUhPUGtYeDhWNkRhdTlrY1Y4bm04OHAvUEVUaUExClpsWWs4c1RwTVBNSEplTmFjdDFLNjVBSGRwUXNrQ1hxSWNkNUpIY0NnWUVBaUx0cGR3M1laamhna3l1K2pLbEkKT0lLcnY3Tm1vYmRZOGowWE1NT29TcENyZDMxNVFheHlCampCWklBWXVXZzRXWWhQdGxVQjl3ZElRZkhLdmVRWQpGVVVicEI3ckdVQ0JXYnBDQkV5MUU3ZFBEUlNPOW5tN0VwaGZTR1NXR1hndGNQWVhvMWltTkhIMERybm50NlRCCjVvRyt6NW5HOXVENmVHWjUwWmxtOUNFQ2dZQnU5SFF4NGVXMDBYK0pVbEtTWHpKQUU4YnVKMmNjM2R3Q21CMTUKTHZRUXJpN09oQXBkQTdramxpUzJMQjcyNDJMSTBHQVRzbis3NEI3UHUxeGlyV3lBTXN5d002Q2pTMGxzWm10bAp0QndZaDlmWVREWEVWUjFHSDBzV0treG1KNjBjbnZiUi9vZWFFc0ppQjNIZnJ3ZVBCUzA5NUUyLzBCUVQ4aVQ3CkRjajB2d0tCZ1FEMm5WeEl6djFqM3puUU9jYkxKYkI2NVVmcTRDY0MrQmZVekZWdjQ4NnpPRjVmM3ljZitGK0kKVFh5NG9Ccll1TitlL1JGOXNEOVpIZTJyMG5Ud0ZLb2oxOUtjWGlSVkxEaXBLWlBBOFVvY3YvVXVkRWRMamxpaApEeUpaRk5tN3FzZW80UWROOEpsZHNTcis3dWxvZjhNK3JvdFBPK2MzenNVRjJNR3NVaVVOZ1E9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:34:59 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-keyfile	NotFound
2021/04/09 01:34:59 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-mongodb-keyfile	NoError
2021/04/09 01:35:02 [SONAR-EVENT]	46	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1868","creationTimestamp":"2021-04-09T01:33:38Z","deletionTimestamp":"2021-04-09T01:34:52Z","deletionGracePeriodSeconds":30,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.4.4\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:43Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"hostIP":"192.168.96.3","podIP":"10.244.4.4","podIPs":[{"ip":"10.244.4.4"}],"startTime":"2021-04-09T01:33:41Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:42Z","finishedAt":"2021-04-09T01:33:42Z","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:48Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:35:05 [SONAR-EVENT]	47	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl-internal","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl-internal","uid":"13b6f2c7-5831-44f6-ad65-dafbcbd0f8d0","resourceVersion":"1994","creationTimestamp":"2021-04-09T01:34:47Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:47Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lRZFpjRThLUU42MVFVSzJERkNyNThDekFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16UTBOMW9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBU01SQXdEZ1lEVlFRS0V3ZFNiMjkwSUVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXBnbHVHckNLL1I2Q2pmMXJ4T2VkMzhvdVJETUhIWWhqUWs4SjBuekV1M2xUWXErSHNvbi8Kblpvd21iQlk4ckxlYW0vNU9pOU9TVW4wbmo5UzhlQks3aWw2dS9IOXJPT1hIUlpZbDFkYjBhNCswUkVaMWMrNApIOWRBcU01YTh6bHh1SUxrUkxzTlEzc3lDZkswbHZRZVRvUUlHNmVUK2gvQ1FsQkFMeUZqT3NZbnpQUWEvNjkrCkl0MllnR0FYMHdYV0QxUkpvR2d3Qy81UkYrUlN0aXJ1akZBT3IrajAxSVdWOWdHdlVna2FKajFTQm1JNjFIMFEKb0tSQUJYSUNkaVpOYjRWLzRpaVBEQU1QcjE5Q1ZobXVEQ0RJeVllbGhzcTFmTXhRODFxT2w5c3VPOGYwUWxicAp2eGcwdk9tU3BUdFB4a21kdnlIK1BHZmVibDdnejhCb2h3SURBUUFCbzB3d1NqQU9CZ05WSFE4QkFmOEVCQU1DCkFpUXdKd1lEVlIwbEJDQXdIZ1lJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQXpBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQmxMbkNNcUxYd2ZkdEZBMXJvR01pZgpWVTAzQkFETU1DQWpqWTF6N2tQVTRFMGpoTTZjM3VkOFo4a202ZmNnNFczdHNmL0piREF5YnBzOEFiZk10Nk42ClhvZHlyZC8ya0lUZHBzQktkTS9rb0NyYTR6UnJDTVlKWW9kS0J2aFNuY2d5MEI1SThkS1JreGc3NGJXeWMzVk0KOFNpTWszcUNRMDZHc1FTMHFzcU9nYVhKWkpXWUlQUzV6SW9sZ0ZrTE1wOEVadm1scTVyN1ovcHZYMzF4RjJMQgpTa2pzaEsvaDBxMUlaWlJIb2dQNExjT1B3bEhuYTRkbmJnd1hadm5RMGIwYVRRdjg4cFdaeStuMWZaMlFCME9XCm9QOG0wL285b0QzNCtxT04rUUwwMWdLZGV0dG5pSVlXRDdXOFhmbDB4RmRHNjZMQVN5QmxIaWNVTTFZMU9XUVAKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY1RENDQk15Z0F3SUJBZ0lSQUszTmtPWGJ1RW9LdEtLNHZGdklDYm93RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTTBORGRhR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VERU9NQXdHQTFVRUNoTUZVRk5OUkVJd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3CmdnRUtBb0lCQVFER2RobllUTzNZNm1vOFR5Mm1xNHVBYXpOOVBoaUVYQUZ6LzROdGp0NVlQLytXcHI5TlM2THgKbTNadHNpaUp4OWtEM3h5cGo3VlVrOTVNWkVkZThnNzc3aXY1VFRhYTVKMEE5eXNrSkhkU3RNQ3VzTDJrQ2hiYwpuRTVhWHRWeksrbVV5TVJ0Y3RScGk4MFhwbE0zS1RiNnVBaTBmZ203QjFPU0FUZi9JRkNaZmo4RStTS3Z5bEFTClVXQWVsS1dWUWo5M1VmbVRjSTN4WWYyYk02WTF2QnVZRHVRNFlGTENQSGtpZStJcFhMRFlxR2xBUjl2RnViY1AKN0hBK1FJRXI5MWlsVm9RZW1TSjRNUHdPMDZLL0dCQStUWlFUdmJiZFBhZTBUYVRRSGJEQ0JzS2JIY2ZqaGM0dApBeXR2SWpCckRhckt6WU51N0JaQVNhQUlKSWFTbWQ0dEFnTUJBQUdqZ2dNek1JSURMekFPQmdOVkhROEJBZjhFCkJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUMKTUFBd2dnTHVCZ05WSFJFRWdnTGxNSUlDNFlJSmJHOWpZV3hvYjNOMGdobHpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdnaUZ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NNM052CmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmgKYklJYktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0Y25Nd2dpTXFMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkSUkxS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRjbk13CkxtUmxabUYxYkhRdWMzWmpMbU5zZFhOMFpYSXViRzlqWVd5Q0hITnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmwKY2kxdGIyNW5iM09DSkhOdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJMgpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFcxdmJtZHZjeTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5CkxteHZZMkZzZ2g0cUxuTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzT0NKaW91YzI5dVlYSXQKYlc5dVoyOWtZaTFqYkhWemRHVnlMVzF2Ym1kdmN5NWtaV1poZFd4MGdqZ3FMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYklJWmMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVo0SWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWsKWldaaGRXeDBnak56YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIUXVjM1pqTG1OcwpkWE4wWlhJdWJHOWpZV3lDR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMV05tWjRJaktpNXpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWoKYkhWemRHVnlMV05tWnk1a1pXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQkFRQUdIYlQ5RGV1TU1rS290aEs5U3kvc0NvMWJSRldsQVZ3WFJ6czA4UVBFVlc4Y3NDU3FDOHBMCmxWVlhxdDgxOUdReFlzYUFiUUhEQ3RxanFwWEJmeldIZEJzWksxeTFrRHcyR25OQ01sempnZ3RJN3h3TzRnYm4KUTRvYkVGeWpxL0JZeGkzNUUvZHFkK2NWYlYrVE80WVdnVWR1aVk0NTY1QzFYRkxBV3NnUEZEOWo0bkpyS1hmbwpNQjZtVmd6ZFFRZk1rNUNpdEt4eFpyU0p4dVNaRkFOVFU5NjFJMk9IMGNpcXpOc3FWTnR1TFBNaVl6djBmcVBGCjhmRUFyL3gvSS9Ja29iWWFlQmlNSEU2cGJ0eFNRTGhuZDl3K0lIQmR5S2lxTFNkQmQwTFh5ZUNFdFU0VkphN1YKTDJyLzAzY2ZwUUMxNUU5L3o4QWVBM0lGWVArd01CSEIKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeG5ZWjJFenQyT3BxUEU4dHBxdUxnR3N6ZlQ0WWhGd0JjLytEYlk3ZVdELy9scWEvClRVdWk4WnQyYmJJb2ljZlpBOThjcVkrMVZKUGVUR1JIWHZJTysrNHIrVTAybXVTZEFQY3JKQ1IzVXJUQXJyQzkKcEFvVzNKeE9XbDdWY3l2cGxNakViWExVYVl2TkY2WlROeWsyK3JnSXRINEp1d2RUa2dFMy95QlFtWDQvQlBraQpyOHBRRWxGZ0hwU2xsVUkvZDFINWszQ044V0g5bXpPbU5id2JtQTdrT0dCU3dqeDVJbnZpS1Z5dzJLaHBRRWZiCnhibTNEK3h3UGtDQksvZFlwVmFFSHBraWVERDhEdE9pdnhnUVBrMlVFNzIyM1QybnRFMmswQjJ3d2diQ214M0gKNDRYT0xRTXJieUl3YXcycXlzMkRidXdXUUVtZ0NDU0drcG5lTFFJREFRQUJBb0lCQUEvWmlzTGRrZmxLNzJVVgpwYjJ6NFpaRitYeTlJdFFmVFBab3A2UnVUbytadk4zWlAxbjYrbTUxVGdZQXZvQVNkK0I1Ung2N25XMjl5WGtzCllRN1NJaVE0cDBabnhqNmtsMjFtVUFtNDU5YXhITnBXdnk2RXA4TENzUGRDcjZWZEVuQ1JnQzZGaHpWT3R2aDIKamhyUHJkWmtNRDNKK3hqMnd0UGNTUTZWRkJyTitDS2RiengwQU1XZXY5UHM2eXFFcXUrN0Q2L1lQdjVKTzZzTQo0UVN4SU10Z3ZnZzBJcmEvVVEwZ3FQUytNSHRvdHFVcDNkNFJQaEJNS2VJS3hFdFFxcThUVUJtKzhDK3oxUHZECnhsUUg1cmxjMUxZazQ1NEJuNFFJWjNnVGFReEJaMGhnNWFDVkVwVXFBTjZOZDZVbnZwY3NVMjNKdTB6RWtKWmQKWFBDVHhMa0NnWUVBeXVXdTNpVzMvS2IwclNyVE9oeUhDdWwzMFlGbUg3NEhJbk9jeXdMR1ZyMUtHUCs0cWN5cwpQb3dLVzVCc2lVcGlrbHVNaVZrTlhUQzFMVFUxQkNrSXA4UnJERyt5ODYwR2gzZVNTa3JiL1c0U2NNVkoraVY1Cjl5bkM1NHBEUGYvd1liUFc0WlpNSG94T25VeElRN0VWRDlISVFuWXRKcWd6aFQxbTFzM1IvVHNDZ1lFQSttYzEKMUlucHhJVWMyU3JqL3RHbzEyaDcrNFJsMmwyYVdFRktLUllZYkUwTUlvZXYxUWlqSGt1ZnNaSUkxL0xHZVAyTgpyNy8ybDJ5bnY0MTJ5RlNSRTB6UlNxSWhxVzVVK1hQbmlscE05YkxPOFhlbm1DKzdNOVhGVytxajZCQWdreGpFCkhJVStPZ2pDV0xLN0dlUEZXKzQzSFJEQTF0SVo4NFVZRzZ0UCs3Y0NnWUFleEdtYUFqbytNOHNTbjFYY2tBcmkKV3JqeXFoNmtYWnFUWE5pLzZESFBZWERsRFpJaEhZcFpDYjlnVnl3K1BXdHBLanpMYnhlWnRCTWxRZFpDUlQ2cwp3aHBCam9haWNQQjJobWxHbnNkeFRNbTdGQSs5d1FVWHQ5dDRaUDBCWDloQjJKV1RLOGxyTUhlVFhzZnVpK0hYCnZrWVIzZjNHeU9iWEk1SityRU5WbFFLQmdRRFJ5TXBtaUN5YmdsSUs5MDRRWEtLeDVVMktDUUEwRkJ1Tk9SWGkKbWlwWUFhemErUWFzMmhHZS9naUtnaWg2azJFSVdKVHQyMHZDelRzMDFsWGZ2RW5XKzVLVWpvVFpLQ0IwNVUvawpyNGF1aWVHcWwyNkhwK1dVcGRJMUViM0VYRTZPTGorUERXcDJ3SVBpUDh0VkEyaURmbTRhSWNFTnVQUVkremFaClo4c1l2UUtCZ1FDbGdJN0Z6OUFuUVJLTVVOREoybzVJOUsxYXUwUVg1Vk1HeVZJTVBycDNWNGdwYSs4L0g1VUMKakEwd1VFR1NKaGsralBtTFVDYXR3SVdJOHN0cHNUcWVRNm8reFJVRGJIcWs5bjZzR0JpellqNEs2YXU2UWNtLworVFRzVG9YYWxpMkI4V0QvSC8raHVyUVZraGs0NEF0UGlMZUlvOUxQU1N1eFlUQXV6dWI3M2c9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:35:08 [SONAR-EVENT]	48	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1869","creationTimestamp":"2021-04-09T01:33:18Z","deletionTimestamp":"2021-04-09T01:34:52Z","deletionGracePeriodSeconds":30,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.5.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:23Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"hostIP":"192.168.96.4","podIP":"10.244.5.3","podIPs":[{"ip":"10.244.5.3"}],"startTime":"2021-04-09T01:33:20Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:22Z","finishedAt":"2021-04-09T01:33:22Z","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:28Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:35:11 [SONAR-EVENT]	49	Deleted	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl-internal","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl-internal","uid":"13b6f2c7-5831-44f6-ad65-dafbcbd0f8d0","resourceVersion":"1996","creationTimestamp":"2021-04-09T01:34:47Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:47Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lRZFpjRThLUU42MVFVSzJERkNyNThDekFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16UTBOMW9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBU01SQXdEZ1lEVlFRS0V3ZFNiMjkwSUVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXBnbHVHckNLL1I2Q2pmMXJ4T2VkMzhvdVJETUhIWWhqUWs4SjBuekV1M2xUWXErSHNvbi8Kblpvd21iQlk4ckxlYW0vNU9pOU9TVW4wbmo5UzhlQks3aWw2dS9IOXJPT1hIUlpZbDFkYjBhNCswUkVaMWMrNApIOWRBcU01YTh6bHh1SUxrUkxzTlEzc3lDZkswbHZRZVRvUUlHNmVUK2gvQ1FsQkFMeUZqT3NZbnpQUWEvNjkrCkl0MllnR0FYMHdYV0QxUkpvR2d3Qy81UkYrUlN0aXJ1akZBT3IrajAxSVdWOWdHdlVna2FKajFTQm1JNjFIMFEKb0tSQUJYSUNkaVpOYjRWLzRpaVBEQU1QcjE5Q1ZobXVEQ0RJeVllbGhzcTFmTXhRODFxT2w5c3VPOGYwUWxicAp2eGcwdk9tU3BUdFB4a21kdnlIK1BHZmVibDdnejhCb2h3SURBUUFCbzB3d1NqQU9CZ05WSFE4QkFmOEVCQU1DCkFpUXdKd1lEVlIwbEJDQXdIZ1lJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQXpBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQmxMbkNNcUxYd2ZkdEZBMXJvR01pZgpWVTAzQkFETU1DQWpqWTF6N2tQVTRFMGpoTTZjM3VkOFo4a202ZmNnNFczdHNmL0piREF5YnBzOEFiZk10Nk42ClhvZHlyZC8ya0lUZHBzQktkTS9rb0NyYTR6UnJDTVlKWW9kS0J2aFNuY2d5MEI1SThkS1JreGc3NGJXeWMzVk0KOFNpTWszcUNRMDZHc1FTMHFzcU9nYVhKWkpXWUlQUzV6SW9sZ0ZrTE1wOEVadm1scTVyN1ovcHZYMzF4RjJMQgpTa2pzaEsvaDBxMUlaWlJIb2dQNExjT1B3bEhuYTRkbmJnd1hadm5RMGIwYVRRdjg4cFdaeStuMWZaMlFCME9XCm9QOG0wL285b0QzNCtxT04rUUwwMWdLZGV0dG5pSVlXRDdXOFhmbDB4RmRHNjZMQVN5QmxIaWNVTTFZMU9XUVAKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY1RENDQk15Z0F3SUJBZ0lSQUszTmtPWGJ1RW9LdEtLNHZGdklDYm93RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTTBORGRhR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VERU9NQXdHQTFVRUNoTUZVRk5OUkVJd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3CmdnRUtBb0lCQVFER2RobllUTzNZNm1vOFR5Mm1xNHVBYXpOOVBoaUVYQUZ6LzROdGp0NVlQLytXcHI5TlM2THgKbTNadHNpaUp4OWtEM3h5cGo3VlVrOTVNWkVkZThnNzc3aXY1VFRhYTVKMEE5eXNrSkhkU3RNQ3VzTDJrQ2hiYwpuRTVhWHRWeksrbVV5TVJ0Y3RScGk4MFhwbE0zS1RiNnVBaTBmZ203QjFPU0FUZi9JRkNaZmo4RStTS3Z5bEFTClVXQWVsS1dWUWo5M1VmbVRjSTN4WWYyYk02WTF2QnVZRHVRNFlGTENQSGtpZStJcFhMRFlxR2xBUjl2RnViY1AKN0hBK1FJRXI5MWlsVm9RZW1TSjRNUHdPMDZLL0dCQStUWlFUdmJiZFBhZTBUYVRRSGJEQ0JzS2JIY2ZqaGM0dApBeXR2SWpCckRhckt6WU51N0JaQVNhQUlKSWFTbWQ0dEFnTUJBQUdqZ2dNek1JSURMekFPQmdOVkhROEJBZjhFCkJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUMKTUFBd2dnTHVCZ05WSFJFRWdnTGxNSUlDNFlJSmJHOWpZV3hvYjNOMGdobHpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdnaUZ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NNM052CmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmgKYklJYktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0Y25Nd2dpTXFMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkSUkxS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRjbk13CkxtUmxabUYxYkhRdWMzWmpMbU5zZFhOMFpYSXViRzlqWVd5Q0hITnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmwKY2kxdGIyNW5iM09DSkhOdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJMgpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFcxdmJtZHZjeTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5CkxteHZZMkZzZ2g0cUxuTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzT0NKaW91YzI5dVlYSXQKYlc5dVoyOWtZaTFqYkhWemRHVnlMVzF2Ym1kdmN5NWtaV1poZFd4MGdqZ3FMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYklJWmMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVo0SWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWsKWldaaGRXeDBnak56YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIUXVjM1pqTG1OcwpkWE4wWlhJdWJHOWpZV3lDR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMV05tWjRJaktpNXpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWoKYkhWemRHVnlMV05tWnk1a1pXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQkFRQUdIYlQ5RGV1TU1rS290aEs5U3kvc0NvMWJSRldsQVZ3WFJ6czA4UVBFVlc4Y3NDU3FDOHBMCmxWVlhxdDgxOUdReFlzYUFiUUhEQ3RxanFwWEJmeldIZEJzWksxeTFrRHcyR25OQ01sempnZ3RJN3h3TzRnYm4KUTRvYkVGeWpxL0JZeGkzNUUvZHFkK2NWYlYrVE80WVdnVWR1aVk0NTY1QzFYRkxBV3NnUEZEOWo0bkpyS1hmbwpNQjZtVmd6ZFFRZk1rNUNpdEt4eFpyU0p4dVNaRkFOVFU5NjFJMk9IMGNpcXpOc3FWTnR1TFBNaVl6djBmcVBGCjhmRUFyL3gvSS9Ja29iWWFlQmlNSEU2cGJ0eFNRTGhuZDl3K0lIQmR5S2lxTFNkQmQwTFh5ZUNFdFU0VkphN1YKTDJyLzAzY2ZwUUMxNUU5L3o4QWVBM0lGWVArd01CSEIKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBeG5ZWjJFenQyT3BxUEU4dHBxdUxnR3N6ZlQ0WWhGd0JjLytEYlk3ZVdELy9scWEvClRVdWk4WnQyYmJJb2ljZlpBOThjcVkrMVZKUGVUR1JIWHZJTysrNHIrVTAybXVTZEFQY3JKQ1IzVXJUQXJyQzkKcEFvVzNKeE9XbDdWY3l2cGxNakViWExVYVl2TkY2WlROeWsyK3JnSXRINEp1d2RUa2dFMy95QlFtWDQvQlBraQpyOHBRRWxGZ0hwU2xsVUkvZDFINWszQ044V0g5bXpPbU5id2JtQTdrT0dCU3dqeDVJbnZpS1Z5dzJLaHBRRWZiCnhibTNEK3h3UGtDQksvZFlwVmFFSHBraWVERDhEdE9pdnhnUVBrMlVFNzIyM1QybnRFMmswQjJ3d2diQ214M0gKNDRYT0xRTXJieUl3YXcycXlzMkRidXdXUUVtZ0NDU0drcG5lTFFJREFRQUJBb0lCQUEvWmlzTGRrZmxLNzJVVgpwYjJ6NFpaRitYeTlJdFFmVFBab3A2UnVUbytadk4zWlAxbjYrbTUxVGdZQXZvQVNkK0I1Ung2N25XMjl5WGtzCllRN1NJaVE0cDBabnhqNmtsMjFtVUFtNDU5YXhITnBXdnk2RXA4TENzUGRDcjZWZEVuQ1JnQzZGaHpWT3R2aDIKamhyUHJkWmtNRDNKK3hqMnd0UGNTUTZWRkJyTitDS2RiengwQU1XZXY5UHM2eXFFcXUrN0Q2L1lQdjVKTzZzTQo0UVN4SU10Z3ZnZzBJcmEvVVEwZ3FQUytNSHRvdHFVcDNkNFJQaEJNS2VJS3hFdFFxcThUVUJtKzhDK3oxUHZECnhsUUg1cmxjMUxZazQ1NEJuNFFJWjNnVGFReEJaMGhnNWFDVkVwVXFBTjZOZDZVbnZwY3NVMjNKdTB6RWtKWmQKWFBDVHhMa0NnWUVBeXVXdTNpVzMvS2IwclNyVE9oeUhDdWwzMFlGbUg3NEhJbk9jeXdMR1ZyMUtHUCs0cWN5cwpQb3dLVzVCc2lVcGlrbHVNaVZrTlhUQzFMVFUxQkNrSXA4UnJERyt5ODYwR2gzZVNTa3JiL1c0U2NNVkoraVY1Cjl5bkM1NHBEUGYvd1liUFc0WlpNSG94T25VeElRN0VWRDlISVFuWXRKcWd6aFQxbTFzM1IvVHNDZ1lFQSttYzEKMUlucHhJVWMyU3JqL3RHbzEyaDcrNFJsMmwyYVdFRktLUllZYkUwTUlvZXYxUWlqSGt1ZnNaSUkxL0xHZVAyTgpyNy8ybDJ5bnY0MTJ5RlNSRTB6UlNxSWhxVzVVK1hQbmlscE05YkxPOFhlbm1DKzdNOVhGVytxajZCQWdreGpFCkhJVStPZ2pDV0xLN0dlUEZXKzQzSFJEQTF0SVo4NFVZRzZ0UCs3Y0NnWUFleEdtYUFqbytNOHNTbjFYY2tBcmkKV3JqeXFoNmtYWnFUWE5pLzZESFBZWERsRFpJaEhZcFpDYjlnVnl3K1BXdHBLanpMYnhlWnRCTWxRZFpDUlQ2cwp3aHBCam9haWNQQjJobWxHbnNkeFRNbTdGQSs5d1FVWHQ5dDRaUDBCWDloQjJKV1RLOGxyTUhlVFhzZnVpK0hYCnZrWVIzZjNHeU9iWEk1SityRU5WbFFLQmdRRFJ5TXBtaUN5YmdsSUs5MDRRWEtLeDVVMktDUUEwRkJ1Tk9SWGkKbWlwWUFhemErUWFzMmhHZS9naUtnaWg2azJFSVdKVHQyMHZDelRzMDFsWGZ2RW5XKzVLVWpvVFpLQ0IwNVUvawpyNGF1aWVHcWwyNkhwK1dVcGRJMUViM0VYRTZPTGorUERXcDJ3SVBpUDh0VkEyaURmbTRhSWNFTnVQUVkremFaClo4c1l2UUtCZ1FDbGdJN0Z6OUFuUVJLTVVOREoybzVJOUsxYXUwUVg1Vk1HeVZJTVBycDNWNGdwYSs4L0g1VUMKakEwd1VFR1NKaGsralBtTFVDYXR3SVdJOHN0cHNUcWVRNm8reFJVRGJIcWs5bjZzR0JpellqNEs2YXU2UWNtLworVFRzVG9YYWxpMkI4V0QvSC8raHVyUVZraGs0NEF0UGlMZUlvOUxQU1N1eFlUQXV6dWI3M2c9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:35:14 [SONAR-EVENT]	50	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1899","creationTimestamp":"2021-04-09T01:32:57Z","deletionTimestamp":"2021-04-09T01:34:22Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:03Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T01:33:00Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:02Z","finishedAt":"2021-04-09T01:33:02Z","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:08Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:35:17 [SONAR-EVENT]	51	Deleted	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl","uid":"75923f66-b8c4-4262-ab5b-0fc63078aeb1","resourceVersion":"1995","creationTimestamp":"2021-04-09T01:34:46Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:46Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lRSko5aWNoZVl1YUdYWHdPZndSOS9DakFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16UTBObG9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBU01SQXdEZ1lEVlFRS0V3ZFNiMjkwSUVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXVINjF1S3VjOGZpNmtyS2pMYXRmU3VvZ2JHTWFyaUVqNUJJd2ZTR3NrZTZrRllVdFlrQkMKZHpGZWYvU2tXZi9hZDFxa1BCTzUxRGVjQ09rYkUrMG5SMlltUmJ4eDVqbzVocklrSm53S2ZyTXQ1UERlcjkrNQpJaG1WMDVMR2lNdkhEdWprTStlYWJ1ZjA2L0FaUWV3dmtEYURCbFVSSlA4NjJLemFsZ3M5OGVZR0xxQm94VG5KCnhod3R3dnZLQVV3YXdLblJESytneXBSTCs0Q2N2ZVpjRzhDYlBaZmJyQUVhMVFXWndBb1hIdWxVNXpvcTJBWUMKTnc3QVo4R2dldzZqL29zL3d5emxoQjhpNTQ1UTlXOHBIUFNJSnVQQWdreU5hSUZBSDNvMjlIMXlidVhCZVEvbApZVU1LTVlwOHJxcmpTcUJINm0rZllDZ2pNdHU1YUpJcHR3SURBUUFCbzB3d1NqQU9CZ05WSFE4QkFmOEVCQU1DCkFpUXdKd1lEVlIwbEJDQXdIZ1lJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQXpBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ2gwNFo4clJyNFo0SUhuVy82K1NjNQozODVoZ1kzaXp5QmxGUGFMbndST3NUaXpNWFJONXRnUFZtSjg1MXVSUHJmNmpzWUlQMmp5dVpIM1ZLbm91RlB5CjNDUjZPdEorUWd5emFPZzZyeXc1MUN4dGRROExteWtrcitGemloWHpxMzlIMFNaNDNMVk10ZWJueTR1V3BES3AKbDZ2RmpwMGY4TGc0NUczNGc5LzhNcU5DNzlkS2RjSjFWMEJ4NE1YSVFUR215K0tSUUxzaWlzWHJCbTFwa2ppaQo0cXAyUzZDamJHR2ZJS0ZEMmxKN2NER0tVV1FzYjRvSkpBcEtoVXdwRDRLWlhmTkNNdSs0ckRkaGRERTlIbVFxCkxKdVoyZitNekF1bVUrQ1NYNWgvaUk3RThDVGEwZDJETjEzYWY1UDNrdW50cXkzc082dk1OT04xdXZDa0taK2gKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY1RENDQk15Z0F3SUJBZ0lSQVBWOWNWaEVtZFo1S2FRdDExRWl1NG93RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTTBORFphR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VERU9NQXdHQTFVRUNoTUZVRk5OUkVJd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3CmdnRUtBb0lCQVFEemdqTDBNaEZOZ3V0YjN2SHdxaloycURWVkNLOWlZQUNtb1p5eURGOGtFU280VythaFhWbjQKclJsa0lmZ1Jpc0Rkc0krdWNYMUFmUWdMTzZlUG13NllsQ0lGTVBKZWZFN2VnNFlMUzRMZE53SXdmNXFLZ2NpZwpubG1Uc2xrZDFmekJHaXE4aXpXWEw4dWx5ZGhEeXVqaU1PNkpsQjIzWndzcTd0MjIwWHRZc1dMdm9rNWRQZlh5CnBXd01TSFpNaFhNL3FMYmNxVEM0N2cyZld0TG91ODNqNDRacnd5bjRQYXFVdmUycHBWcElTU2grRlBBTFE1Tm0KcEQySGkzQ2Y0SFVVMHJJSVBnY1o2UlZWbGs3aVgvWGRrMnpiNU9mRENTZlZlNXAxUzdocTNpcUR3TzhKNnpOcAorS2pOdkhNRjh5UEdkai9IZHdOZWFiTjkyc2tjTC9kbkFnTUJBQUdqZ2dNek1JSURMekFPQmdOVkhROEJBZjhFCkJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUMKTUFBd2dnTHVCZ05WSFJFRWdnTGxNSUlDNFlJSmJHOWpZV3hvYjNOMGdobHpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdnaUZ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NNM052CmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmgKYklJYktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0Y25Nd2dpTXFMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkSUkxS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRjbk13CkxtUmxabUYxYkhRdWMzWmpMbU5zZFhOMFpYSXViRzlqWVd5Q0hITnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmwKY2kxdGIyNW5iM09DSkhOdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJMgpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFcxdmJtZHZjeTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5CkxteHZZMkZzZ2g0cUxuTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzT0NKaW91YzI5dVlYSXQKYlc5dVoyOWtZaTFqYkhWemRHVnlMVzF2Ym1kdmN5NWtaV1poZFd4MGdqZ3FMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYklJWmMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVo0SWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWsKWldaaGRXeDBnak56YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIUXVjM1pqTG1OcwpkWE4wWlhJdWJHOWpZV3lDR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMV05tWjRJaktpNXpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWoKYkhWemRHVnlMV05tWnk1a1pXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQkFRQ2l0MzI0QTB4M3BlOC90RnZXQjlqQTZsZm5mRzk0R2R6MlpUaG5iTmUvQnRGQjJzU2pMTnlSCnRMOHREVUdaWjNYazdOcDJKcjBtNEJTQ0UwMnJ0SUI5WmVLL2NnZHlKbDljc1dveWM1Yjl1YXlnZHVnZEtVUWkKS2hiRmJnSGdEMHIxN3BGbFJlZzlidFNROVRkWHgrMDVJRzF1MVRjVVhBd0tvTVJQV0RSbzY4WUFFYWNLT2hjSQptMFNIYzc3OUhjRldBSXY4RG1YWk14aXo2RVoyR09xalZBMmFQVGxqeWFINXFycGdsQW8yaDVQK3F0b3h2TmNuClJ5bjVWd05SNnBwaXBKMU9jRjZLZkpNTjFwS1hPUStyWnI2UkoxTTJVRHVHTmJxNUNHMHRMSGRJV1hlREF3SjgKU0VLN2hhcFhhUm9xVCt5RUFmcVp6NDBlWCsrbDFra2UKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBODRJeTlESVJUWUxyVzk3eDhLbzJkcWcxVlFpdlltQUFwcUdjc2d4ZkpCRXFPRnZtCm9WMVorSzBaWkNINEVZckEzYkNQcm5GOVFIMElDenVuajVzT21KUWlCVER5WG54TzNvT0dDMHVDM1RjQ01IK2EKaW9ISW9KNVprN0paSGRYOHdSb3F2SXMxbHkvTHBjbllROHJvNGpEdWlaUWR0MmNMS3U3ZHR0RjdXTEZpNzZKTwpYVDMxOHFWc0RFaDJUSVZ6UDZpMjNLa3d1TzRObjFyUzZMdk40K09HYThNcCtEMnFsTDN0cWFWYVNFa29maFR3CkMwT1RacVE5aDR0d24rQjFGTkt5Q0Q0SEdla1ZWWlpPNGwvMTNaTnMyK1Rud3drbjFYdWFkVXU0YXQ0cWc4RHYKQ2VzemFmaW96Ynh6QmZNanhuWS94M2NEWG1temZkckpIQy8zWndJREFRQUJBb0lCQUdhK1ZNbDhKcGpSMklTVworUFpXbTB4TmhOTXdLdkFUR2JNMUZXeDZrOW9mOC9SN3NqLzdwMjZwZXNFcEpBWWl5V1hBalo5SSsxUXViU3B3CkxTOEdlWTRmVW90bUw1MTJUY0ROTmMybU9yMGo3S1NSOHA3bVM4U1ppNm9wNGpnWWhlRGtMWXdJSU1COXhpdFoKa3dwbm53TnhLZlNhcmo4b0Z5b3lSeEpRS1A4dVpxSUl6ZnZodXIyWmVuOEJSSjdGMEhLK0duTVBWZWhGeG9BcwpER2FwdStCZzViY0tKazdjZHppd2l1VnVla2RoYXlHcFErVWRhY012M0JMZWN3OWhBVWxYUWdaYm45ZlVhblpBClBRallERG5JTE82eTJzNi82K2krRWFvbytkQkVkWjN1TXdkR3JSc2JwQ2pTc3JRbUFMM0FVa1ZVYXJZQWVac3QKcENsS0NZRUNnWUVBK3BMU0tTUktFM0tudTdYM0o3TVJROEQ2bnBpaWNuM3I4R2pBb2Vwam1xUzNRZEpHK2hscwpzczhhNlErSzVoUXpDYkovVXhZQjFUT1VIZWlHZGpoc01DUlFhWS96V0ZpNTJWZDF2dmF3aDdLMWJSc296M3d1CmF1b1lKTXNkODRnd1NONmFYL1FvSDZ1SXQzaHZ6QmNscVpTd3JncEU3UlpGdTZoME1qOGtNSkVDZ1lFQStNZzEKekJTemlWVjZBTmJ1U2F5QXJDTnBEb1FBSkhxRlFUQ25WUk1HaFpYdVZPVGlBdnFHL3c1NjlCckdsSERic3JWVApJSGozWk15bnhteHlwZXI5ZHl0MVUrOUwyT2JYNUhaT21XUUhPUGtYeDhWNkRhdTlrY1Y4bm04OHAvUEVUaUExClpsWWs4c1RwTVBNSEplTmFjdDFLNjVBSGRwUXNrQ1hxSWNkNUpIY0NnWUVBaUx0cGR3M1laamhna3l1K2pLbEkKT0lLcnY3Tm1vYmRZOGowWE1NT29TcENyZDMxNVFheHlCampCWklBWXVXZzRXWWhQdGxVQjl3ZElRZkhLdmVRWQpGVVVicEI3ckdVQ0JXYnBDQkV5MUU3ZFBEUlNPOW5tN0VwaGZTR1NXR1hndGNQWVhvMWltTkhIMERybm50NlRCCjVvRyt6NW5HOXVENmVHWjUwWmxtOUNFQ2dZQnU5SFF4NGVXMDBYK0pVbEtTWHpKQUU4YnVKMmNjM2R3Q21CMTUKTHZRUXJpN09oQXBkQTdramxpUzJMQjcyNDJMSTBHQVRzbis3NEI3UHUxeGlyV3lBTXN5d002Q2pTMGxzWm10bAp0QndZaDlmWVREWEVWUjFHSDBzV0treG1KNjBjbnZiUi9vZWFFc0ppQjNIZnJ3ZVBCUzA5NUUyLzBCUVQ4aVQ3CkRjajB2d0tCZ1FEMm5WeEl6djFqM3puUU9jYkxKYkI2NVVmcTRDY0MrQmZVekZWdjQ4NnpPRjVmM3ljZitGK0kKVFh5NG9Ccll1TitlL1JGOXNEOVpIZTJyMG5Ud0ZLb2oxOUtjWGlSVkxEaXBLWlBBOFVvY3YvVXVkRWRMamxpaApEeUpaRk5tN3FzZW80UWROOEpsZHNTcis3dWxvZjhNK3JvdFBPK2MzenNVRjJNR3NVaVVOZ1E9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:35:17 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-encryption-key	NoError
2021/04/09 01:35:20 [SONAR-EVENT]	52	Deleted	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"ea4ef890-755d-4c49-982a-0c4fbc3bd3ca","resourceVersion":"1900","creationTimestamp":"2021-04-09T01:32:57Z","deletionTimestamp":"2021-04-09T01:34:22Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:32:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:03Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:00Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T01:33:00Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:02Z","finishedAt":"2021-04-09T01:33:02Z","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5e37fe999e4a7214a4f527be4f7ff95b15b0d12d7dbe626c89ac1d9f034054ca"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:08Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://974ccf23d21bc2f982ad19278b4faf062345c23e6e8692ef39bdce0c1a307e19","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:35:23 [SONAR-EVENT]	53	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-mongodb-keyfile","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-mongodb-keyfile","uid":"289fdf2c-2e2a-49c8-a0af-f37db02e3d8d","resourceVersion":"2040","creationTimestamp":"2021-04-09T01:34:59Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:mongodb-key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"mongodb-key":"VnQ5VC9McFhGZ3dwRDJUYXoyZEE0cDBqckl1MzFnZVJhd2Vyc3dGV1h4cHR1TFk2dUJFNjNEUWF1RXdIM3JYUEJOazJCVUtTajdRMmVRck0rblRGUGFOMEVRTUVTTGxZZ3l0Y3d1UldYd1FYSVcwL081Ymp6LytYeTBHNm1TcFoxcVRKSlhXNSt1ampVaXhET2ZTdGY0cFJBbFJuZEFDZXJlUUhBRFQxdW9pbTd2WGtUaFhlbnFCeXR2TWRPN3h3K3hvbFZ6d1JhbEdTT09lZUdFK2o2RFV1N2xYOFFZam82aHZhVHAyU0xrOWN6cnF1V3ZaWm5LSUhFZWptVklQVnBMakRuNkxESXREN1o2MkRydFNrWmpNS1c4TGI0ZVZCbDBlbFZ1UElqbWZ0UUNTUjk1cVRkUGpsMGs1UDBVeUhFTE9vc0pRUlRvV2IwUUR0bWdxZi9raDEwQnk3VVYzQm90d0hwb2J3a3RxRzRBcFBUcVBmd1NUMGNKVlNPMWZMRllDOEdSdmVWRzlSY2VrQXl2dkJQdnlCbnh2UDYyampKRmFWdE5ONjhOWEJHOENEbHJDcHBRVnU5Mm1JVUJ4bEtScmRXRFdXL2dyKzNrR0YvaVFwVVFVYUpnS3VBY1dYN3FDN29ocnJ2NkhXdkcrTWp2NUxpV1Nlc05odlRlZVlwR0x2M3dURG16QXVMem5Wa3NMMCtsQjN5QTBZS2xTZ21va1NuS09LRnpzcklPSGZYRFJBZ0dldjliSVpLZkh0bkNsT2U2cnBQWWxJcDQvUTFPTVJzTVF5UHh4OFduVzVGOGlzeTAwaXJyQVdtQXA0MEVGU05Ja1FFYlFHQ1hlZ042Rjc5c3pnL0Z4QnhDZHRDa1ptSTBsWWJGMG10VXBkRXd5UXBBS1JDUEo5RjN1MEk1T2dFVkNBOEdpUEhZbmVmNDlXUjkrNllITmhhZE5BU28vUFZmMTlxTjE1dHNIcWY4SzFXUnF3MUo0bUV1VXhMM3lXL0VEMXJxY1AwZ1R5QW83QktVSytFVUdReE5wUSt1cFZ6V0lkTmZwVWcvTUFPcjd1aGJLamZsWUFJS0lhMDR4OFF6aU1TbkY3L1B1N09wU3I3c0hUQVNDWnBrUEZBRW96Yk9JdjM2WnM0aFVmbmZPL2pjZUprdnBuUEliV2xiaGp0Z05Zbno5ZmpCdE4wUzlHWWF3eS80R2c1MjlUMVJ2QTdjYXFBSFhvZXFQekNsSlVLRktrYlA1M2FpM09oSEg4ZTZ5SHJQQWp6eWIwdHdGVFZZTXA2VmtZbEFvSDdyU2VsWkRqWTM0ejkrdHg1NDJncTZSWC93aXd5VHJYMFJ2VnZsTE8rRkFueFloQg=="},"type":"Opaque"}
2021/04/09 01:35:26 [SONAR-EVENT]	54	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1905","creationTimestamp":"2021-04-09T01:33:38Z","deletionTimestamp":"2021-04-09T01:34:22Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.4.4\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:43Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"hostIP":"192.168.96.3","podIP":"10.244.4.4","podIPs":[{"ip":"10.244.4.4"}],"startTime":"2021-04-09T01:33:41Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:42Z","finishedAt":"2021-04-09T01:33:42Z","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:48Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:35:26 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:35:29 [SONAR-EVENT]	55	Added	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","resourceVersion":"2124","generation":1,"creationTimestamp":"2021-04-09T01:35:22Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:35:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:allowUnsafeConfigurations":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:restartOnFailure":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:hostPort":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{},"f:redactClientLogData":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:directoryForIndexes":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:enabled":{},"f:image":{},"f:serverHost":{}},"f:replsets":{},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{}}
2021/04/09 01:35:32 [SONAR-EVENT]	56	Deleted	secret	{"metadata":{"name":"sonar-mongodb-cluster-mongodb-keyfile","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-mongodb-keyfile","uid":"289fdf2c-2e2a-49c8-a0af-f37db02e3d8d","resourceVersion":"2041","creationTimestamp":"2021-04-09T01:34:59Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"d0cb3e3e-d056-4474-ab65-915ad0243650","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:mongodb-key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"d0cb3e3e-d056-4474-ab65-915ad0243650\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"mongodb-key":"VnQ5VC9McFhGZ3dwRDJUYXoyZEE0cDBqckl1MzFnZVJhd2Vyc3dGV1h4cHR1TFk2dUJFNjNEUWF1RXdIM3JYUEJOazJCVUtTajdRMmVRck0rblRGUGFOMEVRTUVTTGxZZ3l0Y3d1UldYd1FYSVcwL081Ymp6LytYeTBHNm1TcFoxcVRKSlhXNSt1ampVaXhET2ZTdGY0cFJBbFJuZEFDZXJlUUhBRFQxdW9pbTd2WGtUaFhlbnFCeXR2TWRPN3h3K3hvbFZ6d1JhbEdTT09lZUdFK2o2RFV1N2xYOFFZam82aHZhVHAyU0xrOWN6cnF1V3ZaWm5LSUhFZWptVklQVnBMakRuNkxESXREN1o2MkRydFNrWmpNS1c4TGI0ZVZCbDBlbFZ1UElqbWZ0UUNTUjk1cVRkUGpsMGs1UDBVeUhFTE9vc0pRUlRvV2IwUUR0bWdxZi9raDEwQnk3VVYzQm90d0hwb2J3a3RxRzRBcFBUcVBmd1NUMGNKVlNPMWZMRllDOEdSdmVWRzlSY2VrQXl2dkJQdnlCbnh2UDYyampKRmFWdE5ONjhOWEJHOENEbHJDcHBRVnU5Mm1JVUJ4bEtScmRXRFdXL2dyKzNrR0YvaVFwVVFVYUpnS3VBY1dYN3FDN29ocnJ2NkhXdkcrTWp2NUxpV1Nlc05odlRlZVlwR0x2M3dURG16QXVMem5Wa3NMMCtsQjN5QTBZS2xTZ21va1NuS09LRnpzcklPSGZYRFJBZ0dldjliSVpLZkh0bkNsT2U2cnBQWWxJcDQvUTFPTVJzTVF5UHh4OFduVzVGOGlzeTAwaXJyQVdtQXA0MEVGU05Ja1FFYlFHQ1hlZ042Rjc5c3pnL0Z4QnhDZHRDa1ptSTBsWWJGMG10VXBkRXd5UXBBS1JDUEo5RjN1MEk1T2dFVkNBOEdpUEhZbmVmNDlXUjkrNllITmhhZE5BU28vUFZmMTlxTjE1dHNIcWY4SzFXUnF3MUo0bUV1VXhMM3lXL0VEMXJxY1AwZ1R5QW83QktVSytFVUdReE5wUSt1cFZ6V0lkTmZwVWcvTUFPcjd1aGJLamZsWUFJS0lhMDR4OFF6aU1TbkY3L1B1N09wU3I3c0hUQVNDWnBrUEZBRW96Yk9JdjM2WnM0aFVmbmZPL2pjZUprdnBuUEliV2xiaGp0Z05Zbno5ZmpCdE4wUzlHWWF3eS80R2c1MjlUMVJ2QTdjYXFBSFhvZXFQekNsSlVLRktrYlA1M2FpM09oSEg4ZTZ5SHJQQWp6eWIwdHdGVFZZTXA2VmtZbEFvSDdyU2VsWkRqWTM0ejkrdHg1NDJncTZSWC93aXd5VHJYMFJ2VnZsTE8rRkFueFloQg=="},"type":"Opaque"}
2021/04/09 01:35:35 [SONAR-EVENT]	57	Deleted	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-2","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-2","uid":"44f522b3-c8b3-49c1-b945-ef850d36accc","resourceVersion":"1906","creationTimestamp":"2021-04-09T01:33:38Z","deletionTimestamp":"2021-04-09T01:34:22Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-2"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:38Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.4.4\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-2"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker2","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-2","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:43Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:41Z"}],"hostIP":"192.168.96.3","podIP":"10.244.4.4","podIPs":[{"ip":"10.244.4.4"}],"startTime":"2021-04-09T01:33:41Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:42Z","finishedAt":"2021-04-09T01:33:42Z","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://ff634ce188c79b875f9627281b33d2afcf717c252c9f9d64d6fcd1d832de6b19"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:48Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://6bbb4f3cfa437afe1753a59cd70247dae8c0320e01e7fd0219daa37f37321db3","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:35:38 [SONAR-EVENT]	58	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1911","creationTimestamp":"2021-04-09T01:33:18Z","deletionTimestamp":"2021-04-09T01:34:22Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.5.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:23Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"hostIP":"192.168.96.4","podIP":"10.244.5.3","podIPs":[{"ip":"10.244.5.3"}],"startTime":"2021-04-09T01:33:20Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:22Z","finishedAt":"2021-04-09T01:33:22Z","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:28Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:35:41 [SONAR-EVENT]	59	Deleted	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"0e779ca2-1f04-45fb-9f5e-6aab25bc155f","resourceVersion":"1912","creationTimestamp":"2021-04-09T01:33:18Z","deletionTimestamp":"2021-04-09T01:34:22Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-86f5f7d4d","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"1dab07b57ab8047e6cf7901ef6b26f95","percona.com/ssl-internal-hash":"5a3a72387845d47c3e2eaf3d5dfcd554"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"e5b06142-9d7e-46c4-be2e-ddb28d2915f5","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:33:18Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"e5b06142-9d7e-46c4-be2e-ddb28d2915f5\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:34:23Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.5.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:23Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:34:23Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:33:20Z"}],"hostIP":"192.168.96.4","podIP":"10.244.5.3","podIPs":[{"ip":"10.244.5.3"}],"startTime":"2021-04-09T01:33:20Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:22Z","finishedAt":"2021-04-09T01:33:22Z","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://27f85ad250a4ca0e9d7ed923399d51e16763040e21cd9b96783b6a88e148c54f"}],"containerStatuses":[{"name":"mongod","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:33:28Z","finishedAt":"2021-04-09T01:34:22Z","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://bc30eb6af8bae7cae700bc1dfe050c532509d217c9ebf983d8e76aaa6296431a","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:35:41 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:35:41 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-rs0	NotFound
2021/04/09 01:35:41 [SONAR-CACHE-READ]	Get	pod	default	percona-server-mongodb-operator-bf69fc874-mztc9	NoError
2021/04/09 01:35:41 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NotFound
2021/04/09 01:35:41 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:35:41 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-rs0	NotFound
2021/04/09 01:35:41 no event happening
2021/04/09 01:35:41 [SONAR-FINISH-RECONCILE]	psmdb-controller	2
2021/04/09 01:35:42 [SONAR-START-RECONCILE]	psmdb-controller	3
2021/04/09 01:35:42 [SONAR-CACHE-READ]	Get	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:35:42 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:35:42 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:35:42 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:35:42 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:35:42 [SONAR-CACHE-READ]	Get	secret	default	internal-sonar-mongodb-cluster-users	NoError
2021/04/09 01:35:42 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:35:42 [SONAR-SIDE-EFFECT]	Update	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:35:45 [SONAR-EVENT]	60	Updated	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","resourceVersion":"2189","generation":2,"creationTimestamp":"2021-04-09T01:35:22Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:35:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:image":{},"f:serverHost":{}},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:35:42Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:clusterServiceDNSSuffix":{},"f:replsets":{},"f:runUid":{},"f:secrets":{"f:ssl":{},"f:sslInternal":{}},"f:sharding":{"f:configsvrReplSet":{"f:arbiter":{".":{},"f:enabled":{},"f:size":{}},"f:expose":{".":{},"f:enabled":{}},"f:name":{}},"f:mongos":{"f:expose":{"f:enabled":{}}}}},"f:status":{}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","runUid":1001,"mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}}}},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"failureThreshold":8},"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"failureThreshold":4,"startupDelaySeconds":7200},"podSecurityContext":{"fsGroup":1001},"containerSecurityContext":{"runAsUser":1001,"runAsNonRoot":true},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"serviceAccountName":"default","podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets","ssl":"sonar-mongodb-cluster-ssl","sslInternal":"sonar-mongodb-cluster-ssl-internal"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"clusterServiceDNSSuffix":"svc.cluster.local","sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{}}
2021/04/09 01:35:45 [SONAR-CACHE-READ]	Get	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:35:46 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NotFound
2021/04/09 01:35:46 [SONAR-SIDE-EFFECT]	Create	issuer	default	sonar-mongodb-cluster-psmdb-ca	
2021/04/09 01:35:47 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:35:47 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-ssl-internal	NoError
2021/04/09 01:35:50 [SONAR-EVENT]	61	Updated	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","resourceVersion":"2202","generation":2,"creationTimestamp":"2021-04-09T01:35:22Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:35:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:image":{},"f:serverHost":{}},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:35:45Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:clusterServiceDNSSuffix":{},"f:replsets":{},"f:runUid":{},"f:secrets":{"f:ssl":{},"f:sslInternal":{}},"f:sharding":{"f:configsvrReplSet":{"f:arbiter":{".":{},"f:enabled":{},"f:size":{}},"f:expose":{".":{},"f:enabled":{}},"f:name":{}},"f:mongos":{"f:expose":{"f:enabled":{}}}}},"f:status":{".":{},"f:backupVersion":{},"f:mongoImage":{},"f:mongoVersion":{},"f:pmmVersion":{}}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","runUid":1001,"mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}}}},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"failureThreshold":8},"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"failureThreshold":4,"startupDelaySeconds":7200},"podSecurityContext":{"fsGroup":1001},"containerSecurityContext":{"runAsUser":1001,"runAsNonRoot":true},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"serviceAccountName":"default","podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets","ssl":"sonar-mongodb-cluster-ssl","sslInternal":"sonar-mongodb-cluster-ssl-internal"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"clusterServiceDNSSuffix":"svc.cluster.local","sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{"mongoVersion":"4.4.3-5","mongoImage":"percona/percona-server-mongodb:4.4.3-5","backupVersion":"1.4.1","pmmVersion":"2.12.0"}}
2021/04/09 01:35:53 [SONAR-EVENT]	62	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl","uid":"e45823be-1b2d-4e79-90f6-d5148e6ad4d1","resourceVersion":"2209","creationTimestamp":"2021-04-09T01:35:47Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:47Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"7c806eaa-0103-4958-ac7d-9cb42fc8308d\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lRWkt0VUt0NytPZmZQdGEvdGVsbnRiVEFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16VTBObG9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBU01SQXdEZ1lEVlFRS0V3ZFNiMjkwSUVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXpYa1BGZEZOdHFvNm9sVUVKcjczdlRWWG1ENHkrYTZ3dExqSUc3anduVkc2SlJ4REFWdTMKMUFTNFhBa25sYVVMVmJ1ZFVHNnNjb3RxaVhoOTNsZW8xcU1QL3YxUXdTektha1BHcnhHU3lFYzd5cWNhRENlOApSZGV6Y2RhRmRIMFdqSXJDZGNsbUtYNVh2MXdlTlBLa3FQSitQaXN3ZEZyMSsxdjE2dU5SMkQxUWUyYmlFQkpTClhRa3g2R1BZcGgxMkF1K0RzYkhhTTRHa0lCTkNILzEwbU9vaXF6OWNid1o5RlJ1VWlPb0RxWUNYdXBZVm9VNncKc3BwVXAxWWI0UzI3UkdSMTdlazFOQWFGQU1LR1lKSDdxOUhFM1dKQ0ZteHNoUHpGUC8xNFVQZnJiTUZmamZVMgpCd01tQ3oxb0xZdEV6ODRpZmNLTHNncVFPaUViczdhK1p3SURBUUFCbzB3d1NqQU9CZ05WSFE4QkFmOEVCQU1DCkFpUXdKd1lEVlIwbEJDQXdIZ1lJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQXpBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ1oxUjh4NFRFY1oySHYrOXdHWnNvTgowcG8zWVRtU2ZJWGtNYzVhSkNaZGo3eHNwcGU3N3BHcnhUK1lNRHJ6RTdHYjZBM1EyKy9VdjZ2NUJMV1FHdjd5CkQvd2NlL2hZU0l6V1I3bVJOVG9vWnptamJJZU1JVHhUTThRak1PYW5WM0tzbXhDV3dUT1RiRzA2eE1VNEsxam0KM3dLMTVLVU4yVm1LV0t5UldSUGVUZ2lkRnpoOTg0VGtXWTc5YzBKaytrTGR5UFAvd3BCZVZpZ1hNVmFIWUFnRgpOZjZJWEZaNzlaOGpFdGkramYyRTE0dUlmSFZ1RkhRSDk4WFVnQ0cxRnBteCtTZlVLVUJHcUptdlZKM2d5T3FRCmx3SHNoMDhOUm56bmJ3Ym82SlY1QXJSL0VWSWdEYXoySGFTZlVLZm5mcy9uQ0V1WTdZWS83eFdiYVVlVTcrVVMKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY0ekNDQk11Z0F3SUJBZ0lRUEZXT0MwbG11SjR3M2RQSG1yRmZUVEFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16VTBObG9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBUU1RNHdEQVlEVlFRS0V3VlFVMDFFUWpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDCkFRb0NnZ0VCQU5EMkRXcUo2OHdadEFKdTlTZjgxS2tkVEdka1dpejYzbWxQclFUck9oOEFyeU1GQkdIRDhSUXAKWnJXMGJIU21QcENDVTh1NmRlcTBiS2NlVUhMaGU5SXI0ZE82bnJ3SFl2WWtsK0l4THlXSGNXUFR5VmYxck1SYQpxUUEwOHpqM2wrK3RwQllOMmk0SXBlWkJGMkY0ZzRBNnFFZ0pmVDF1alFVQ0RLT0l5NnZCVGtrejBza05kemZaCmdFM0d5VU9vRmh4Um5EVjRzYS9ESk5xV1hsMGxyQTBiYWxrSU5lSHhsS21CMWtnRXB3S2NlNXo4aWxEanVTWWMKY2VpUzNjL1RNSDhaUGVzOWE5SWxOWVJOeEI2WS9jQ0pmaEViSnprRldQa1QyWE9oOXQzWGcyUzhzc1lzZXVOMwpuczFDamxyNGVST1FnY3JaUmZyc1k4UGJvZWIzK3U4Q0F3RUFBYU9DQXpNd2dnTXZNQTRHQTFVZER3RUIvd1FFCkF3SUZvREFkQmdOVkhTVUVGakFVQmdnckJnRUZCUWNEQVFZSUt3WUJCUVVIQXdJd0RBWURWUjBUQVFIL0JBSXcKQURDQ0F1NEdBMVVkRVFTQ0F1VXdnZ0xoZ2dsc2IyTmhiR2h2YzNTQ0dYTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MQpjM1JsY2kxeWN6Q0NJWE52Ym1GeUxXMXZibWR2WkdJdFkyeDFjM1JsY2kxeWN6QXVaR1ZtWVhWc2RJSXpjMjl1CllYSXRiVzl1WjI5a1lpMWpiSFZ6ZEdWeUxYSnpNQzVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5TG14dlkyRnMKZ2hzcUxuTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF5Y3pDQ0l5b3VjMjl1WVhJdGJXOXVaMjlrWWkxagpiSFZ6ZEdWeUxYSnpNQzVrWldaaGRXeDBnalVxTG5OdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXljekF1ClpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYklJY2MyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnkKTFcxdmJtZHZjNElrYzI5dVlYSXRiVzl1WjI5a1lpMWpiSFZ6ZEdWeUxXMXZibWR2Y3k1a1pXWmhkV3gwZ2paegpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0Ylc5dVoyOXpMbVJsWm1GMWJIUXVjM1pqTG1Oc2RYTjBaWEl1CmJHOWpZV3lDSGlvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMVzF2Ym1kdmM0SW1LaTV6YjI1aGNpMXQKYjI1bmIyUmlMV05zZFhOMFpYSXRiVzl1WjI5ekxtUmxabUYxYkhTQ09Db3VjMjl1WVhJdGJXOXVaMjlrWWkxagpiSFZ6ZEdWeUxXMXZibWR2Y3k1a1pXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzZ2hsemIyNWhjaTF0CmIyNW5iMlJpTFdOc2RYTjBaWEl0WTJabmdpRnpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0WTJabkxtUmwKWm1GMWJIU0NNM052Ym1GeUxXMXZibWR2WkdJdFkyeDFjM1JsY2kxalptY3VaR1ZtWVhWc2RDNXpkbU11WTJ4MQpjM1JsY2k1c2IyTmhiSUliS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRZMlpuZ2lNcUxuTnZibUZ5CkxXMXZibWR2WkdJdFkyeDFjM1JsY2kxalptY3VaR1ZtWVhWc2RJSTFLaTV6YjI1aGNpMXRiMjVuYjJSaUxXTnMKZFhOMFpYSXRZMlpuTG1SbFptRjFiSFF1YzNaakxtTnNkWE4wWlhJdWJHOWpZV3d3RFFZSktvWklodmNOQVFFTApCUUFEZ2dFQkFITWRobmZxWG1sckxaYVpMWkxlRUFFdTNjZlEyYUJheElKVWo4RzZJajlJR0VTdnA1cnNSNTVJCm1icGRMVE9WM2R6dmcvVjIyYUVyMmxqaXg1ZjBWakgxNHZMdXBGQ3ZiTzRWUmtxdVlqNGp3aW1iS3RJWVVQYzYKaFR3UkoxaHZnajdibGwzV1daRktQZW5ZZ3dLaW5TVGpSZWFmTDYzV3pYYkVtUTBkT3U1T3ZWS3ZCY3VIM2Z3VQpOV1g1c0dqRkhGc0xrK3UySUpjVDUzMUVxaTR3b1FPdUxycGhXSHBmSFFlZWVnVkZ0aVJQNzZGcm42dWpJanV0CjF4T0srYnVJVzF1NEhSS1NjV0lkRlN5ZkJFSUFVaEhBaHNHaGhob1h2L0dBeWlZOE5RZnBkVkJZNzdibEdrRCsKSXhvOFkzdEF3S04zU1cyd2VpUkJNamEyRFNyTFhTND0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBMFBZTmFvbnJ6Qm0wQW03MUovelVxUjFNWjJSYUxQcmVhVSt0Qk9zNkh3Q3ZJd1VFClljUHhGQ2xtdGJSc2RLWStrSUpUeTdwMTZyUnNweDVRY3VGNzBpdmgwN3FldkFkaTlpU1g0akV2SllkeFk5UEoKVi9Xc3hGcXBBRFR6T1BlWDc2MmtGZzNhTGdpbDVrRVhZWGlEZ0Rxb1NBbDlQVzZOQlFJTW80akxxOEZPU1RQUwp5UTEzTjltQVRjYkpRNmdXSEZHY05YaXhyOE1rMnBaZVhTV3NEUnRxV1FnMTRmR1VxWUhXU0FTbkFweDduUHlLClVPTzVKaHh4NkpMZHo5TXdmeGs5NnoxcjBpVTFoRTNFSHBqOXdJbCtFUnNuT1FWWStSUFpjNkgyM2RlRFpMeXkKeGl4NjQzZWV6VUtPV3ZoNUU1Q0J5dGxGK3V4anc5dWg1dmY2N3dJREFRQUJBb0lCQVFER05ONDg5RjRwMXllYwpOMHRyaHJMaFJ0MDJKVVl6N0RJVGluUC9lbkJEQUE4Z0ZKNDNiZmk2dXhxbHVHSTNzNGtjNGNKQ09MZW96VU5TCnNicDFmZFJKWXo1dDYxS3Q0QVBLbnFOQzlveFYrTWRoZlg0NlpOcGYxZThBTnptT0M2eWV1QUl3dVNyL0IwejEKdjBCQ1FHSGJ1OGZyckxTVEZNM0d0azd1djg4Uk5qQU9TNkF0Q2wwMS93c3JKNkJ1T05aeDVadVdsY1lsOU9ucQovdGNxNUtFMXJRQWhCTzQ0ZkR0bGFOOHREejFHamhOQW5rVWFTd0J0U0MzTlhsaC81N0pkdUpUM0N3bHl6VlBDCmcrOC9SM1RVWmhSYmlFSjd4VU1IbkNlUHF5cXJhVitrWDkrNEduN3NuWGtkMkE3c3NpYlJPQ2dTZVBJem5hVHgKa0tpQW1rRWhBb0dCQU9xU3g4WkFVVXdic01ZNjEzSXhoUldaT3VCSXh3dmljOVlkTVZ3ems3NS8xUGhIaWdNRwpURFFZeUZiRFNIQWZodmxhaks2azlTeUtZRE5HbjhZbmRSK0xyMyt0TWttUUM5K2wzazNaZjF1eUk2Nm02dHlHCnFxemQ2Y0hPY1RmaGwyUitubzBqaWdYMzY5NU1KQmRpbE1McldkR2IxK2NJbS9ZVGdYS0FPYVQxQW9HQkFPUU0KWEZjbTdWQXdNRXluZVJHaG8vSkk5UG5IT3MvR2NkRnU5ekdId3MwMDdIdEVwd0VhNC9reGVxdGNTUDduNmNSSgpjcTh0U2xid2lKY3FqazQ5REVWSFB3a0RTUzhWTHUvV3FWOUxQKzVvT2g4emc0QzUvNTN2cGJTeUF1U3VMOVZQCkRNalljUG9uWDJKZDFIZUN3U21RLy9IUTRJRmZNc3JERjJuVEJkSFRBb0dBQWlhd2NFLzhydDcrSXdNOUlJMzEKczNvQlFUZEpwQUZDb0s4SjJkZWJQajc3Mi84RDgvMGx5OENDYmRGQ284eVdOMGt1U3hlMks5OWsvSE5rV2JQWQo3aDRnME9Ic3VTSDZDZVlDZ09KQ3VidUxlam1MbzlRVVVwdUNYa1dmWWl6T2I1eDlwYnV5czFWUHMyMHRVNDJTCjRhcTQyeVE3dWFHcGxIc2ZUOFovUU5VQ2dZRUF2b0NnNXVFSzM3RFJ1RWN5dVFyWnBQMVRRQkV4VFA2T2VCRUYKaUtmTGtKY0VjZGtnMWFoOEJ1QlJoRExjZTZ5S09NSE9mdzRMaXVMMmg2a3lKYU9UeTQrLzFheWNCeXZnQU5URwp1bWRuS2FhQjN5eXVUdXVSNElLZ1gzbFJOMjFYWWc3ZU5DMnkreFhHOWFwQ1llK2xveTZRMEpYWDVkcjcyQ3Z2Ck5DVG5PS2NDZ1lCUDlGdis1akN1aDZJVVVaZzJ3Z3NWZW54Sjg2SVVNeG9tb0RGc1ZiOWU0VzRiRmwyUzZKM0EKbnZYR0VML0h4ZHZuQ213MzNQMXdHV3F1ZDd6UXRrbm5ja2ttTktxazl6MkhudEw0WVNlWWhyc2dYazhqREEySApMZjQ4YXFhdFZsbkhhdTV1R3VlUlovRk9taEtCdDc0ZW11QmVPVEZNWjgyVmUxblhQREZmYXc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="},"type":"kubernetes.io/tls"}
2021/04/09 01:35:53 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-keyfile	NotFound
2021/04/09 01:35:53 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-mongodb-cluster-mongodb-keyfile	NoError
2021/04/09 01:35:56 [SONAR-EVENT]	63	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-ssl-internal","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-ssl-internal","uid":"ebb753c2-a377-483e-812e-f2fd2f1842da","resourceVersion":"2210","creationTimestamp":"2021-04-09T01:35:47Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:47Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:ca.crt":{},"f:tls.crt":{},"f:tls.key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"7c806eaa-0103-4958-ac7d-9cb42fc8308d\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lRT0RqeERLd0NOWWc1RXN5c3F6ZXY1VEFOQmdrcWhraUc5dzBCQVFzRkFEQVMKTVJBd0RnWURWUVFLRXdkU2IyOTBJRU5CTUNBWERUSXhNRFF3T1RBeE16VTBOMW9ZRHprNU9Ua3hNak14TWpNMQpPVFU1V2pBU01SQXdEZ1lEVlFRS0V3ZFNiMjkwSUVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXBMZ01KNFB4SGNvT0pFejBrUFNGbzI5emdGb1FpbVE0cVBTNUxHMW9LV0hOdzYvSmxnU0IKcEZyZmt2YzdzVEt2dHZyc2tBTXMxNU1SYkp3WWJEY3ZPVmQwV2FFcUp4MXVTVGlhOXNHalhyU2lnQ0hudC85eQptTUtHejBBNkc5dlZTblBSeDJ5SE11WC9yQTBVb1p6RllnaXVSQXNvQmd6cHhuMGlIU3p5QUIwanhuVHdaMTJwCllpRHZ5d3RFeGRSaE55U3B0UG1ndGVkVU0wUlVtbnJuZkJqUEtUeXZxekZpR3RPcDNzK2JVWWJ1Rm9ZK0d1Z2kKSlh3cEV4MWc2WWwrVEZUY2UzYjN6MFI1NmVFMnB2TVF6N3pCZTFDeXVyY0pTUlYrTEtjdE1aalhLMHkxdU1mSgozdzZ0TWpycS8wZHI1S3oyYTIwakJOYjZtLzFFSkgwV0N3SURBUUFCbzB3d1NqQU9CZ05WSFE4QkFmOEVCQU1DCkFpUXdKd1lEVlIwbEJDQXdIZ1lJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DQmdnckJnRUZCUWNEQXpBUEJnTlYKSFJNQkFmOEVCVEFEQVFIL01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ0xBWXFhME1PdzZ4UDlZdHp0a2RDVQphWGM3S2pHMjh0eFRWMkJUd25DSjlnayszSXdySzVGMHkxMXFqRnB2MUs2Mjd4Q3BXTncvZ0plNWdKT1NTcmFpCllNdGNJSzU0ZEo3b0xKUStQeHg4OVFxN09vdExEMEV3MnRqYWxuNjB6MnMrWWQwSE8yKzFsM0ovc2N5ZVBrRlMKSCtMeDBqaWkvYVRiYTJKRXY0MGRoT25wMVdDNGttRWcwRHFka1Y2T2tsT29PRVBKMWpYWnJxbTUxNTROdXVadApQRG05MHQ3TDFZVHdIdDZRV3hHTlhxTGx6dGt0Y2kzeUZRVVQ3UExXTHNjMHJnTmFDYUhnamNvbjFiR2pTdHU2CmMrbzQ5a05tME94OFEwS2VXMVpydFUwTTRXcjNIcHBIYUR0Z3JsWnNiSzhqcHdZS0RzUGt4VDZtRXBFYmxiTGsKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY1RENDQk15Z0F3SUJBZ0lSQUo0SDl5VXRmRHN2WWpPT1M1eGk3dUl3RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFVtOXZkQ0JEUVRBZ0Z3MHlNVEEwTURrd01UTTFORGRhR0E4NU9UazVNVEl6TVRJegpOVGsxT1Zvd0VERU9NQXdHQTFVRUNoTUZVRk5OUkVJd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3CmdnRUtBb0lCQVFDb0taZ3hEVjBhS0lkeGt6VU1OazdEOElSYjduekF6ZmdubnpNZ0l2TFk4V3c3YmV6L0JhY1IKTnk4NENJbW9zMmhhVXFrSVJobjdoWWVUaCt5K1VhQStpZ0ZSRElsL1N4UXEzeVdmNXNsSFYvSzFzT2lhUGwwZgpUUHM0S0oxOXEycGpQQWxvTzZTNVUxeDEwOE1GM3NKRlJoclgwSUhvd29BQ3p3MW0rRU1yUkJ6dzFzYUJyZ1NKCnF2aFJXZVRiaTduZDhkY2lXVUxueFhrVWpKbE9Bc2M4RkVHSmJSeWF0T1ptT0svUWY4Tlo0Z3gyWW5pdG9QY0wKaDFsN1ZTeENaRlg3N0VRYTF6ZHMydGNWZWNYdkhuUEJyRE9WKzE1UWV4L0JBMUJlQ0VYRThrbVkzbmtXeW1IWQpWTFA2N3lMZHBYeldQbnE1RUxVZ2x4UnlQQ1k0cUxkL0FnTUJBQUdqZ2dNek1JSURMekFPQmdOVkhROEJBZjhFCkJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUMKTUFBd2dnTHVCZ05WSFJFRWdnTGxNSUlDNFlJSmJHOWpZV3hvYjNOMGdobHpiMjVoY2kxdGIyNW5iMlJpTFdOcwpkWE4wWlhJdGNuTXdnaUZ6YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdGNuTXdMbVJsWm1GMWJIU0NNM052CmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkQzV6ZG1NdVkyeDFjM1JsY2k1c2IyTmgKYklJYktpNXpiMjVoY2kxdGIyNW5iMlJpTFdOc2RYTjBaWEl0Y25Nd2dpTXFMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXljekF1WkdWbVlYVnNkSUkxS2k1emIyNWhjaTF0YjI1bmIyUmlMV05zZFhOMFpYSXRjbk13CkxtUmxabUYxYkhRdWMzWmpMbU5zZFhOMFpYSXViRzlqWVd5Q0hITnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmwKY2kxdGIyNW5iM09DSkhOdmJtRnlMVzF2Ym1kdlpHSXRZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZElJMgpjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFcxdmJtZHZjeTVrWldaaGRXeDBMbk4yWXk1amJIVnpkR1Z5CkxteHZZMkZzZ2g0cUxuTnZibUZ5TFcxdmJtZHZaR0l0WTJ4MWMzUmxjaTF0YjI1bmIzT0NKaW91YzI5dVlYSXQKYlc5dVoyOWtZaTFqYkhWemRHVnlMVzF2Ym1kdmN5NWtaV1poZFd4MGdqZ3FMbk52Ym1GeUxXMXZibWR2WkdJdApZMngxYzNSbGNpMXRiMjVuYjNNdVpHVm1ZWFZzZEM1emRtTXVZMngxYzNSbGNpNXNiMk5oYklJWmMyOXVZWEl0CmJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVo0SWhjMjl1WVhJdGJXOXVaMjlrWWkxamJIVnpkR1Z5TFdObVp5NWsKWldaaGRXeDBnak56YjI1aGNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIUXVjM1pqTG1OcwpkWE4wWlhJdWJHOWpZV3lDR3lvdWMyOXVZWEl0Ylc5dVoyOWtZaTFqYkhWemRHVnlMV05tWjRJaktpNXpiMjVoCmNpMXRiMjVuYjJSaUxXTnNkWE4wWlhJdFkyWm5MbVJsWm1GMWJIU0NOU291YzI5dVlYSXRiVzl1WjI5a1lpMWoKYkhWemRHVnlMV05tWnk1a1pXWmhkV3gwTG5OMll5NWpiSFZ6ZEdWeUxteHZZMkZzTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQkFRQTNhZklaNzMwbUxiQTRidWhaWlc2YUE0L3FCSTJ5bUVQS3c3UWZwZnl2VmxqREFTVk4wRllVCll4eEhhNXVEWkpEYWVYdEFCSXJUQ3JYekFIRzdUTDZZQWU3bVhSRXlXcFFHZWtqYzNuVHQvK0ZESHloVzFodGYKRE90V1JrekM5RTAycjlleEhoam12Q3R0ZTdCYmtJZjRNSUgwM1lXam5PVGZacmFvUnBXMHo3MXovdWRVTGgxWgphK0NhbGhLRFlXZmhNSE1NTHo2UzdsVEdPbCtoNUVuVm5xaGFaUU0vZURCMWs1OHBJVUpGM1J0YjN1R294TUVJCkxManRGZnV6NUE2cmpJQkpUOEg2ZVlsOHZSNWdPME9MUStxWEV5aUNpTW8rL1lDdGZuQXkwUkxmV2p2VXVMa1gKK0VFTlFrYXU4NkFDVkFVWWV4OTViT01jSmNjcTJQWDQKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=","tls.key":"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBcUNtWU1RMWRHaWlIY1pNMUREWk93L0NFVys1OHdNMzRKNTh6SUNMeTJQRnNPMjNzCi93V25FVGN2T0FpSnFMTm9XbEtwQ0VZWis0V0hrNGZzdmxHZ1Bvb0JVUXlKZjBzVUt0OGxuK2JKUjFmeXRiRG8KbWo1ZEgwejdPQ2lkZmF0cVl6d0phRHVrdVZOY2RkUERCZDdDUlVZYTE5Q0I2TUtBQXM4Tlp2aERLMFFjOE5iRwpnYTRFaWFyNFVWbmsyNHU1M2ZIWElsbEM1OFY1Rkl5WlRnTEhQQlJCaVcwY21yVG1aaml2MEgvRFdlSU1kbUo0CnJhRDNDNGRaZTFVc1FtUlYrK3hFR3RjM2JOclhGWG5GN3g1endhd3psZnRlVUhzZndRTlFYZ2hGeFBKSm1ONTUKRnNwaDJGU3ordThpM2FWODFqNTZ1UkMxSUpjVWNqd21PS2kzZndJREFRQUJBb0lCQUJKV3J1VXlpdU91WmM3cAorZEFDSUNiWUZPY2RvL2MydndnN0lVMHc0b0RzR3h5RUNXTnFUMlRlT3NVR2tWU1hkQnJkaHRlREpaUTdaS1NmCkh4OUdNWTZBYUZKWlpxaytHODN0RmVKUlBjUU5BRWYyS2ZlZ00zR1ZhSlFnUWNTUnJBRjBhNlkxVXVwdS85ZE4KcDZmOU9meHAvOFZuVkxONGVwTlQxeWRTamFpckVKNzRobHp4VjlJQU1EMEFFWWU3alhSVVVDV3pncGpkaDliaApjbUVTTzA2dmNaNXprdDJYUmJxNjJPWWV4MG9rV1RvWnJoS1kvcGVFaG85MVJjTWt3OTF2UGxSWG5yT21hY0FSCmRXeG9MWFZ2NkdxL2pEcm81WVRjR3UxZE5ycWtETjIyMU83N1VMdFd5NHlpVHhZeE5TcVJYNS9HWEVqOGVUTTAKWnFUR0VGa0NnWUVBeDRXYWE4NHdSMXdtKzlOWFdTbktLZUlrWThrOE5ha21uN0lzRTZKNTRGclNmMW1JY2E2VgpNTFFDalJlWklxZW1HOUxLN2VrU2RiM01jb1Vtd1pSYXNlWjBUMzBCSXFKRk9vSncrNzFKMnlubEJtaHpXTEU0CmV4RVVWK3o4S21oSmlLWVFRcXFCY3NsSGZrSndzSlNKWGlGM2RLYWhWbEtXekk0TGorVWFVaE1DZ1lFQTE4T0cKWVhSSDRCYlhlT3ZrY0VPU3ZYRkRHWU5TSUFsSDlsanBGMitOTDhabXY3Z2toYUR2TXZTMUJVZXdHSjh3OTFJMgp5Y09OSXgzVjZEZEZWVWZsN2Nyc3hUNFg0U3FLUGhvUXVWMUxJRzdsS1pLSzliemcxMnArVTU3YTQwOWd6My9mCldNZkNIdHFoRTFyTHdSc1NWQlc0Z3BNR3o5WjJqSnFxenM2YkVtVUNnWUJWa1B5YXcwQjlPZzRWN1pzR1NCL0YKT3BDMG9yYkpwSk5GNVpsMWlqYU9leVRQTE15UlJIZ0MvUkFqQmozTVdPMnAvUXErWVRoamVsUlZ3TGpRU0JsbApOaG9uaE1xWjJkR3F1QXBRUyt1Q3JFTG1McUZaSmhlODM2UkQyUVNFQTFtVjJ2SWFSUmxpNnVOWVNKSWZpSFFwCkJGMUFqNzJkVWFvT2E5U1ZqNEZzTlFLQmdIaWY0QjNWbzJVOWYrTWpoZ2ZaVDAxSDUrcDRoMDVQd2dLUWZHZlUKdm9zS0VXRjNzanRlMkx1VklTcTloRTZQbVJGN3poT0lsdndkN3Z1dkFyMEZ3QjdzQnVqU3FRa0IvbDF2dHcvYQpmMmkzZHJpQ0s5dnNaNHNuQjA3NmpZYnRWc05LeXZQWVljZGNGUmM3K0pPUjdmSkNYbS9wZ0xKclJNV2dwb09OCjhCWWRBb0dBS2cyUVNSbktzOHlvejRRd0FXamFoWVQxVzN2VFByNWR6N3Jqc3lTZ3hqRWR0ZDBrVEZxam51Q0QKQ0tUTDdrSnNyQ1ErVmRMM09kNzRCRlJWT0NldjJFZWpwYzZFeGpsS0hTY3ZDVE15bGl1K1AzbjRTWU85STBragptNmhWYmtLVTJsdlo5RzBkK2RPb3FiRHJuMXhOSDQ5dG1PcVBkSWI2cFRkbVdwaVp6bDg9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="},"type":"kubernetes.io/tls"}
2021/04/09 01:35:56 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-encryption-key	NoError
2021/04/09 01:35:56 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:35:56 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:35:56 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-rs0	NotFound
2021/04/09 01:35:56 [SONAR-CACHE-READ]	Get	pod	default	percona-server-mongodb-operator-bf69fc874-mztc9	NoError
2021/04/09 01:35:59 [SONAR-EVENT]	64	Added	secret	{"metadata":{"name":"sonar-mongodb-cluster-mongodb-keyfile","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-mongodb-cluster-mongodb-keyfile","uid":"c423d4f9-21f1-4b9e-ba28-c39afc40d7af","resourceVersion":"2233","creationTimestamp":"2021-04-09T01:35:53Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:53Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:mongodb-key":{}},"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"7c806eaa-0103-4958-ac7d-9cb42fc8308d\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"mongodb-key":"WisyK1pXdUNxaFN3MFF5Tkd3V3VSR1F4NjBDUUp5MTJvRlVIeENqdFU1cWF6aE9xQStqTHNzbVB2aU9HN3luVUE0dGFxZjRjdGQvM01YaU5zQkQ0NnFQSDI3Vlk4QzR1YVh6QTV0L0xqSUNVaXdiL01XWmdEc1dWUW8rNUJFbHdZWXhhY0RPcmlscFJ5S0FrZk13Tjk3eG4yTjN6U0lyRy9OTlp0TWFrZVNJbklKWkxLVWNiUHlJRlc5ZUdGenYrSXNVYVBmeHduTmZkQWFIckpGdE5vWWtkcFpJdCtOQjFXK0xoR2laNW5MN1VlQW0vMjRXZ0VHblJpZzcrbndRNzRncTRKZUtGMUdzdTVpU2UwOVFnVitGcGVWUERpd3FnZ2F2cHpnVElGb3A1MlBtRGk0cWJRUzBSemFlZWNUWUJPeWlvdThhUDhKN1h3V1UvM3MrOFF5bTNXU1c5eXNmWkhRZ0xST1BhWTAvTnM1NkpoMWNuVU5GakJpVUZDQlE0RG9ZcHdqWmhVUmNLR3lVS2RTaW4xdmQxdW0rWTlCOXllYjI1b2V3RTh5QWRjdWNMeWZsYXJxMGNQZHZ4S1YxN3hQM3dDWDBBanZuRGFqdk5jNTFBR2hpQ1dwU2RqWlNld2s4Mi9tdERjOWg1aWlBbVp6ckQ4SkZWeFl6SFFONVFBYXhTWElhMmNtQlBYc2cxbTRHWWl5TnVZUDdIZmQzYVZtYVFqRzJGM3crS3lxbnQrSnYrWHJxc0NIMmdRaXJZQ3NrdGJ3WERIWERsOEorVVRkU2J1K0tQNFlaUHVQWVZTSEJTaTNWUEo2UWRlNUZ0OHlWbUhyYmVBaWE0MGtIcUcyYjlJd3RVc3I5MzNjei9RQmpkVkZVWkEwZFZQeW9RLzdvbkkvZC84L0tycmJnMmN5anZ0YzRuWmt2L1JOOVpZait3K0luV1JBSWxjSGV1c05DVVNSWVZuOWlUbk1XQzhnNlY2KzJ5TGxDejhmSWdVcGJvQWtqU25TQ1pMOWQ1TU1uT0F0Y3ppQzFFdHFjMnB0azh0WjZjQzBlNDdMR2FLMFdvdzhQbVc3Q2V1VU5peENZVlNCYWZ6ZWlPZktDOG1YeWlJbEtsazhiTnU5cGFkWXRYZWszVzlubWhUN1oxMm03RHpaWDhmdEFiSDkwVk5rT3Q0ZHBoTTFBbEFOeTRHWC9PRlRJVUdIeTZ2RzdhK3h6ZUJoZ0YzWWVIWjhnazAwZDA3MnlIdlp1dTAwR0dqKzZ3bUdQSkF4MHE1SEtzTTBSaHREeFgwbUorREJGQnhLdGRudzVQYkxlZ3dkQno2bVpIRlloTERLUUF1STNTS1VCNENISDAvNjJOVU91UQ=="},"type":"Opaque"}
2021/04/09 01:35:59 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:35:59 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl-internal	NoError
2021/04/09 01:35:59 [SONAR-SIDE-EFFECT]	Create	statefulset	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:35:59 [SONAR-SIDE-EFFECT]	Delete	statefulset	default	sonar-mongodb-cluster-rs0-arbiter	NotFound
2021/04/09 01:35:59 [SONAR-CACHE-READ]	Get	service	default	sonar-mongodb-cluster-rs0	NotFound
2021/04/09 01:35:59 [SONAR-SIDE-EFFECT]	Create	service	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:35:59 [SONAR-CACHE-READ]	Get	secret	default	internal-sonar-mongodb-cluster-users	NoError
2021/04/09 01:35:59 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:36:01 [SONAR-SIDE-EFFECT]	Delete	deployment	default	sonar-mongodb-cluster-mongos	NotFound
2021/04/09 01:36:01 [SONAR-SIDE-EFFECT]	Delete	service	default	sonar-mongodb-cluster-mongos	NotFound
2021/04/09 01:36:01 [SONAR-SIDE-EFFECT]	Delete	statefulset	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:36:04 [SONAR-EVENT]	65	Added	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","resourceVersion":"2255","generation":1,"creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"7c806eaa-0103-4958-ac7d-9cb42fc8308d\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"replicas":0}}
2021/04/09 01:36:07 [SONAR-EVENT]	66	Added	service	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-mongodb-cluster-rs0","uid":"acd8f625-adf1-44fe-938b-7fdfa4efc731","resourceVersion":"2257","creationTimestamp":"2021-04-09T01:35:59Z","ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:ownerReferences":{".":{},"k:{\"uid\":\"7c806eaa-0103-4958-ac7d-9cb42fc8308d\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":27017,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"mongodb","protocol":"TCP","port":27017,"targetPort":27017}],"selector":{"app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/09 01:36:07 [SONAR-CACHE-READ]	Get	service	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:36:10 [SONAR-EVENT]	67	Added	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"a83d6911-b197-40b9-ad0b-573c7ac61037","resourceVersion":"2259","creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-548cbf9748","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f0e60324-5532-4223-945a-99d9a976e045\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","qosClass":"Guaranteed"}}
2021/04/09 01:36:13 [SONAR-EVENT]	68	Updated	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","resourceVersion":"2267","generation":1,"creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","controller":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"7c806eaa-0103-4958-ac7d-9cb42fc8308d\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"sonar-mongodb-cluster-rs0-548cbf9748","updateRevision":"sonar-mongodb-cluster-rs0-548cbf9748","collisionCount":0}}
2021/04/09 01:36:16 [SONAR-EVENT]	69	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"a83d6911-b197-40b9-ad0b-573c7ac61037","resourceVersion":"2292","creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-548cbf9748","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f0e60324-5532-4223-945a-99d9a976e045\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z"}],"qosClass":"Guaranteed"}}
2021/04/09 01:36:19 [SONAR-EVENT]	70	Updated	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","resourceVersion":"2363","generation":1,"creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"7c806eaa-0103-4958-ac7d-9cb42fc8308d\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:36:15Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":2,"readyReplicas":1,"currentReplicas":2,"updatedReplicas":2,"currentRevision":"sonar-mongodb-cluster-rs0-548cbf9748","updateRevision":"sonar-mongodb-cluster-rs0-548cbf9748","collisionCount":0}}
2021/04/09 01:36:22 [SONAR-EVENT]	71	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"a83d6911-b197-40b9-ad0b-573c7ac61037","resourceVersion":"2294","creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-548cbf9748","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f0e60324-5532-4223-945a-99d9a976e045\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:36:02Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z","reason":"ContainersNotInitialized","message":"containers with incomplete status: [mongo-init]"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z"}],"hostIP":"192.168.96.8","startTime":"2021-04-09T01:36:02Z","initContainerStatuses":[{"name":"mongo-init","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"xudongs/mongodb-operator:learn","imageID":""}],"containerStatuses":[{"name":"mongod","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"percona/percona-server-mongodb:4.4.3-5","imageID":"","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:36:22 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:36:22 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-rs0	NoError
2021/04/09 01:36:22 [SONAR-EVENT]	72	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"a83d6911-b197-40b9-ad0b-573c7ac61037","resourceVersion":"2306","creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-548cbf9748","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f0e60324-5532-4223-945a-99d9a976e045\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:36:03Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.6\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:03Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.6","podIPs":[{"ip":"10.244.3.6"}],"startTime":"2021-04-09T01:36:02Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:36:03Z","finishedAt":"2021-04-09T01:36:03Z","containerID":"containerd://5b70ca73522ab858a5423eec9b6bb1b210c1916fa11877282ae106ee00f46929"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5b70ca73522ab858a5423eec9b6bb1b210c1916fa11877282ae106ee00f46929"}],"containerStatuses":[{"name":"mongod","state":{"waiting":{"reason":"PodInitializing"}},"lastState":{},"ready":false,"restartCount":0,"image":"percona/percona-server-mongodb:4.4.3-5","imageID":"","started":false}],"qosClass":"Guaranteed"}}
2021/04/09 01:36:22 [SONAR-FINISH-RECONCILE]	psmdb-controller	3
2021/04/09 01:36:22 [SONAR-START-RECONCILE]	psmdb-controller	4
2021/04/09 01:36:25 [SONAR-EVENT]	73	Updated	perconaservermongodb	{"metadata":{"name":"sonar-mongodb-cluster","namespace":"default","selfLink":"/apis/psmdb.percona.com/v1-7-0/namespaces/default/perconaservermongodbs/sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","resourceVersion":"2417","generation":2,"creationTimestamp":"2021-04-09T01:35:22Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"psmdb.percona.com/v1-7-0\",\"kind\":\"PerconaServerMongoDB\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"delete-psmdb-pvc\"],\"name\":\"sonar-mongodb-cluster\",\"namespace\":\"default\"},\"spec\":{\"allowUnsafeConfigurations\":false,\"backup\":{\"enabled\":false,\"image\":\"percona/percona-server-mongodb-operator:1.7.0-backup\",\"restartOnFailure\":true,\"serviceAccountName\":\"percona-server-mongodb-operator\"},\"crVersion\":\"1.7.0\",\"image\":\"percona/percona-server-mongodb:4.4.3-5\",\"imagePullPolicy\":\"Always\",\"mongod\":{\"net\":{\"hostPort\":0,\"port\":27017},\"operationProfiling\":{\"mode\":\"slowOp\",\"rateLimit\":100,\"slowOpThresholdMs\":100},\"security\":{\"enableEncryption\":true,\"encryptionCipherMode\":\"AES256-CBC\",\"encryptionKeySecret\":\"sonar-mongodb-cluster-mongodb-encryption-key\",\"redactClientLogData\":false},\"setParameter\":{\"ttlMonitorSleepSecs\":60,\"wiredTigerConcurrentReadTransactions\":128,\"wiredTigerConcurrentWriteTransactions\":128},\"storage\":{\"engine\":\"wiredTiger\",\"inMemory\":{\"engineConfig\":{\"inMemorySizeRatio\":0.9}},\"wiredTiger\":{\"collectionConfig\":{\"blockCompressor\":\"snappy\"},\"engineConfig\":{\"cacheSizeRatio\":0.5,\"directoryForIndexes\":false,\"journalCompressor\":\"snappy\"},\"indexConfig\":{\"prefixCompression\":true}}}},\"pmm\":{\"enabled\":false,\"image\":\"percona/pmm-client:2.12.0\",\"serverHost\":\"monitoring-service\"},\"replsets\":[{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"arbiter\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"enabled\":false,\"size\":1},\"expose\":{\"enabled\":false,\"exposeType\":\"LoadBalancer\"},\"name\":\"rs0\",\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":3,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}}],\"secrets\":{\"users\":\"sonar-mongodb-cluster-secrets\"},\"sharding\":{\"configsvrReplSet\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1,\"volumeSpec\":{\"persistentVolumeClaim\":{\"resources\":{\"requests\":{\"storage\":\"3Gi\"}}}}},\"enabled\":false,\"mongos\":{\"affinity\":{\"antiAffinityTopologyKey\":\"kubernetes.io/hostname\"},\"expose\":{\"exposeType\":\"ClusterIP\"},\"podDisruptionBudget\":{\"maxUnavailable\":1},\"resources\":{\"limits\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"},\"requests\":{\"cpu\":\"300m\",\"memory\":\"0.5G\"}},\"size\":1}},\"updateStrategy\":\"SmartUpdate\",\"upgradeOptions\":{\"apply\":\"recommended\",\"schedule\":\"0 2 * * *\",\"versionServiceEndpoint\":\"https://check.percona.com\"}}}\n"},"finalizers":["delete-psmdb-pvc"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:35:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:finalizers":{}},"f:spec":{".":{},"f:backup":{".":{},"f:enabled":{},"f:image":{},"f:serviceAccountName":{}},"f:crVersion":{},"f:image":{},"f:imagePullPolicy":{},"f:mongod":{".":{},"f:net":{".":{},"f:port":{}},"f:operationProfiling":{".":{},"f:mode":{},"f:rateLimit":{},"f:slowOpThresholdMs":{}},"f:security":{".":{},"f:enableEncryption":{},"f:encryptionCipherMode":{},"f:encryptionKeySecret":{}},"f:setParameter":{".":{},"f:ttlMonitorSleepSecs":{},"f:wiredTigerConcurrentReadTransactions":{},"f:wiredTigerConcurrentWriteTransactions":{}},"f:storage":{".":{},"f:engine":{},"f:inMemory":{".":{},"f:engineConfig":{".":{},"f:inMemorySizeRatio":{}}},"f:wiredTiger":{".":{},"f:collectionConfig":{".":{},"f:blockCompressor":{}},"f:engineConfig":{".":{},"f:cacheSizeRatio":{},"f:journalCompressor":{}},"f:indexConfig":{".":{},"f:prefixCompression":{}}}}},"f:pmm":{".":{},"f:image":{},"f:serverHost":{}},"f:secrets":{".":{},"f:users":{}},"f:sharding":{".":{},"f:configsvrReplSet":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{},"f:volumeSpec":{".":{},"f:persistentVolumeClaim":{".":{},"f:resources":{".":{},"f:requests":{".":{},"f:storage":{}}}}}},"f:enabled":{},"f:mongos":{".":{},"f:affinity":{".":{},"f:antiAffinityTopologyKey":{}},"f:expose":{".":{},"f:exposeType":{}},"f:podDisruptionBudget":{".":{},"f:maxUnavailable":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:size":{}}},"f:updateStrategy":{},"f:upgradeOptions":{".":{},"f:apply":{},"f:schedule":{},"f:versionServiceEndpoint":{}}}}},{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"psmdb.percona.com/v1-7-0","time":"2021-04-09T01:36:22Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:clusterServiceDNSSuffix":{},"f:replsets":{},"f:runUid":{},"f:secrets":{"f:ssl":{},"f:sslInternal":{}},"f:sharding":{"f:configsvrReplSet":{"f:arbiter":{".":{},"f:enabled":{},"f:size":{}},"f:expose":{".":{},"f:enabled":{}},"f:name":{}},"f:mongos":{"f:expose":{"f:enabled":{}}}}},"f:status":{".":{},"f:backupVersion":{},"f:conditions":{},"f:host":{},"f:mongoImage":{},"f:mongoVersion":{},"f:observedGeneration":{},"f:pmmVersion":{},"f:replsets":{".":{},"f:rs0":{".":{},"f:ready":{},"f:size":{},"f:status":{}}},"f:state":{}}}}]},"spec":{"crVersion":"1.7.0","image":"percona/percona-server-mongodb:4.4.3-5","runUid":1001,"mongod":{"net":{"port":27017},"operationProfiling":{"mode":"slowOp","slowOpThresholdMs":100,"rateLimit":100},"security":{"enableEncryption":true,"encryptionKeySecret":"sonar-mongodb-cluster-mongodb-encryption-key","encryptionCipherMode":"AES256-CBC"},"setParameter":{"ttlMonitorSleepSecs":60,"wiredTigerConcurrentReadTransactions":128,"wiredTigerConcurrentWriteTransactions":128},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}}},"replsets":[{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"rs0","size":3,"arbiter":{"enabled":false,"size":1,"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"}},"expose":{"enabled":false,"exposeType":"LoadBalancer"},"volumeSpec":{"persistentVolumeClaim":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}}}},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"failureThreshold":8},"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"failureThreshold":4,"startupDelaySeconds":7200},"podSecurityContext":{"fsGroup":1001},"containerSecurityContext":{"runAsUser":1001,"runAsNonRoot":true},"storage":{"engine":"wiredTiger","inMemory":{"engineConfig":{"inMemorySizeRatio":0.9}},"wiredTiger":{"collectionConfig":{"blockCompressor":"snappy"},"engineConfig":{"cacheSizeRatio":0.5,"journalCompressor":"snappy"},"indexConfig":{"prefixCompression":true}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"serviceAccountName":"default","podDisruptionBudget":{"maxUnavailable":1}}],"secrets":{"users":"sonar-mongodb-cluster-secrets","ssl":"sonar-mongodb-cluster-ssl","sslInternal":"sonar-mongodb-cluster-ssl-internal"},"backup":{"enabled":false,"image":"percona/percona-server-mongodb-operator:1.7.0-backup","serviceAccountName":"percona-server-mongodb-operator"},"imagePullPolicy":"Always","pmm":{"serverHost":"monitoring-service","image":"percona/pmm-client:2.12.0"},"updateStrategy":"SmartUpdate","upgradeOptions":{"versionServiceEndpoint":"https://check.percona.com","apply":"recommended","schedule":"0 2 * * *"},"clusterServiceDNSSuffix":"svc.cluster.local","sharding":{"enabled":false,"configsvrReplSet":{"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}},"name":"","size":1,"arbiter":{"enabled":false,"size":0},"expose":{"enabled":false},"volumeSpec":{"persistentVolumeClaim":{"resources":{"requests":{"storage":"3Gi"}}}},"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1}},"mongos":{"affinity":{"antiAffinityTopologyKey":"kubernetes.io/hostname"},"podDisruptionBudget":{"maxUnavailable":1},"expose":{"enabled":false,"exposeType":"ClusterIP"},"size":1,"resources":{"limits":{"cpu":"300m","memory":"0.5G"},"requests":{"cpu":"300m","memory":"0.5G"}}}}},"status":{"state":"initializing","mongoVersion":"4.4.3-5","mongoImage":"percona/percona-server-mongodb:4.4.3-5","conditions":[{"status":"True","type":"ClusterInitializing","lastTransitionTime":"2021-04-09T01:36:07Z"}],"replsets":{"rs0":{"size":3,"ready":0,"status":"initializing"}},"observedGeneration":2,"backupVersion":"1.4.1","pmmVersion":"2.12.0","host":"sonar-mongodb-cluster-rs0.default.svc.cluster.local"}}
2021/04/09 01:36:25 [SONAR-CACHE-READ]	Get	perconaservermongodb	default	sonar-mongodb-cluster	NoError
2021/04/09 01:36:25 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-mongodb-cluster-cfg	NotFound
2021/04/09 01:36:25 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:36:25 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:36:25 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-secrets	NoError
2021/04/09 01:36:25 [SONAR-CACHE-READ]	Get	secret	default	internal-sonar-mongodb-cluster-users	NoError
2021/04/09 01:36:25 [SONAR-CACHE-READ]	List	statefulsetlist	NoError
2021/04/09 01:36:25 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-ssl	NoError
2021/04/09 01:36:25 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-keyfile	NoError
2021/04/09 01:36:25 [SONAR-CACHE-READ]	Get	secret	default	sonar-mongodb-cluster-mongodb-encryption-key	NoError
2021/04/09 01:36:28 [SONAR-EVENT]	74	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"a83d6911-b197-40b9-ad0b-573c7ac61037","resourceVersion":"2312","creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-548cbf9748","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f0e60324-5532-4223-945a-99d9a976e045\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:36:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.6\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:03Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z","reason":"ContainersNotReady","message":"containers with unready status: [mongod]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.6","podIPs":[{"ip":"10.244.3.6"}],"startTime":"2021-04-09T01:36:02Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:36:03Z","finishedAt":"2021-04-09T01:36:03Z","containerID":"containerd://5b70ca73522ab858a5423eec9b6bb1b210c1916fa11877282ae106ee00f46929"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5b70ca73522ab858a5423eec9b6bb1b210c1916fa11877282ae106ee00f46929"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:36:03Z"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://a061883d57196b912c465e29f3ec4efebe4564d0faf550ade77ec534338b32f6","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:36:31 [SONAR-EVENT]	75	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-0","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-0","uid":"a83d6911-b197-40b9-ad0b-573c7ac61037","resourceVersion":"2353","creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-548cbf9748","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f0e60324-5532-4223-945a-99d9a976e045\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:36:15Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.6\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-0"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-0","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:03Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:15Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:15Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:02Z"}],"hostIP":"192.168.96.8","podIP":"10.244.3.6","podIPs":[{"ip":"10.244.3.6"}],"startTime":"2021-04-09T01:36:02Z","initContainerStatuses":[{"name":"mongo-init","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T01:36:03Z","finishedAt":"2021-04-09T01:36:03Z","containerID":"containerd://5b70ca73522ab858a5423eec9b6bb1b210c1916fa11877282ae106ee00f46929"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/xudongs/mongodb-operator:learn","imageID":"docker.io/xudongs/mongodb-operator@sha256:b552171877c8729a683c4a139bed7d1a3c9ce382ad7ea7a4e120fb3dd6b62d12","containerID":"containerd://5b70ca73522ab858a5423eec9b6bb1b210c1916fa11877282ae106ee00f46929"}],"containerStatuses":[{"name":"mongod","state":{"running":{"startedAt":"2021-04-09T01:36:03Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/percona/percona-server-mongodb:4.4.3-5","imageID":"docker.io/percona/percona-server-mongodb@sha256:28c137c87dc0ed3530398ee281b6998a902ca5bc39bf766f42de03b1dfc1fc57","containerID":"containerd://a061883d57196b912c465e29f3ec4efebe4564d0faf550ade77ec534338b32f6","started":true}],"qosClass":"Guaranteed"}}
2021/04/09 01:36:31 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 01:36:34 [SONAR-EVENT]	76	Updated	statefulset	{"metadata":{"name":"sonar-mongodb-cluster-rs0","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","resourceVersion":"2458","generation":1,"creationTimestamp":"2021-04-09T01:35:59Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"ownerReferences":[{"apiVersion":"psmdb.percona.com/v1-7-0","kind":"PerconaServerMongoDB","name":"sonar-mongodb-cluster","uid":"7c806eaa-0103-4958-ac7d-9cb42fc8308d","controller":true}],"managedFields":[{"manager":"percona-server-mongodb-operator","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:35:59Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"7c806eaa-0103-4958-ac7d-9cb42fc8308d\"}":{".":{},"f:apiVersion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}},"f:updateStrategy":{"f:type":{}},"f:volumeClaimTemplates":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T01:36:30Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":3,"selector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"}},"spec":{"volumes":[{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler"}},"volumeClaimTemplates":[{"kind":"PersistentVolumeClaim","apiVersion":"v1","metadata":{"name":"mongod-data","namespace":"default","creationTimestamp":null},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"3Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-mongodb-cluster-rs0","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":3,"readyReplicas":2,"currentReplicas":3,"updatedReplicas":3,"currentRevision":"sonar-mongodb-cluster-rs0-548cbf9748","updateRevision":"sonar-mongodb-cluster-rs0-548cbf9748","collisionCount":0}}
2021/04/09 01:36:37 [SONAR-EVENT]	77	Added	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"fe0b23ad-5399-4b45-8e34-c4f0b887d0c8","resourceVersion":"2359","creationTimestamp":"2021-04-09T01:36:15Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-548cbf9748","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:36:15Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f0e60324-5532-4223-945a-99d9a976e045\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","qosClass":"Guaranteed"}}
2021/04/09 01:36:40 [SONAR-EVENT]	78	Updated	pod	{"metadata":{"name":"sonar-mongodb-cluster-rs0-1","generateName":"sonar-mongodb-cluster-rs0-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-mongodb-cluster-rs0-1","uid":"fe0b23ad-5399-4b45-8e34-c4f0b887d0c8","resourceVersion":"2389","creationTimestamp":"2021-04-09T01:36:15Z","labels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0","controller-revision-hash":"sonar-mongodb-cluster-rs0-548cbf9748","statefulset.kubernetes.io/pod-name":"sonar-mongodb-cluster-rs0-1"},"annotations":{"percona.com/ssl-hash":"627e381fadaa1c1251e88a257c41a876","percona.com/ssl-internal-hash":"196eb667d64c5c8f8caae2f6ba4b76e6"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-mongodb-cluster-rs0","uid":"f0e60324-5532-4223-945a-99d9a976e045","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T01:36:15Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:percona.com/ssl-hash":{},"f:percona.com/ssl-internal-hash":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:app.kubernetes.io/replset":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"f0e60324-5532-4223-945a-99d9a976e045\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:affinity":{".":{},"f:podAntiAffinity":{".":{},"f:requiredDuringSchedulingIgnoredDuringExecution":{}}},"f:containers":{"k:{\"name\":\"mongod\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"MONGODB_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MONGODB_REPLSET\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:envFrom":{},"f:image":{},"f:imagePullPolicy":{},"f:livenessProbe":{".":{},"f:exec":{".":{},"f:command":{}},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":27017,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:runAsNonRoot":{},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/mongodb-encryption\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-secrets\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}},"k:{\"mountPath\":\"/etc/mongodb-ssl-internal\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}},"f:workingDir":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"mongo-init\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/data/db\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"mongod-data\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-encryption-key\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"sonar-mongodb-cluster-mongodb-keyfile\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}},"k:{\"name\":\"ssl-internal\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:optional":{},"f:secretName":{}}}}}}}]},"spec":{"volumes":[{"name":"mongod-data","persistentVolumeClaim":{"claimName":"mongod-data-sonar-mongodb-cluster-rs0-1"}},{"name":"sonar-mongodb-cluster-mongodb-keyfile","secret":{"secretName":"sonar-mongodb-cluster-mongodb-keyfile","defaultMode":288,"optional":false}},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","secret":{"secretName":"sonar-mongodb-cluster-mongodb-encryption-key","defaultMode":288,"optional":false}},{"name":"ssl","secret":{"secretName":"sonar-mongodb-cluster-ssl","defaultMode":288,"optional":false}},{"name":"ssl-internal","secret":{"secretName":"sonar-mongodb-cluster-ssl-internal","defaultMode":288,"optional":true}},{"name":"default-token-mdwgl","secret":{"secretName":"default-token-mdwgl","defaultMode":420}}],"initContainers":[{"name":"mongo-init","image":"xudongs/mongodb-operator:learn","command":["/init-entrypoint.sh"],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"containers":[{"name":"mongod","image":"percona/percona-server-mongodb:4.4.3-5","command":["/data/db/ps-entry.sh"],"args":["--bind_ip_all","--auth","--dbpath=/data/db","--port=27017","--replSet=rs0","--storageEngine=wiredTiger","--relaxPermChecks","--sslAllowInvalidCertificates","--sslMode=preferSSL","--clusterAuthMode=x509","--slowms=100","--profile=1","--rateLimit=100","--enableEncryption","--encryptionKeyFile=/etc/mongodb-encryption/encryption-key","--encryptionCipherMode=AES256-CBC","--wiredTigerCacheSizeGB=0.25","--wiredTigerCollectionBlockCompressor=snappy","--wiredTigerJournalCompressor=snappy","--wiredTigerIndexPrefixCompression=true","--setParameter","ttlMonitorSleepSecs=60","--setParameter","wiredTigerConcurrentReadTransactions=128","--setParameter","wiredTigerConcurrentWriteTransactions=128"],"workingDir":"/data/db","ports":[{"name":"mongodb","containerPort":27017,"protocol":"TCP"}],"envFrom":[{"secretRef":{"name":"internal-sonar-mongodb-cluster-users","optional":false}}],"env":[{"name":"SERVICE_NAME","value":"sonar-mongodb-cluster"},{"name":"NAMESPACE","value":"default"},{"name":"MONGODB_PORT","value":"27017"},{"name":"MONGODB_REPLSET","value":"rs0"}],"resources":{"limits":{"cpu":"300m","memory":"500M"},"requests":{"cpu":"300m","memory":"500M"}},"volumeMounts":[{"name":"mongod-data","mountPath":"/data/db"},{"name":"sonar-mongodb-cluster-mongodb-keyfile","readOnly":true,"mountPath":"/etc/mongodb-secrets"},{"name":"ssl","readOnly":true,"mountPath":"/etc/mongodb-ssl"},{"name":"ssl-internal","readOnly":true,"mountPath":"/etc/mongodb-ssl-internal"},{"name":"sonar-mongodb-cluster-mongodb-encryption-key","readOnly":true,"mountPath":"/etc/mongodb-encryption"},{"name":"default-token-mdwgl","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/data/db/mongodb-healthcheck","k8s","liveness","--ssl","--sslInsecure","--sslCAFile","/etc/mongodb-ssl/ca.crt","--sslPEMKeyFile","/tmp/tls.pem","--startupDelaySeconds","7200"]},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":30,"successThreshold":1,"failureThreshold":4},"readinessProbe":{"tcpSocket":{"port":27017},"initialDelaySeconds":10,"timeoutSeconds":2,"periodSeconds":3,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"runAsUser":1001,"runAsNonRoot":true}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"kind-worker3","securityContext":{"fsGroup":1001},"hostname":"sonar-mongodb-cluster-rs0-1","subdomain":"sonar-mongodb-cluster-rs0","affinity":{"podAntiAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":[{"labelSelector":{"matchLabels":{"app.kubernetes.io/component":"mongod","app.kubernetes.io/instance":"sonar-mongodb-cluster","app.kubernetes.io/managed-by":"percona-server-mongodb-operator","app.kubernetes.io/name":"percona-server-mongodb","app.kubernetes.io/part-of":"percona-server-mongodb","app.kubernetes.io/replset":"rs0"}},"topologyKey":"kubernetes.io/hostname"}]}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T01:36:17Z"}],"qosClass":"Guaranteed"}}
