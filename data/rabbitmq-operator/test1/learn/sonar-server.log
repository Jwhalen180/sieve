2021/04/09 00:55:06 registering rpc server...
2021/04/09 00:55:06 config:
map[crds:[rabbitmqcluster] mode:learn]
2021/04/09 00:55:06 learn
2021/04/09 00:55:06 start learnServer...
2021/04/09 00:55:06 setting up connection...
2021/04/09 00:55:09 no event happening
2021/04/09 00:55:12 no event happening
2021/04/09 00:55:15 no event happening
2021/04/09 00:55:18 no event happening
2021/04/09 00:55:21 no event happening
2021/04/09 00:55:24 no event happening
2021/04/09 00:55:27 no event happening
2021/04/09 00:55:30 no event happening
2021/04/09 00:55:33 no event happening
2021/04/09 00:55:36 no event happening
2021/04/09 00:55:39 no event happening
2021/04/09 00:55:42 no event happening
2021/04/09 00:55:45 no event happening
2021/04/09 00:55:48 no event happening
2021/04/09 00:55:51 no event happening
2021/04/09 00:55:54 no event happening
2021/04/09 00:55:57 no event happening
2021/04/09 00:56:00 no event happening
2021/04/09 00:56:03 no event happening
2021/04/09 00:56:06 no event happening
2021/04/09 00:56:09 no event happening
2021/04/09 00:56:12 no event happening
2021/04/09 00:56:15 no event happening
2021/04/09 00:56:18 no event happening
2021/04/09 00:56:21 no event happening
2021/04/09 00:56:24 no event happening
2021/04/09 00:56:27 no event happening
2021/04/09 00:56:30 no event happening
2021/04/09 00:56:33 no event happening
2021/04/09 00:56:36 no event happening
2021/04/09 00:56:39 no event happening
2021/04/09 00:56:42 no event happening
2021/04/09 00:56:45 no event happening
2021/04/09 00:56:48 no event happening
2021/04/09 00:56:51 no event happening
2021/04/09 00:56:54 no event happening
2021/04/09 00:56:57 no event happening
2021/04/09 00:57:00 no event happening
2021/04/09 00:57:03 no event happening
2021/04/09 00:57:06 [SONAR-EVENT]	0	Added	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","resourceVersion":"1350","generation":1,"creationTimestamp":"2021-04-09T00:57:04Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":null}}
2021/04/09 00:57:06 [SONAR-START-RECONCILE]	rabbitmqcluster	0
2021/04/09 00:57:06 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:06 [SONAR-SIDE-EFFECT]	Update	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:06 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:57:06 [SONAR-CACHE-READ]	Get	endpoints	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:57:06 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:57:06 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster-nodes	NotFound
2021/04/09 00:57:06 [SONAR-SIDE-EFFECT]	Create	service	default	sonar-rabbitmq-cluster-nodes	NoError
2021/04/09 00:57:09 [SONAR-EVENT]	1	Updated	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","resourceVersion":"1358","generation":2,"creationTimestamp":"2021-04-09T00:57:04Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":null}}
2021/04/09 00:57:12 [SONAR-EVENT]	2	Added	service	{"metadata":{"name":"sonar-rabbitmq-cluster-nodes","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-rabbitmq-cluster-nodes","uid":"5dbc7a8c-4637-4ed2-b891-93b58bf61d5a","resourceVersion":"1360","creationTimestamp":"2021-04-09T00:57:06Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":4369,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":25672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:publishNotReadyAddresses":{},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"epmd","protocol":"TCP","port":4369,"targetPort":4369},{"name":"cluster-rpc","protocol":"TCP","port":25672,"targetPort":25672}],"selector":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None","publishNotReadyAddresses":true},"status":{"loadBalancer":{}}}
2021/04/09 00:57:12 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:57:12 [SONAR-SIDE-EFFECT]	Create	service	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:12 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-erlang-cookie	NotFound
2021/04/09 00:57:12 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-rabbitmq-cluster-erlang-cookie	NoError
2021/04/09 00:57:15 [SONAR-EVENT]	3	Updated	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","resourceVersion":"1359","generation":2,"creationTimestamp":"2021-04-09T00:57:04Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ClusterAvailable","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"CouldNotRetrieveEndpoints","message":"Could not verify available service endpoints"},{"type":"NoWarnings","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"Initialising"}]}}
2021/04/09 00:57:18 [SONAR-EVENT]	4	Added	service	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-rabbitmq-cluster","uid":"b5fb08e8-13b5-49de-98af-3296475b4a48","resourceVersion":"1394","creationTimestamp":"2021-04-09T00:57:12Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:12Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:ports":{".":{},"k:{\"port\":5672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":15672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"amqp","protocol":"TCP","port":5672,"targetPort":5672},{"name":"management","protocol":"TCP","port":15672,"targetPort":15672}],"selector":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"},"clusterIP":"10.96.31.179","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/09 00:57:21 [SONAR-EVENT]	5	Added	secret	{"metadata":{"name":"sonar-rabbitmq-cluster-erlang-cookie","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-rabbitmq-cluster-erlang-cookie","uid":"a19e7e7f-351b-40b6-a754-0351bb093e14","resourceVersion":"1398","creationTimestamp":"2021-04-09T00:57:12Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:12Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.erlang.cookie":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{".erlang.cookie":"UjhXTFdMWFdESFNQSm1ZR1V4cWgtRV9NbHRGV2hwS2Y="},"type":"Opaque"}
2021/04/09 00:57:21 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-default-user	NotFound
2021/04/09 00:57:21 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-rabbitmq-cluster-default-user	NoError
2021/04/09 00:57:21 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-plugins-conf	NotFound
2021/04/09 00:57:21 [SONAR-SIDE-EFFECT]	Create	configmap	default	sonar-rabbitmq-cluster-plugins-conf	NoError
2021/04/09 00:57:24 [SONAR-EVENT]	6	Added	secret	{"metadata":{"name":"sonar-rabbitmq-cluster-default-user","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-rabbitmq-cluster-default-user","uid":"fad9b75e-a52b-4e8d-9664-8348bca7fef0","resourceVersion":"1441","creationTimestamp":"2021-04-09T00:57:21Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:default_user.conf":{},"f:password":{},"f:provider":{},"f:type":{},"f:username":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"default_user.conf":"ZGVmYXVsdF91c2VyID0gdjZqYTJBMXdJSkV5QTdRQnRoWWJFbHNOZjIzYTVOQmEKZGVmYXVsdF9wYXNzID0gR0J1SG84eFp4U21CSjRIWHNaeUQ0Zy1IdVhkNWV4d2sK","password":"R0J1SG84eFp4U21CSjRIWHNaeUQ0Zy1IdVhkNWV4d2s=","provider":"cmFiYml0bXE=","type":"cmFiYml0bXE=","username":"djZqYTJBMXdJSkV5QTdRQnRoWWJFbHNOZjIzYTVOQmE="},"type":"Opaque"}
2021/04/09 00:57:27 [SONAR-EVENT]	7	Added	configmap	{"metadata":{"name":"sonar-rabbitmq-cluster-plugins-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/sonar-rabbitmq-cluster-plugins-conf","uid":"0590f423-c79b-4f27-8043-137d6894f24b","resourceVersion":"1443","creationTimestamp":"2021-04-09T00:57:21Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:enabled_plugins":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"enabled_plugins":"[rabbitmq_peer_discovery_k8s,rabbitmq_prometheus,rabbitmq_management]."}}
2021/04/09 00:57:27 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NotFound
2021/04/09 00:57:27 [SONAR-SIDE-EFFECT]	Create	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:57:27 [SONAR-CACHE-READ]	Get	serviceaccount	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:57:27 [SONAR-SIDE-EFFECT]	Create	serviceaccount	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:27 [SONAR-CACHE-READ]	Get	role	default	sonar-rabbitmq-cluster-peer-discovery	NotFound
2021/04/09 00:57:27 [SONAR-SIDE-EFFECT]	Create	role	default	sonar-rabbitmq-cluster-peer-discovery	NoError
2021/04/09 00:57:27 [SONAR-CACHE-READ]	Get	rolebinding	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:57:27 [SONAR-SIDE-EFFECT]	Create	rolebinding	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:27 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:57:27 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:57:27 [SONAR-SIDE-EFFECT]	Create	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:30 [SONAR-EVENT]	8	Added	configmap	{"metadata":{"name":"sonar-rabbitmq-cluster-server-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/sonar-rabbitmq-cluster-server-conf","uid":"1a1d9389-9082-4bca-93fd-49d3a3139f9e","resourceVersion":"1470","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:operatorDefaults.conf":{},"f:userDefinedConfiguration.conf":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"operatorDefaults.conf":"cluster_formation.peer_discovery_backend             = rabbit_peer_discovery_k8s\ncluster_formation.k8s.host                           = kubernetes.default\ncluster_formation.k8s.address_type                   = hostname\ncluster_partition_handling                           = pause_minority\nqueue_master_locator                                 = min-masters\ndisk_free_limit.absolute                             = 2GB\ncluster_formation.randomized_startup_delay_range.min = 5\ncluster_formation.randomized_startup_delay_range.max = 30\ncluster_name                                         = sonar-rabbitmq-cluster\n","userDefinedConfiguration.conf":"total_memory_available_override_value = 1717986919\n"}}
2021/04/09 00:57:33 [SONAR-EVENT]	9	Added	serviceaccount	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/sonar-rabbitmq-cluster-server","uid":"b2dc96c3-cd3f-46f0-9e3b-3bc66daf9352","resourceVersion":"1472","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]}}
2021/04/09 00:57:36 [SONAR-EVENT]	10	Added	role	{"metadata":{"name":"sonar-rabbitmq-cluster-peer-discovery","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/roles/sonar-rabbitmq-cluster-peer-discovery","uid":"089c1dbd-1872-4e4e-8b5b-1463ff572929","resourceVersion":"1476","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:rules":{}}}]},"rules":[{"verbs":["get"],"apiGroups":[""],"resources":["endpoints"]},{"verbs":["create"],"apiGroups":[""],"resources":["events"]}]}
2021/04/09 00:57:39 [SONAR-EVENT]	11	Added	rolebinding	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/rolebindings/sonar-rabbitmq-cluster-server","uid":"05ed53fb-0e97-4931-995d-8f7368fe00ea","resourceVersion":"1478","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:roleRef":{"f:apiGroup":{},"f:kind":{},"f:name":{}},"f:subjects":{}}}]},"subjects":[{"kind":"ServiceAccount","name":"sonar-rabbitmq-cluster-server"}],"roleRef":{"apiGroup":"rbac.authorization.k8s.io","kind":"Role","name":"sonar-rabbitmq-cluster-peer-discovery"}}
2021/04/09 00:57:42 [SONAR-EVENT]	12	Added	statefulset	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","resourceVersion":"1480","generation":1,"creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"replicas":0}}
2021/04/09 00:57:42 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:42 [SONAR-SIDE-EFFECT]	Update	statefulset	default	sonar-rabbitmq-cluster-server	Conflict
2021/04/09 00:57:45 [SONAR-EVENT]	13	Updated	serviceaccount	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/sonar-rabbitmq-cluster-server","uid":"b2dc96c3-cd3f-46f0-9e3b-3bc66daf9352","resourceVersion":"1475","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:secrets":{".":{},"k:{\"name\":\"sonar-rabbitmq-cluster-server-token-q9bpm\"}":{".":{},"f:name":{}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"secrets":[{"name":"sonar-rabbitmq-cluster-server-token-q9bpm"}]}
2021/04/09 00:57:48 [SONAR-EVENT]	14	Updated	statefulset	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","resourceVersion":"1491","generation":1,"creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"sonar-rabbitmq-cluster-server-594479b66","updateRevision":"sonar-rabbitmq-cluster-server-594479b66","collisionCount":0}}
2021/04/09 00:57:48 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:48 [SONAR-SIDE-EFFECT]	Update	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:48 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:57:51 [SONAR-EVENT]	15	Updated	statefulset	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","resourceVersion":"1615","generation":1,"creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"rabbitmq.com/createdAt":"2021-04-09T00:57:27Z"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:rabbitmq.com/createdAt":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"sonar-rabbitmq-cluster-server-594479b66","updateRevision":"sonar-rabbitmq-cluster-server-594479b66","collisionCount":0}}
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:51 [SONAR-EVENT]	16	Updated	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","resourceVersion":"1616","generation":2,"creationTimestamp":"2021-04-09T00:57:04Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ClusterAvailable","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"CouldNotRetrieveEndpoints","message":"Could not verify available service endpoints"},{"type":"NoWarnings","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"sonar-rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"sonar-rabbitmq-cluster","namespace":"default"}}}}
2021/04/09 00:57:51 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	0
2021/04/09 00:57:51 [SONAR-START-RECONCILE]	rabbitmqcluster	1
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	endpoints	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster-nodes	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-erlang-cookie	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-default-user	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-plugins-conf	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	serviceaccount	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	role	default	sonar-rabbitmq-cluster-peer-discovery	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	rolebinding	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:51 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-SIDE-EFFECT]	Update	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-EVENT]	17	Updated	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","resourceVersion":"1635","generation":2,"creationTimestamp":"2021-04-09T00:57:04Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"False","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NotAllPodsReady","message":"0/1 Pods ready"},{"type":"ClusterAvailable","status":"False","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NoEndpointsAvailable","message":"The service has no endpoints available"},{"type":"NoWarnings","status":"True","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NoWarnings"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"sonar-rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"sonar-rabbitmq-cluster","namespace":"default"}}}}
2021/04/09 00:57:52 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	1
2021/04/09 00:57:52 [SONAR-START-RECONCILE]	rabbitmqcluster	2
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	endpoints	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster-nodes	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-erlang-cookie	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-default-user	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-plugins-conf	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	serviceaccount	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	role	default	sonar-rabbitmq-cluster-peer-discovery	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	rolebinding	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-SIDE-EFFECT]	Update	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 no event happening
2021/04/09 00:57:52 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	2
2021/04/09 00:57:52 [SONAR-START-RECONCILE]	rabbitmqcluster	3
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	endpoints	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster-nodes	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-erlang-cookie	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-default-user	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-plugins-conf	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	serviceaccount	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	role	default	sonar-rabbitmq-cluster-peer-discovery	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	rolebinding	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-SIDE-EFFECT]	Update	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:57:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:57:52 no event happening
2021/04/09 00:57:52 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	3
2021/04/09 00:57:55 [SONAR-EVENT]	18	Updated	statefulset	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","resourceVersion":"1653","generation":1,"creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"rabbitmq.com/createdAt":"2021-04-09T00:57:27Z"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:rabbitmq.com/createdAt":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:53Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"readyReplicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"sonar-rabbitmq-cluster-server-594479b66","updateRevision":"sonar-rabbitmq-cluster-server-594479b66","collisionCount":0}}
2021/04/09 00:57:55 [SONAR-START-RECONCILE]	rabbitmqcluster	4
2021/04/09 00:57:58 [SONAR-EVENT]	19	Updated	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","resourceVersion":"1657","generation":3,"creationTimestamp":"2021-04-09T00:57:04Z","deletionTimestamp":"2021-04-09T00:57:54Z","deletionGracePeriodSeconds":0,"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"False","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NotAllPodsReady","message":"0/1 Pods ready"},{"type":"ClusterAvailable","status":"False","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NoEndpointsAvailable","message":"The service has no endpoints available"},{"type":"NoWarnings","status":"True","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NoWarnings"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"sonar-rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"sonar-rabbitmq-cluster","namespace":"default"}}}}
2021/04/09 00:57:58 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:58:01 [SONAR-EVENT]	20	Replaced	pod	{"metadata":{"name":"sonar-rabbitmq-cluster-server-0","generateName":"sonar-rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-rabbitmq-cluster-server-0","uid":"7863c9d5-8b00-4045-a86a-01861a8f1b1a","resourceVersion":"1648","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"sonar-rabbitmq-cluster-server-594479b66","statefulset.kubernetes.io/pod-name":"sonar-rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"8a48e4c2-754b-4dc1-84b3-49f65c0557f9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:53Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-sonar-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","secret":{"secretName":"sonar-rabbitmq-cluster-server-token-q9bpm","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker2","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"sonar-rabbitmq-cluster-server-0","subdomain":"sonar-rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:36Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:53Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:53Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:30Z"}],"hostIP":"192.168.96.7","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T00:57:30Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:35Z","finishedAt":"2021-04-09T00:57:35Z","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}],"containerStatuses":[{"name":"rabbitmq","state":{"running":{"startedAt":"2021-04-09T00:57:36Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d","started":true}],"qosClass":"Burstable"}}
2021/04/09 00:58:01 [SONAR-CACHE-READ]	List	podlist	NoError
2021/04/09 00:58:01 [SONAR-SIDE-EFFECT]	Update	pod	default	sonar-rabbitmq-cluster-server-0	NoError
2021/04/09 00:58:01 [SONAR-SIDE-EFFECT]	Delete	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:58:01 [SONAR-SIDE-EFFECT]	Update	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:58:01 [SONAR-EVENT]	21	Updated	pod	{"metadata":{"name":"sonar-rabbitmq-cluster-server-0","generateName":"sonar-rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-rabbitmq-cluster-server-0","uid":"7863c9d5-8b00-4045-a86a-01861a8f1b1a","resourceVersion":"1686","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"sonar-rabbitmq-cluster-server-594479b66","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"sonar-rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"8a48e4c2-754b-4dc1-84b3-49f65c0557f9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:53Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-sonar-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","secret":{"secretName":"sonar-rabbitmq-cluster-server-token-q9bpm","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker2","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"sonar-rabbitmq-cluster-server-0","subdomain":"sonar-rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:36Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:53Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:53Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:30Z"}],"hostIP":"192.168.96.7","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T00:57:30Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:35Z","finishedAt":"2021-04-09T00:57:35Z","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}],"containerStatuses":[{"name":"rabbitmq","state":{"running":{"startedAt":"2021-04-09T00:57:36Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d","started":true}],"qosClass":"Burstable"}}
2021/04/09 00:58:01 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	4
2021/04/09 00:58:01 [SONAR-START-RECONCILE]	rabbitmqcluster	5
2021/04/09 00:58:04 [SONAR-EVENT]	22	Deleted	statefulset	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","resourceVersion":"1687","generation":1,"creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"rabbitmq.com/createdAt":"2021-04-09T00:57:27Z"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:48Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:rabbitmq.com/createdAt":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}},{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:57:53Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"readyReplicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"sonar-rabbitmq-cluster-server-594479b66","updateRevision":"sonar-rabbitmq-cluster-server-594479b66","collisionCount":0}}
2021/04/09 00:58:07 [SONAR-EVENT]	23	Deleted	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","resourceVersion":"1688","generation":3,"creationTimestamp":"2021-04-09T00:57:04Z","deletionTimestamp":"2021-04-09T00:57:54Z","deletionGracePeriodSeconds":0,"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:04Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:57:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{},"f:defaultUser":{".":{},"f:secretReference":{".":{},"f:keys":{".":{},"f:password":{},"f:username":{}},"f:name":{},"f:namespace":{}},"f:serviceReference":{".":{},"f:name":{},"f:namespace":{}}}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"False","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NotAllPodsReady","message":"0/1 Pods ready"},{"type":"ClusterAvailable","status":"False","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NoEndpointsAvailable","message":"The service has no endpoints available"},{"type":"NoWarnings","status":"True","lastTransitionTime":"2021-04-09T00:57:51Z","reason":"NoWarnings"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-09T00:57:06Z","reason":"Initialising"}],"defaultUser":{"secretReference":{"name":"sonar-rabbitmq-cluster-default-user","namespace":"default","keys":{"password":"password","username":"username"}},"serviceReference":{"name":"sonar-rabbitmq-cluster","namespace":"default"}}}}
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	24	Deleted	secret	{"metadata":{"name":"sonar-rabbitmq-cluster-erlang-cookie","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-rabbitmq-cluster-erlang-cookie","uid":"a19e7e7f-351b-40b6-a754-0351bb093e14","resourceVersion":"1696","creationTimestamp":"2021-04-09T00:57:12Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:12Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.erlang.cookie":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{".erlang.cookie":"UjhXTFdMWFdESFNQSm1ZR1V4cWgtRV9NbHRGV2hwS2Y="},"type":"Opaque"}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	5
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	6
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	25	Deleted	configmap	{"metadata":{"name":"sonar-rabbitmq-cluster-plugins-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/sonar-rabbitmq-cluster-plugins-conf","uid":"0590f423-c79b-4f27-8043-137d6894f24b","resourceVersion":"1694","creationTimestamp":"2021-04-09T00:57:21Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:enabled_plugins":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"enabled_plugins":"[rabbitmq_peer_discovery_k8s,rabbitmq_prometheus,rabbitmq_management]."}}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	6
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	7
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	26	Deleted	role	{"metadata":{"name":"sonar-rabbitmq-cluster-peer-discovery","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/roles/sonar-rabbitmq-cluster-peer-discovery","uid":"089c1dbd-1872-4e4e-8b5b-1463ff572929","resourceVersion":"1695","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:rules":{}}}]},"rules":[{"verbs":["get"],"apiGroups":[""],"resources":["endpoints"]},{"verbs":["create"],"apiGroups":[""],"resources":["events"]}]}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	7
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	8
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	27	Deleted	rolebinding	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/rolebindings/sonar-rabbitmq-cluster-server","uid":"05ed53fb-0e97-4931-995d-8f7368fe00ea","resourceVersion":"1698","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:roleRef":{"f:apiGroup":{},"f:kind":{},"f:name":{}},"f:subjects":{}}}]},"subjects":[{"kind":"ServiceAccount","name":"sonar-rabbitmq-cluster-server"}],"roleRef":{"apiGroup":"rbac.authorization.k8s.io","kind":"Role","name":"sonar-rabbitmq-cluster-peer-discovery"}}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	8
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	9
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	28	Updated	pod	{"metadata":{"name":"sonar-rabbitmq-cluster-server-0","generateName":"sonar-rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-rabbitmq-cluster-server-0","uid":"7863c9d5-8b00-4045-a86a-01861a8f1b1a","resourceVersion":"1697","creationTimestamp":"2021-04-09T00:57:27Z","deletionTimestamp":"2021-04-16T00:58:01Z","deletionGracePeriodSeconds":604800,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"sonar-rabbitmq-cluster-server-594479b66","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"sonar-rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"8a48e4c2-754b-4dc1-84b3-49f65c0557f9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:53Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-sonar-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","secret":{"secretName":"sonar-rabbitmq-cluster-server-token-q9bpm","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker2","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"sonar-rabbitmq-cluster-server-0","subdomain":"sonar-rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:36Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:53Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:53Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:30Z"}],"hostIP":"192.168.96.7","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T00:57:30Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:35Z","finishedAt":"2021-04-09T00:57:35Z","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}],"containerStatuses":[{"name":"rabbitmq","state":{"running":{"startedAt":"2021-04-09T00:57:36Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d","started":true}],"qosClass":"Burstable"}}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	9
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	10
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	29	Deleted	service	{"metadata":{"name":"sonar-rabbitmq-cluster-nodes","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-rabbitmq-cluster-nodes","uid":"5dbc7a8c-4637-4ed2-b891-93b58bf61d5a","resourceVersion":"1699","creationTimestamp":"2021-04-09T00:57:06Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":4369,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":25672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:publishNotReadyAddresses":{},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"epmd","protocol":"TCP","port":4369,"targetPort":4369},{"name":"cluster-rpc","protocol":"TCP","port":25672,"targetPort":25672}],"selector":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None","publishNotReadyAddresses":true},"status":{"loadBalancer":{}}}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	10
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	11
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	30	Deleted	serviceaccount	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/sonar-rabbitmq-cluster-server","uid":"b2dc96c3-cd3f-46f0-9e3b-3bc66daf9352","resourceVersion":"1705","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:secrets":{".":{},"k:{\"name\":\"sonar-rabbitmq-cluster-server-token-q9bpm\"}":{".":{},"f:name":{}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"secrets":[{"name":"sonar-rabbitmq-cluster-server-token-q9bpm"}]}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	11
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	12
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	31	Deleted	secret	{"metadata":{"name":"sonar-rabbitmq-cluster-default-user","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-rabbitmq-cluster-default-user","uid":"fad9b75e-a52b-4e8d-9664-8348bca7fef0","resourceVersion":"1700","creationTimestamp":"2021-04-09T00:57:21Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:21Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:default_user.conf":{},"f:password":{},"f:provider":{},"f:type":{},"f:username":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"default_user.conf":"ZGVmYXVsdF91c2VyID0gdjZqYTJBMXdJSkV5QTdRQnRoWWJFbHNOZjIzYTVOQmEKZGVmYXVsdF9wYXNzID0gR0J1SG84eFp4U21CSjRIWHNaeUQ0Zy1IdVhkNWV4d2sK","password":"R0J1SG84eFp4U21CSjRIWHNaeUQ0Zy1IdVhkNWV4d2s=","provider":"cmFiYml0bXE=","type":"cmFiYml0bXE=","username":"djZqYTJBMXdJSkV5QTdRQnRoWWJFbHNOZjIzYTVOQmE="},"type":"Opaque"}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	12
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	13
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	32	Deleted	configmap	{"metadata":{"name":"sonar-rabbitmq-cluster-server-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/sonar-rabbitmq-cluster-server-conf","uid":"1a1d9389-9082-4bca-93fd-49d3a3139f9e","resourceVersion":"1707","creationTimestamp":"2021-04-09T00:57:27Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:operatorDefaults.conf":{},"f:userDefinedConfiguration.conf":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"operatorDefaults.conf":"cluster_formation.peer_discovery_backend             = rabbit_peer_discovery_k8s\ncluster_formation.k8s.host                           = kubernetes.default\ncluster_formation.k8s.address_type                   = hostname\ncluster_partition_handling                           = pause_minority\nqueue_master_locator                                 = min-masters\ndisk_free_limit.absolute                             = 2GB\ncluster_formation.randomized_startup_delay_range.min = 5\ncluster_formation.randomized_startup_delay_range.max = 30\ncluster_name                                         = sonar-rabbitmq-cluster\n","userDefinedConfiguration.conf":"total_memory_available_override_value = 1717986919\n"}}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	13
2021/04/09 00:58:07 [SONAR-START-RECONCILE]	rabbitmqcluster	14
2021/04/09 00:58:07 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:07 [SONAR-EVENT]	33	Updated	pod	{"metadata":{"name":"sonar-rabbitmq-cluster-server-0","generateName":"sonar-rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-rabbitmq-cluster-server-0","uid":"7863c9d5-8b00-4045-a86a-01861a8f1b1a","resourceVersion":"1735","creationTimestamp":"2021-04-09T00:57:27Z","deletionTimestamp":"2021-04-16T00:58:01Z","deletionGracePeriodSeconds":604800,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"sonar-rabbitmq-cluster-server-594479b66","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"sonar-rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"8a48e4c2-754b-4dc1-84b3-49f65c0557f9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-sonar-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","secret":{"secretName":"sonar-rabbitmq-cluster-server-token-q9bpm","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker2","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"sonar-rabbitmq-cluster-server-0","subdomain":"sonar-rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:36Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:58:06Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:58:06Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:30Z"}],"hostIP":"192.168.96.7","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T00:57:30Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:35Z","finishedAt":"2021-04-09T00:57:35Z","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}],"containerStatuses":[{"name":"rabbitmq","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:36Z","finishedAt":"2021-04-09T00:58:05Z","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d","started":false}],"qosClass":"Burstable"}}
2021/04/09 00:58:07 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	14
2021/04/09 00:58:10 [SONAR-EVENT]	34	Deleted	service	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-rabbitmq-cluster","uid":"b5fb08e8-13b5-49de-98af-3296475b4a48","resourceVersion":"1708","creationTimestamp":"2021-04-09T00:57:12Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"b4616291-8177-492c-9280-76173f421fa9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:12Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"b4616291-8177-492c-9280-76173f421fa9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:ports":{".":{},"k:{\"port\":5672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":15672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"amqp","protocol":"TCP","port":5672,"targetPort":5672},{"name":"management","protocol":"TCP","port":15672,"targetPort":15672}],"selector":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"},"clusterIP":"10.96.31.179","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/09 00:58:10 [SONAR-START-RECONCILE]	rabbitmqcluster	15
2021/04/09 00:58:10 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:10 [SONAR-EVENT]	35	Updated	pod	{"metadata":{"name":"sonar-rabbitmq-cluster-server-0","generateName":"sonar-rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-rabbitmq-cluster-server-0","uid":"7863c9d5-8b00-4045-a86a-01861a8f1b1a","resourceVersion":"1738","creationTimestamp":"2021-04-09T00:57:27Z","deletionTimestamp":"2021-04-09T00:58:01Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"sonar-rabbitmq-cluster-server-594479b66","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"sonar-rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"8a48e4c2-754b-4dc1-84b3-49f65c0557f9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-sonar-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","secret":{"secretName":"sonar-rabbitmq-cluster-server-token-q9bpm","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker2","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"sonar-rabbitmq-cluster-server-0","subdomain":"sonar-rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:36Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:58:06Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:58:06Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:30Z"}],"hostIP":"192.168.96.7","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T00:57:30Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:35Z","finishedAt":"2021-04-09T00:57:35Z","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}],"containerStatuses":[{"name":"rabbitmq","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:36Z","finishedAt":"2021-04-09T00:58:05Z","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d","started":false}],"qosClass":"Burstable"}}
2021/04/09 00:58:10 [SONAR-FINISH-RECONCILE]	rabbitmqcluster	15
2021/04/09 00:58:13 [SONAR-EVENT]	36	Deleted	pod	{"metadata":{"name":"sonar-rabbitmq-cluster-server-0","generateName":"sonar-rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-rabbitmq-cluster-server-0","uid":"7863c9d5-8b00-4045-a86a-01861a8f1b1a","resourceVersion":"1739","creationTimestamp":"2021-04-09T00:57:27Z","deletionTimestamp":"2021-04-09T00:58:01Z","deletionGracePeriodSeconds":0,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"sonar-rabbitmq-cluster-server-594479b66","skipPreStopChecks":"true","statefulset.kubernetes.io/pod-name":"sonar-rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-rabbitmq-cluster-server","uid":"8a48e4c2-754b-4dc1-84b3-49f65c0557f9","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:57:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"8a48e4c2-754b-4dc1-84b3-49f65c0557f9\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:01Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{"f:skipPreStopChecks":{}}}}},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:06Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:initContainerStatuses":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"10.244.3.3\"}":{".":{},"f:ip":{}}},"f:startTime":{}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-sonar-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","secret":{"secretName":"sonar-rabbitmq-cluster-server-token-q9bpm","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"sonar-rabbitmq-cluster-server-token-q9bpm","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker2","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"sonar-rabbitmq-cluster-server-0","subdomain":"sonar-rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:36Z"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:58:06Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:58:06Z","reason":"ContainersNotReady","message":"containers with unready status: [rabbitmq]"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:57:30Z"}],"hostIP":"192.168.96.7","podIP":"10.244.3.3","podIPs":[{"ip":"10.244.3.3"}],"startTime":"2021-04-09T00:57:30Z","initContainerStatuses":[{"name":"setup-container","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:35Z","finishedAt":"2021-04-09T00:57:35Z","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://9bdda5d1ae188f995f6ad5c727d67e637fae4ce66dadda9b2d105f233301e0fc"}],"containerStatuses":[{"name":"rabbitmq","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2021-04-09T00:57:36Z","finishedAt":"2021-04-09T00:58:05Z","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d"}},"lastState":{},"ready":false,"restartCount":0,"image":"docker.io/library/rabbitmq:3.8.12-management","imageID":"docker.io/library/rabbitmq@sha256:00ad24aace28bee5f903a3ce89c6e538d99a86dd764a2f86e26ef9a48327a66b","containerID":"containerd://a37f34579820ba7fc4e583ebb6df38211394ae7680cc92e4a5582bce39b0f48d","started":false}],"qosClass":"Burstable"}}
2021/04/09 00:58:16 no event happening
2021/04/09 00:58:19 no event happening
2021/04/09 00:58:22 no event happening
2021/04/09 00:58:25 no event happening
2021/04/09 00:58:28 no event happening
2021/04/09 00:58:31 no event happening
2021/04/09 00:58:34 no event happening
2021/04/09 00:58:37 no event happening
2021/04/09 00:58:40 no event happening
2021/04/09 00:58:43 no event happening
2021/04/09 00:58:46 no event happening
2021/04/09 00:58:49 no event happening
2021/04/09 00:58:52 [SONAR-EVENT]	37	Added	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","resourceVersion":"1949","generation":1,"creationTimestamp":"2021-04-09T00:58:51Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:58:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":null}}
2021/04/09 00:58:52 [SONAR-START-RECONCILE]	rabbitmqcluster	16
2021/04/09 00:58:52 [SONAR-CACHE-READ]	Get	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:58:52 [SONAR-SIDE-EFFECT]	Update	rabbitmqcluster	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:58:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:58:52 [SONAR-CACHE-READ]	Get	endpoints	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:52 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:58:52 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster-nodes	NotFound
2021/04/09 00:58:52 [SONAR-SIDE-EFFECT]	Create	service	default	sonar-rabbitmq-cluster-nodes	NoError
2021/04/09 00:58:55 [SONAR-EVENT]	38	Updated	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","resourceVersion":"1956","generation":2,"creationTimestamp":"2021-04-09T00:58:51Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:58:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:58:52Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":null}}
2021/04/09 00:58:58 [SONAR-EVENT]	39	Added	service	{"metadata":{"name":"sonar-rabbitmq-cluster-nodes","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-rabbitmq-cluster-nodes","uid":"25b821c1-0d94-4c50-bb17-a1123adc34da","resourceVersion":"1958","creationTimestamp":"2021-04-09T00:58:52Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:52Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:clusterIP":{},"f:ports":{".":{},"k:{\"port\":4369,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":25672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:publishNotReadyAddresses":{},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"epmd","protocol":"TCP","port":4369,"targetPort":4369},{"name":"cluster-rpc","protocol":"TCP","port":25672,"targetPort":25672}],"selector":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"},"clusterIP":"None","type":"ClusterIP","sessionAffinity":"None","publishNotReadyAddresses":true},"status":{"loadBalancer":{}}}
2021/04/09 00:58:58 [SONAR-CACHE-READ]	Get	service	default	sonar-rabbitmq-cluster	NotFound
2021/04/09 00:58:58 [SONAR-SIDE-EFFECT]	Create	service	default	sonar-rabbitmq-cluster	NoError
2021/04/09 00:58:58 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-erlang-cookie	NotFound
2021/04/09 00:58:58 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-rabbitmq-cluster-erlang-cookie	NoError
2021/04/09 00:59:01 [SONAR-EVENT]	40	Updated	rabbitmqcluster	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/apis/rabbitmq.com/v1beta1/namespaces/default/rabbitmqclusters/sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","resourceVersion":"1957","generation":2,"creationTimestamp":"2021-04-09T00:58:51Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"rabbitmq.com/v1beta1\",\"kind\":\"RabbitmqCluster\",\"metadata\":{\"annotations\":{},\"name\":\"sonar-rabbitmq-cluster\",\"namespace\":\"default\"},\"spec\":{\"replicas\":1}}\n"},"finalizers":["deletion.finalizers.rabbitmqclusters.rabbitmq.com"],"managedFields":[{"manager":"kubectl-client-side-apply","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:58:51Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}}},"f:spec":{".":{},"f:image":{},"f:persistence":{".":{},"f:storage":{}},"f:replicas":{},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:memory":{}}},"f:service":{".":{},"f:type":{}},"f:terminationGracePeriodSeconds":{}}}},{"manager":"manager","operation":"Update","apiVersion":"rabbitmq.com/v1beta1","time":"2021-04-09T00:58:52Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:finalizers":{}},"f:spec":{"f:override":{},"f:rabbitmq":{},"f:resources":{"f:limits":{"f:cpu":{}},"f:requests":{"f:cpu":{}}},"f:tls":{}},"f:status":{".":{},"f:conditions":{}}}}]},"spec":{"replicas":1,"image":"rabbitmq:3.8.12-management","service":{"type":"ClusterIP"},"persistence":{"storage":"10Gi"},"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"rabbitmq":{},"tls":{},"override":{},"terminationGracePeriodSeconds":604800},"status":{"conditions":[{"type":"AllReplicasReady","status":"Unknown","lastTransitionTime":"2021-04-09T00:58:52Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ClusterAvailable","status":"Unknown","lastTransitionTime":"2021-04-09T00:58:52Z","reason":"CouldNotRetrieveEndpoints","message":"Could not verify available service endpoints"},{"type":"NoWarnings","status":"Unknown","lastTransitionTime":"2021-04-09T00:58:52Z","reason":"MissingStatefulSet","message":"Could not find StatefulSet"},{"type":"ReconcileSuccess","status":"Unknown","lastTransitionTime":"2021-04-09T00:58:52Z","reason":"Initialising"}]}}
2021/04/09 00:59:04 [SONAR-EVENT]	41	Added	service	{"metadata":{"name":"sonar-rabbitmq-cluster","namespace":"default","selfLink":"/api/v1/namespaces/default/services/sonar-rabbitmq-cluster","uid":"1f8a82e3-5d8b-4b1d-b74a-bc741f952a31","resourceVersion":"1988","creationTimestamp":"2021-04-09T00:58:58Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:ports":{".":{},"k:{\"port\":5672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}},"k:{\"port\":15672,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{".":{},"f:app.kubernetes.io/name":{}},"f:sessionAffinity":{},"f:type":{}}}}]},"spec":{"ports":[{"name":"amqp","protocol":"TCP","port":5672,"targetPort":5672},{"name":"management","protocol":"TCP","port":15672,"targetPort":15672}],"selector":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"},"clusterIP":"10.96.116.77","type":"ClusterIP","sessionAffinity":"None"},"status":{"loadBalancer":{}}}
2021/04/09 00:59:07 [SONAR-EVENT]	42	Added	secret	{"metadata":{"name":"sonar-rabbitmq-cluster-erlang-cookie","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-rabbitmq-cluster-erlang-cookie","uid":"1d75c038-d8db-4e0a-ac1e-50d890981f55","resourceVersion":"1992","creationTimestamp":"2021-04-09T00:58:58Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:58:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.erlang.cookie":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{".erlang.cookie":"M1ZrYzVuaWtsZG5pZFhCbEh0Qmlxa3RGQ1RDUkxmLWI="},"type":"Opaque"}
2021/04/09 00:59:07 [SONAR-CACHE-READ]	Get	secret	default	sonar-rabbitmq-cluster-default-user	NotFound
2021/04/09 00:59:07 [SONAR-SIDE-EFFECT]	Create	secret	default	sonar-rabbitmq-cluster-default-user	NoError
2021/04/09 00:59:07 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-plugins-conf	NotFound
2021/04/09 00:59:07 [SONAR-SIDE-EFFECT]	Create	configmap	default	sonar-rabbitmq-cluster-plugins-conf	NoError
2021/04/09 00:59:10 [SONAR-EVENT]	43	Added	secret	{"metadata":{"name":"sonar-rabbitmq-cluster-default-user","namespace":"default","selfLink":"/api/v1/namespaces/default/secrets/sonar-rabbitmq-cluster-default-user","uid":"b1c894eb-9638-43fa-992d-3ade1bc6caed","resourceVersion":"2034","creationTimestamp":"2021-04-09T00:59:07Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:59:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:default_user.conf":{},"f:password":{},"f:provider":{},"f:type":{},"f:username":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:type":{}}}]},"data":{"default_user.conf":"ZGVmYXVsdF91c2VyID0geGdUMjQ1VjY3cWcyNmVxUVY0U0VvQ0lCZi1JNl81TDQKZGVmYXVsdF9wYXNzID0gVU8wNXV5dEZ3X1NZY09ZRGdEOExoa1dfSXBHV1Q4UzAK","password":"VU8wNXV5dEZ3X1NZY09ZRGdEOExoa1dfSXBHV1Q4UzA=","provider":"cmFiYml0bXE=","type":"cmFiYml0bXE=","username":"eGdUMjQ1VjY3cWcyNmVxUVY0U0VvQ0lCZi1JNl81TDQ="},"type":"Opaque"}
2021/04/09 00:59:13 [SONAR-EVENT]	44	Added	configmap	{"metadata":{"name":"sonar-rabbitmq-cluster-plugins-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/sonar-rabbitmq-cluster-plugins-conf","uid":"07dd3f8b-426c-4a41-8f08-f42fe37e55a6","resourceVersion":"2036","creationTimestamp":"2021-04-09T00:59:07Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:59:07Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:enabled_plugins":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"enabled_plugins":"[rabbitmq_peer_discovery_k8s,rabbitmq_prometheus,rabbitmq_management]."}}
2021/04/09 00:59:13 [SONAR-CACHE-READ]	Get	configmap	default	sonar-rabbitmq-cluster-server-conf	NotFound
2021/04/09 00:59:13 [SONAR-SIDE-EFFECT]	Create	configmap	default	sonar-rabbitmq-cluster-server-conf	NoError
2021/04/09 00:59:13 [SONAR-CACHE-READ]	Get	serviceaccount	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:59:13 [SONAR-SIDE-EFFECT]	Create	serviceaccount	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:59:13 [SONAR-CACHE-READ]	Get	role	default	sonar-rabbitmq-cluster-peer-discovery	NotFound
2021/04/09 00:59:13 [SONAR-SIDE-EFFECT]	Create	role	default	sonar-rabbitmq-cluster-peer-discovery	NoError
2021/04/09 00:59:13 [SONAR-CACHE-READ]	Get	rolebinding	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:59:13 [SONAR-SIDE-EFFECT]	Create	rolebinding	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:59:13 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:59:13 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NotFound
2021/04/09 00:59:13 [SONAR-SIDE-EFFECT]	Create	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:59:16 [SONAR-EVENT]	45	Added	configmap	{"metadata":{"name":"sonar-rabbitmq-cluster-server-conf","namespace":"default","selfLink":"/api/v1/namespaces/default/configmaps/sonar-rabbitmq-cluster-server-conf","uid":"bca63c67-a236-4985-a5df-a285c9d4e86f","resourceVersion":"2068","creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:operatorDefaults.conf":{},"f:userDefinedConfiguration.conf":{}},"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"data":{"operatorDefaults.conf":"cluster_formation.peer_discovery_backend             = rabbit_peer_discovery_k8s\ncluster_formation.k8s.host                           = kubernetes.default\ncluster_formation.k8s.address_type                   = hostname\ncluster_partition_handling                           = pause_minority\nqueue_master_locator                                 = min-masters\ndisk_free_limit.absolute                             = 2GB\ncluster_formation.randomized_startup_delay_range.min = 5\ncluster_formation.randomized_startup_delay_range.max = 30\ncluster_name                                         = sonar-rabbitmq-cluster\n","userDefinedConfiguration.conf":"total_memory_available_override_value = 1717986919\n"}}
2021/04/09 00:59:19 [SONAR-EVENT]	46	Added	serviceaccount	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/sonar-rabbitmq-cluster-server","uid":"5044f0ee-b08d-41af-9dba-bca611775451","resourceVersion":"2070","creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]}}
2021/04/09 00:59:22 [SONAR-EVENT]	47	Added	role	{"metadata":{"name":"sonar-rabbitmq-cluster-peer-discovery","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/roles/sonar-rabbitmq-cluster-peer-discovery","uid":"45205d5d-7a8d-414b-a47f-93508d9e9d20","resourceVersion":"2074","creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:rules":{}}}]},"rules":[{"verbs":["get"],"apiGroups":[""],"resources":["endpoints"]},{"verbs":["create"],"apiGroups":[""],"resources":["events"]}]}
2021/04/09 00:59:25 [SONAR-EVENT]	48	Added	rolebinding	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/rbac.authorization.k8s.io/v1/namespaces/default/rolebindings/sonar-rabbitmq-cluster-server","uid":"a74595d7-7f44-4749-a4f1-98a0ecc201c2","resourceVersion":"2076","creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"rbac.authorization.k8s.io/v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:roleRef":{"f:apiGroup":{},"f:kind":{},"f:name":{}},"f:subjects":{}}}]},"subjects":[{"kind":"ServiceAccount","name":"sonar-rabbitmq-cluster-server"}],"roleRef":{"apiGroup":"rbac.authorization.k8s.io","kind":"Role","name":"sonar-rabbitmq-cluster-peer-discovery"}}
2021/04/09 00:59:28 [SONAR-EVENT]	49	Added	statefulset	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-rabbitmq-cluster-server","uid":"2400147f-2eb9-4d4e-9656-a799cf81d03c","resourceVersion":"2078","generation":1,"creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"replicas":0}}
2021/04/09 00:59:28 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:59:28 [SONAR-SIDE-EFFECT]	Update	statefulset	default	sonar-rabbitmq-cluster-server	Conflict
2021/04/09 00:59:31 [SONAR-EVENT]	50	Added	pod	{"metadata":{"name":"sonar-rabbitmq-cluster-server-0","generateName":"sonar-rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-rabbitmq-cluster-server-0","uid":"60e16667-b98f-4700-84e5-e23473203d99","resourceVersion":"2084","creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"sonar-rabbitmq-cluster-server-594479b66","statefulset.kubernetes.io/pod-name":"sonar-rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-rabbitmq-cluster-server","uid":"2400147f-2eb9-4d4e-9656-a799cf81d03c","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"2400147f-2eb9-4d4e-9656-a799cf81d03c\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-sonar-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"sonar-rabbitmq-cluster-server-token-tf25h","secret":{"secretName":"sonar-rabbitmq-cluster-server-token-tf25h","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"sonar-rabbitmq-cluster-server-token-tf25h","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"sonar-rabbitmq-cluster-server-token-tf25h","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"sonar-rabbitmq-cluster-server-0","subdomain":"sonar-rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]},"status":{"phase":"Pending","qosClass":"Burstable"}}
2021/04/09 00:59:34 [SONAR-EVENT]	51	Updated	serviceaccount	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/api/v1/namespaces/default/serviceaccounts/sonar-rabbitmq-cluster-server","uid":"5044f0ee-b08d-41af-9dba-bca611775451","resourceVersion":"2073","creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:secrets":{".":{},"k:{\"name\":\"sonar-rabbitmq-cluster-server-token-tf25h\"}":{".":{},"f:name":{}}}}},{"manager":"manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}}}}]},"secrets":[{"name":"sonar-rabbitmq-cluster-server-token-tf25h"}]}
2021/04/09 00:59:37 [SONAR-EVENT]	52	Updated	statefulset	{"metadata":{"name":"sonar-rabbitmq-cluster-server","namespace":"default","selfLink":"/apis/apps/v1/namespaces/default/statefulsets/sonar-rabbitmq-cluster-server","uid":"2400147f-2eb9-4d4e-9656-a799cf81d03c","resourceVersion":"2088","generation":1,"creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:collisionCount":{},"f:currentReplicas":{},"f:currentRevision":{},"f:observedGeneration":{},"f:replicas":{},"f:updateRevision":{},"f:updatedReplicas":{}}}},{"manager":"manager","operation":"Update","apiVersion":"apps/v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9059973b-476e-4e72-90b5-b4f4e14ad6e4\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:podManagementPolicy":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:serviceName":{},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}},"f:updateStrategy":{"f:rollingUpdate":{".":{},"f:partition":{}},"f:type":{}},"f:volumeClaimTemplates":{}}}}]},"spec":{"replicas":1,"selector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"}},"spec":{"volumes":[{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"schedulerName":"default-scheduler","topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]}},"volumeClaimTemplates":[{"metadata":{"name":"persistence","namespace":"default","creationTimestamp":null,"labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq"},"ownerReferences":[{"apiVersion":"rabbitmq.com/v1beta1","kind":"RabbitmqCluster","name":"sonar-rabbitmq-cluster","uid":"9059973b-476e-4e72-90b5-b4f4e14ad6e4","controller":true,"blockOwnerDeletion":false}]},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"10Gi"}},"volumeMode":"Filesystem"},"status":{"phase":"Pending"}}],"serviceName":"sonar-rabbitmq-cluster-nodes","podManagementPolicy":"Parallel","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":1,"currentReplicas":1,"updatedReplicas":1,"currentRevision":"sonar-rabbitmq-cluster-server-594479b66","updateRevision":"sonar-rabbitmq-cluster-server-594479b66","collisionCount":0}}
2021/04/09 00:59:37 [SONAR-CACHE-READ]	Get	statefulset	default	sonar-rabbitmq-cluster-server	NoError
2021/04/09 00:59:37 [SONAR-SIDE-EFFECT]	Update	statefulset	default	sonar-rabbitmq-cluster-server	Conflict
2021/04/09 00:59:40 [SONAR-EVENT]	53	Updated	pod	{"metadata":{"name":"sonar-rabbitmq-cluster-server-0","generateName":"sonar-rabbitmq-cluster-server-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/sonar-rabbitmq-cluster-server-0","uid":"60e16667-b98f-4700-84e5-e23473203d99","resourceVersion":"2112","creationTimestamp":"2021-04-09T00:59:13Z","labels":{"app.kubernetes.io/component":"rabbitmq","app.kubernetes.io/name":"sonar-rabbitmq-cluster","app.kubernetes.io/part-of":"rabbitmq","controller-revision-hash":"sonar-rabbitmq-cluster-server-594479b66","statefulset.kubernetes.io/pod-name":"sonar-rabbitmq-cluster-server-0"},"annotations":{"prometheus.io/port":"15692","prometheus.io/scrape":"true"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"StatefulSet","name":"sonar-rabbitmq-cluster-server","uid":"2400147f-2eb9-4d4e-9656-a799cf81d03c","controller":true,"blockOwnerDeletion":true}],"managedFields":[{"manager":"kube-controller-manager","operation":"Update","apiVersion":"v1","time":"2021-04-09T00:59:13Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:prometheus.io/port":{},"f:prometheus.io/scrape":{}},"f:generateName":{},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/part-of":{},"f:controller-revision-hash":{},"f:statefulset.kubernetes.io/pod-name":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"2400147f-2eb9-4d4e-9656-a799cf81d03c\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:spec":{"f:automountServiceAccountToken":{},"f:containers":{"k:{\"name\":\"rabbitmq\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"K8S_HOSTNAME_SUFFIX\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"K8S_SERVICE_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{".":{},"f:apiVersion":{},"f:fieldPath":{}}}},"k:{\"name\":\"RABBITMQ_ENABLED_PLUGINS_FILE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_NODENAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"RABBITMQ_USE_LONGNAME\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{".":{},"f:command":{}}}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":4369,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":5672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15672,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}},"k:{\"containerPort\":15692,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:tcpSocket":{".":{},"f:port":{}},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/pod-info/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/10-operatorDefaults.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/11-default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:hostname":{},"f:initContainers":{".":{},"k:{\"name\":\"setup-container\"}":{".":{},"f:command":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:securityContext":{".":{},"f:capabilities":{".":{},"f:drop":{}},"f:runAsUser":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/operator\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/default_user.conf\"}":{".":{},"f:mountPath":{},"f:name":{},"f:subPath":{}},"k:{\"mountPath\":\"/tmp/erlang-cookie-secret/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/tmp/rabbitmq-plugins/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/var/lib/rabbitmq/mnesia/\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{".":{},"f:fsGroup":{},"f:runAsGroup":{},"f:runAsUser":{}},"f:serviceAccount":{},"f:serviceAccountName":{},"f:subdomain":{},"f:terminationGracePeriodSeconds":{},"f:topologySpreadConstraints":{".":{},"k:{\"topologyKey\":\"topology.kubernetes.io/zone\",\"whenUnsatisfiable\":\"ScheduleAnyway\"}":{".":{},"f:labelSelector":{".":{},"f:matchLabels":{".":{},"f:app.kubernetes.io/name":{}}},"f:maxSkew":{},"f:topologyKey":{},"f:whenUnsatisfiable":{}}},"f:volumes":{".":{},"k:{\"name\":\"erlang-cookie-secret\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}},"k:{\"name\":\"persistence\"}":{".":{},"f:name":{},"f:persistentVolumeClaim":{".":{},"f:claimName":{}}},"k:{\"name\":\"plugins-conf\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"pod-info\"}":{".":{},"f:downwardAPI":{".":{},"f:defaultMode":{},"f:items":{}},"f:name":{}},"k:{\"name\":\"rabbitmq-confd\"}":{".":{},"f:name":{},"f:projected":{".":{},"f:defaultMode":{},"f:sources":{}}},"k:{\"name\":\"rabbitmq-erlang-cookie\"}":{".":{},"f:emptyDir":{},"f:name":{}},"k:{\"name\":\"rabbitmq-plugins\"}":{".":{},"f:emptyDir":{},"f:name":{}}}}}}]},"spec":{"volumes":[{"name":"persistence","persistentVolumeClaim":{"claimName":"persistence-sonar-rabbitmq-cluster-server-0"}},{"name":"plugins-conf","configMap":{"name":"sonar-rabbitmq-cluster-plugins-conf","defaultMode":420}},{"name":"rabbitmq-confd","projected":{"sources":[{"secret":{"name":"sonar-rabbitmq-cluster-default-user","items":[{"key":"default_user.conf","path":"default_user.conf"}]}},{"configMap":{"name":"sonar-rabbitmq-cluster-server-conf","items":[{"key":"operatorDefaults.conf","path":"operatorDefaults.conf"},{"key":"userDefinedConfiguration.conf","path":"userDefinedConfiguration.conf"}]}}],"defaultMode":420}},{"name":"rabbitmq-erlang-cookie","emptyDir":{}},{"name":"erlang-cookie-secret","secret":{"secretName":"sonar-rabbitmq-cluster-erlang-cookie","defaultMode":420}},{"name":"rabbitmq-plugins","emptyDir":{}},{"name":"pod-info","downwardAPI":{"items":[{"path":"skipPreStopChecks","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.labels['skipPreStopChecks']"}}],"defaultMode":420}},{"name":"sonar-rabbitmq-cluster-server-token-tf25h","secret":{"secretName":"sonar-rabbitmq-cluster-server-token-tf25h","defaultMode":420}}],"initContainers":[{"name":"setup-container","image":"rabbitmq:3.8.12-management","command":["sh","-c","cp /tmp/erlang-cookie-secret/.erlang.cookie /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.erlang.cookie \u0026\u0026 chmod 600 /var/lib/rabbitmq/.erlang.cookie ; cp /tmp/rabbitmq-plugins/enabled_plugins /operator/enabled_plugins \u0026\u0026 chown 999:999 /operator/enabled_plugins ; chown 999:999 /var/lib/rabbitmq/mnesia/ ; echo '[default]' \u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 sed -e 's/default_user/username/' -e 's/default_pass/password/' /tmp/default_user.conf \u003e\u003e /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chown 999:999 /var/lib/rabbitmq/.rabbitmqadmin.conf \u0026\u0026 chmod 600 /var/lib/rabbitmq/.rabbitmqadmin.conf"],"resources":{"limits":{"cpu":"100m","memory":"500Mi"},"requests":{"cpu":"100m","memory":"500Mi"}},"volumeMounts":[{"name":"plugins-conf","mountPath":"/tmp/rabbitmq-plugins/"},{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"erlang-cookie-secret","mountPath":"/tmp/erlang-cookie-secret/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-confd","mountPath":"/tmp/default_user.conf","subPath":"default_user.conf"},{"name":"sonar-rabbitmq-cluster-server-token-tf25h","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"drop":["FSETID","KILL","SETGID","SETUID","SETPCAP","NET_BIND_SERVICE","NET_RAW","SYS_CHROOT","MKNOD","AUDIT_WRITE","SETFCAP"]},"runAsUser":0}}],"containers":[{"name":"rabbitmq","image":"rabbitmq:3.8.12-management","ports":[{"name":"epmd","containerPort":4369,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"management","containerPort":15672,"protocol":"TCP"},{"name":"prometheus","containerPort":15692,"protocol":"TCP"}],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_ENABLED_PLUGINS_FILE","value":"/operator/enabled_plugins"},{"name":"K8S_SERVICE_NAME","value":"sonar-rabbitmq-cluster-nodes"},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(MY_POD_NAME).$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"},{"name":"K8S_HOSTNAME_SUFFIX","value":".$(K8S_SERVICE_NAME).$(MY_POD_NAMESPACE)"}],"resources":{"limits":{"cpu":"2","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"volumeMounts":[{"name":"rabbitmq-erlang-cookie","mountPath":"/var/lib/rabbitmq/"},{"name":"persistence","mountPath":"/var/lib/rabbitmq/mnesia/"},{"name":"rabbitmq-plugins","mountPath":"/operator"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/10-operatorDefaults.conf","subPath":"operatorDefaults.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/11-default_user.conf","subPath":"default_user.conf"},{"name":"rabbitmq-confd","mountPath":"/etc/rabbitmq/conf.d/90-userDefinedConfiguration.conf","subPath":"userDefinedConfiguration.conf"},{"name":"pod-info","mountPath":"/etc/pod-info/"},{"name":"sonar-rabbitmq-cluster-server-token-tf25h","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"readinessProbe":{"tcpSocket":{"port":"amqp"},"initialDelaySeconds":10,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"lifecycle":{"preStop":{"exec":{"command":["/bin/bash","-c","if [ ! -z \"$(cat /etc/pod-info/skipPreStopChecks)\" ]; then exit 0; fi; rabbitmq-upgrade await_online_quorum_plus_one -t 604800; rabbitmq-upgrade await_online_synchronized_mirror -t 604800; rabbitmq-upgrade drain -t 604800"]}}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":604800,"dnsPolicy":"ClusterFirst","serviceAccountName":"sonar-rabbitmq-cluster-server","serviceAccount":"sonar-rabbitmq-cluster-server","automountServiceAccountToken":true,"nodeName":"kind-worker2","securityContext":{"runAsUser":999,"runAsGroup":999,"fsGroup":999},"hostname":"sonar-rabbitmq-cluster-server-0","subdomain":"sonar-rabbitmq-cluster-nodes","schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"topologySpreadConstraints":[{"maxSkew":1,"topologyKey":"topology.kubernetes.io/zone","whenUnsatisfiable":"ScheduleAnyway","labelSelector":{"matchLabels":{"app.kubernetes.io/name":"sonar-rabbitmq-cluster"}}}]},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2021-04-09T00:59:15Z"}],"qosClass":"Burstable"}}
